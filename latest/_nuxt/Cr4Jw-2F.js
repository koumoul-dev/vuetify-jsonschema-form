var Ut=Object.defineProperty;var Bt=(e,t,i)=>t in e?Ut(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var S=(e,t,i)=>Bt(e,typeof t!="symbol"?t+"":t,i);import{a as qt,e as Gt,aw as Jt,f as Zt,x as Qt,ax as Xt,y as St,z as Ft,A as Tt,ay as Yt,w as Nt,B as ei,az as ti,u as ii,H as ri}from"./CFppakwY.js";import{aS as si,o as At,a5 as Pt,aO as ni,Y as ai,aQ as Me,i as ne,r as ae,ac as N,aP as kt,a2 as dt,$ as ht,ba as oi,aJ as q}from"./DmDB8jaP.js";import{g as li}from"./BosuxZz1.js";var Ot=Symbol.for("immer-nothing"),mt=Symbol.for("immer-draftable"),$=Symbol.for("immer-state");function R(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var te=Object.getPrototypeOf;function ie(e){return!!e&&!!e[$]}function J(e){var t;return e?Et(e)||Array.isArray(e)||!!e[mt]||!!((t=e.constructor)!=null&&t[mt])||ge(e)||ye(e):!1}var ui=Object.prototype.constructor.toString();function Et(e){if(!e||typeof e!="object")return!1;const t=te(e);if(t===null)return!0;const i=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return i===Object?!0:typeof i=="function"&&Function.toString.call(i)===ui}function oe(e,t){pe(e)===0?Object.entries(e).forEach(([i,r])=>{t(i,r,e)}):e.forEach((i,r)=>t(r,i,e))}function pe(e){const t=e[$];return t?t.type_:Array.isArray(e)?1:ge(e)?2:ye(e)?3:0}function Te(e,t){return pe(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Dt(e,t,i){const r=pe(e);r===2?e.set(t,i):r===3?e.add(i):e[t]=i}function ci(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function ge(e){return e instanceof Map}function ye(e){return e instanceof Set}function G(e){return e.copy_||e.base_}function Ae(e,t){if(ge(e))return new Map(e);if(ye(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&Et(e))return te(e)?{...e}:Object.assign(Object.create(null),e);const i=Object.getOwnPropertyDescriptors(e);delete i[$];let r=Reflect.ownKeys(i);for(let s=0;s<r.length;s++){const u=r[s],n=i[u];n.writable===!1&&(n.writable=!0,n.configurable=!0),(n.get||n.set)&&(i[u]={configurable:!0,writable:!0,enumerable:n.enumerable,value:e[u]})}return Object.create(te(e),i)}function ze(e,t=!1){return ve(e)||ie(e)||!J(e)||(pe(e)>1&&(e.set=e.add=e.clear=e.delete=fi),Object.freeze(e),t&&oe(e,(i,r)=>ze(r,!0))),e}function fi(){R(2)}function ve(e){return Object.isFrozen(e)}var di={};function Z(e){const t=di[e];return t||R(0,e),t}var le;function xt(){return le}function hi(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function pt(e,t){t&&(Z("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Pe(e){ke(e),e.drafts_.forEach(mi),e.drafts_=null}function ke(e){e===le&&(le=e.parent_)}function gt(e){return le=hi(le,e)}function mi(e){const t=e[$];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function yt(e,t){t.unfinalizedDrafts_=t.drafts_.length;const i=t.drafts_[0];return e!==void 0&&e!==i?(i[$].modified_&&(Pe(t),R(4)),J(e)&&(e=he(t,e),t.parent_||me(t,e)),t.patches_&&Z("Patches").generateReplacementPatches_(i[$].base_,e,t.patches_,t.inversePatches_)):e=he(t,i,[]),Pe(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ot?e:void 0}function he(e,t,i){if(ve(t))return t;const r=t[$];if(!r)return oe(t,(s,u)=>vt(e,r,t,s,u,i)),t;if(r.scope_!==e)return t;if(!r.modified_)return me(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let u=s,n=!1;r.type_===3&&(u=new Set(s),s.clear(),n=!0),oe(u,(c,o)=>vt(e,r,s,c,o,i,n)),me(e,s,!1),i&&e.patches_&&Z("Patches").generatePatches_(r,i,e.patches_,e.inversePatches_)}return r.copy_}function vt(e,t,i,r,s,u,n){if(ie(s)){const c=u&&t&&t.type_!==3&&!Te(t.assigned_,r)?u.concat(r):void 0,o=he(e,s,c);if(Dt(i,r,o),ie(o))e.canAutoFreeze_=!1;else return}else n&&i.add(s);if(J(s)&&!ve(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;he(e,s),(!t||!t.scope_.parent_)&&me(e,s)}}function me(e,t,i=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ze(t,i)}function pi(e,t){const i=Array.isArray(e),r={type_:i?1:0,scope_:t?t.scope_:xt(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,u=$e;i&&(s=[r],u=ue);const{revoke:n,proxy:c}=Proxy.revocable(s,u);return r.draft_=c,r.revoke_=n,c}var $e={get(e,t){if(t===$)return e;const i=G(e);if(!Te(i,t))return gi(e,i,t);const r=i[t];return e.finalized_||!J(r)?r:r===_e(e.base_,t)?(we(e),e.copy_[t]=Ee(r,e)):r},has(e,t){return t in G(e)},ownKeys(e){return Reflect.ownKeys(G(e))},set(e,t,i){const r=jt(G(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,i),!0;if(!e.modified_){const s=_e(G(e),t),u=s==null?void 0:s[$];if(u&&u.base_===i)return e.copy_[t]=i,e.assigned_[t]=!1,!0;if(ci(i,s)&&(i!==void 0||Te(e.base_,t)))return!0;we(e),Oe(e)}return e.copy_[t]===i&&(i!==void 0||t in e.copy_)||Number.isNaN(i)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=i,e.assigned_[t]=!0),!0},deleteProperty(e,t){return _e(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,we(e),Oe(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const i=G(e),r=Reflect.getOwnPropertyDescriptor(i,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:i[t]}},defineProperty(){R(11)},getPrototypeOf(e){return te(e.base_)},setPrototypeOf(){R(12)}},ue={};oe($e,(e,t)=>{ue[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ue.deleteProperty=function(e,t){return ue.set.call(this,e,t,void 0)};ue.set=function(e,t,i){return $e.set.call(this,e[0],t,i,e[0])};function _e(e,t){const i=e[$];return(i?G(i):e)[t]}function gi(e,t,i){var s;const r=jt(t,i);return r?"value"in r?r.value:(s=r.get)==null?void 0:s.call(e.draft_):void 0}function jt(e,t){if(!(t in e))return;let i=te(e);for(;i;){const r=Object.getOwnPropertyDescriptor(i,t);if(r)return r;i=te(i)}}function Oe(e){e.modified_||(e.modified_=!0,e.parent_&&Oe(e.parent_))}function we(e){e.copy_||(e.copy_=Ae(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var yi=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,i,r)=>{if(typeof t=="function"&&typeof i!="function"){const u=i;i=t;const n=this;return function(o=u,...d){return n.produce(o,l=>i.call(this,l,...d))}}typeof i!="function"&&R(6),r!==void 0&&typeof r!="function"&&R(7);let s;if(J(t)){const u=gt(this),n=Ee(t,void 0);let c=!0;try{s=i(n),c=!1}finally{c?Pe(u):ke(u)}return pt(u,r),yt(s,u)}else if(!t||typeof t!="object"){if(s=i(t),s===void 0&&(s=t),s===Ot&&(s=void 0),this.autoFreeze_&&ze(s,!0),r){const u=[],n=[];Z("Patches").generateReplacementPatches_(t,s,u,n),r(u,n)}return s}else R(1,t)},this.produceWithPatches=(t,i)=>{if(typeof t=="function")return(n,...c)=>this.produceWithPatches(n,o=>t(o,...c));let r,s;return[this.produce(t,i,(n,c)=>{r=n,s=c}),r,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){J(e)||R(8),ie(e)&&(e=vi(e));const t=gt(this),i=Ee(e,void 0);return i[$].isManual_=!0,ke(t),i}finishDraft(e,t){const i=e&&e[$];(!i||!i.isManual_)&&R(9);const{scope_:r}=i;return pt(r,t),yt(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let i;for(i=t.length-1;i>=0;i--){const s=t[i];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}i>-1&&(t=t.slice(i+1));const r=Z("Patches").applyPatches_;return ie(e)?r(e,t):this.produce(e,s=>r(s,t))}};function Ee(e,t){const i=ge(e)?Z("MapSet").proxyMap_(e,t):ye(e)?Z("MapSet").proxySet_(e,t):pi(e,t);return(t?t.scope_:xt()).drafts_.push(i),i}function vi(e){return ie(e)||R(10,e),Mt(e)}function Mt(e){if(!J(e)||ve(e))return e;const t=e[$];let i;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,i=Ae(e,t.scope_.immer_.useStrictShallowCopy_)}else i=Ae(e,!0);return oe(i,(r,s)=>{Dt(i,r,Mt(s))}),t&&(t.finalized_=!1),i}var K=new yi,k=K.produce;K.produceWithPatches.bind(K);var Ci=K.setAutoFreeze.bind(K);K.setUseStrictShallowCopy.bind(K);K.applyPatches.bind(K);K.createDraft.bind(K);K.finishDraft.bind(K);const _i={errorOneOf:"chose one",errorRequired:"required information",addItem:"Add item",delete:"Delete",edit:"Edit",confirm:"Confirm",close:"Close",duplicate:"Duplicate",sort:"Sort",up:"Move up",down:"Move down",showHelp:"Show a help message",mdeLink1:"[Link title",mdeLink2:"](link url)",mdeImg1:"![](",mdeImg2:"image url)",mdeTable1:"",mdeTable2:`

| Column 1 | Column 2 | Column 3 |
| -------- | -------- | -------- |
| Text     | Text     | Text     |

`,bold:"Bold",italic:"Italic",heading:"Title",quote:"Quote",unorderedList:"Unordered list",orderedList:"Ordered list",createLink:"Create a link",insertImage:"Insert an image",createTable:"Create a table",preview:"Aperçu du rendu",mdeGuide:"Documentation de la syntaxe",undo:"Undo",redo:"Redo"},wi={errorOneOf:"choisissez une valeur",errorRequired:"information obligatoire",addItem:"Ajouter un élément",delete:"Supprimer",edit:"Éditer",confirm:"Confirmer",close:"Fermer",duplicate:"Dupliquer",sort:"Trier",up:"Décaler vers le haut",down:"Décaler vers le bas",showHelp:"Afficher un message d'aide",mdeLink1:"[titre du lien",mdeLink2:"](adresse du lien)",mdeImg1:"![](",mdeImg2:"adresse de l'image)",mdeTable1:"",mdeTable2:`

| Colonne 1 | Colonne 2 | Colonne 3 |
| -------- | -------- | -------- |
| Texte     | Texte     | Texte     |

`,bold:"Gras",italic:"Italique",heading:"Titre",quote:"Citation",unorderedList:"Liste à puce",orderedList:"Liste numérotée",createLink:"Créer un lien",insertImage:"Insérer une image",createTable:"Créer un tableau",preview:"Preview",mdeGuide:"Syntax documentation",undo:"Défaire",redo:"Refaire"},bi={errorOneOf:"Kies er een",errorRequired:"benodigde informatie",addItem:"Item toevoegen",delete:"Verwijderen",confirm:"Bevestigen",edit:"Bewerken",close:"Sluiten",duplicate:"Verveelvoudigen",sort:"Sorteren",up:"Omhoog verplaatsen",down:"Omlaag verplaatsen",showHelp:"Toon helpbericht",mdeLink1:"[Link titel",mdeLink2:"](link url)",mdeImg1:"![](",mdeImg2:"afbeelding url)",mdeTable1:"",mdeTable2:`

| Kolom 1  | Kolom 2  | Kolom 3  |
| -------- | -------- | -------- |
| Tekst    | Tekst    | Tekst    |

`,bold:"Vet",italic:"Cursief",heading:"Titel",quote:"Citaat",unorderedList:"Ongeordende lijst",orderedList:"Geordende lijst",createLink:"Maak een koppeling",insertImage:"Afbeelding invoegen",createTable:"Tabel aanmaken",preview:"Voorbeeld",mdeGuide:"Documentatie over syntaxis",undo:"Ongedaan maken",redo:"Opnieuw"},Ii={errorOneOf:"Wählen Sie eine Option",errorRequired:"Erforderliche Information",addItem:"Element hinzufügen",delete:"Löschen",edit:"Bearbeiten",confirm:"Bestätigen",close:"Schließen",duplicate:"Duplizieren",sort:"Sortieren",up:"Nach oben verschieben",down:"Nach unten verschieben",showHelp:"Hilfemeldung anzeigen",mdeLink1:"[Link-Titel",mdeLink2:"](Link-URL)",mdeImg1:"![](",mdeImg2:"Bild-URL)",mdeTable1:"",mdeTable2:`

| Spalte 1 | Spalte 2 | Spalte 3 |
| -------- | -------- | -------- |
| Text     | Text     | Text     |

`,bold:"Fett",italic:"Kursiv",heading:"Titel",quote:"Zitat",unorderedList:"Ungeordnete Liste",orderedList:"Geordnete Liste",createLink:"Link erstellen",insertImage:"Bild einfügen",createTable:"Tabelle erstellen",preview:"Vorschau",mdeGuide:"Syntax-Dokumentation",undo:"Rückgängig",redo:"Wiederholen"},Ct={en:_i,fr:wi,nl:bi,de:Ii};function De(e=[],t=[]){if(!e||!t||e.length!==t.length)return t;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return t;return e}function Si(e={},t={}){if(!e||!t)return t;const i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return t;for(const s of i)if(e[s]!==t[s])return t;return e}function zt(e=[],t=[]){if(!e||!t)return e===t;if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const Fi=Zt,cr=e=>{let t=e.ajv;if(!t){const c={allErrors:!0,strict:!1,verbose:!0};e.ajvOptions&&Object.assign(c,e.ajvOptions),e.code&&(c.code={source:!0,esm:!0,lines:!0});const o=new Fi(c);qt.default(o),Gt.default(o),t=o}try{t.addKeyword("layout")}catch{}try{t.addKeyword("__pointer")}catch{}let i=e.markdown;i||(i=o=>si.parse(o,e.markedOptions));const r=e.defaultLocale||"en",s=e.locale||r,u={...Ct[s]||Ct[r]};e.messages&&Object.assign(u,e.messages);const n=Jt.reduce((c,o)=>(c[o.name]=o,c),{});if(e.components){for(const c of Object.keys(e.components))n[c]={...e.components[c],name:c};Object.assign(n,e.components)}return{ajv:t,code:!1,markdown:i,optionsKeys:[],useDescription:["help","subtitle"],...e,locale:s,defaultLocale:r,messages:u,components:n,xI18n:!!e.xI18n}},Ti=k((e,t)=>{for(const i of["ajv","ajvOptions","code","markdown","markedOptions","xI18n","locale","defaultLocale","messages","optionsKeys","components","useDescription"])if(i in t){if(i==="components"&&zt(Object.keys(e.components??[]),Object.keys(t.components??[])))continue;e[i]=t[i]}else delete e[i]});var xe={exports:{}},be,_t;function Ai(){if(_t)return be;_t=1;var e=1e3,t=e*60,i=t*60,r=i*24,s=r*7,u=r*365.25;be=function(l,a){a=a||{};var f=typeof l;if(f==="string"&&l.length>0)return n(l);if(f==="number"&&isFinite(l))return a.long?o(l):c(l);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(l))};function n(l){if(l=String(l),!(l.length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(l);if(a){var f=parseFloat(a[1]),g=(a[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return f*u;case"weeks":case"week":case"w":return f*s;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*i;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function c(l){var a=Math.abs(l);return a>=r?Math.round(l/r)+"d":a>=i?Math.round(l/i)+"h":a>=t?Math.round(l/t)+"m":a>=e?Math.round(l/e)+"s":l+"ms"}function o(l){var a=Math.abs(l);return a>=r?d(l,a,r,"day"):a>=i?d(l,a,i,"hour"):a>=t?d(l,a,t,"minute"):a>=e?d(l,a,e,"second"):l+" ms"}function d(l,a,f,g){var h=a>=f*1.5;return Math.round(l/f)+" "+g+(h?"s":"")}return be}function Pi(e){i.debug=i,i.default=i,i.coerce=o,i.disable=u,i.enable=s,i.enabled=n,i.humanize=Ai(),i.destroy=d,Object.keys(e).forEach(l=>{i[l]=e[l]}),i.names=[],i.skips=[],i.formatters={};function t(l){let a=0;for(let f=0;f<l.length;f++)a=(a<<5)-a+l.charCodeAt(f),a|=0;return i.colors[Math.abs(a)%i.colors.length]}i.selectColor=t;function i(l){let a,f=null,g,h;function v(...T){if(!v.enabled)return;const p=v,b=Number(new Date),O=b-(a||b);p.diff=O,p.prev=a,p.curr=b,a=b,T[0]=i.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let j=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(w,M)=>{if(w==="%%")return"%";j++;const m=i.formatters[M];if(typeof m=="function"){const A=T[j];w=m.call(p,A),T.splice(j,1),j--}return w}),i.formatArgs.call(p,T),(p.log||i.log).apply(p,T)}return v.namespace=l,v.useColors=i.useColors(),v.color=i.selectColor(l),v.extend=r,v.destroy=i.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(g!==i.namespaces&&(g=i.namespaces,h=i.enabled(l)),h),set:T=>{f=T}}),typeof i.init=="function"&&i.init(v),v}function r(l,a){const f=i(this.namespace+(typeof a>"u"?":":a)+l);return f.log=this.log,f}function s(l){i.save(l),i.namespaces=l,i.names=[],i.skips=[];let a;const f=(typeof l=="string"?l:"").split(/[\s,]+/),g=f.length;for(a=0;a<g;a++)f[a]&&(l=f[a].replace(/\*/g,".*?"),l[0]==="-"?i.skips.push(new RegExp("^"+l.slice(1)+"$")):i.names.push(new RegExp("^"+l+"$")))}function u(){const l=[...i.names.map(c),...i.skips.map(c).map(a=>"-"+a)].join(",");return i.enable(""),l}function n(l){if(l[l.length-1]==="*")return!0;let a,f;for(a=0,f=i.skips.length;a<f;a++)if(i.skips[a].test(l))return!1;for(a=0,f=i.names.length;a<f;a++)if(i.names[a].test(l))return!0;return!1}function c(l){return l.toString().substring(2,l.toString().length-2).replace(/\.\*\?$/,"*")}function o(l){return l instanceof Error?l.stack||l.message:l}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var ki=Pi;(function(e,t){var i={};t.formatArgs=s,t.save=u,t.load=n,t.useColors=r,t.storage=c(),t.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let d;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(d=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(d[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;d.splice(1,0,l,"color: inherit");let a=0,f=0;d[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(a++,g==="%c"&&(f=a))}),d.splice(f,0,l)}t.log=console.debug||console.log||(()=>{});function u(d){try{d?t.storage.setItem("debug",d):t.storage.removeItem("debug")}catch{}}function n(){let d;try{d=t.storage.getItem("debug")}catch{}return!d&&typeof process<"u"&&"env"in process&&(d=i.DEBUG),d}function c(){try{return localStorage}catch{}}e.exports=ki(t);const{formatters:o}=e.exports;o.j=function(d){try{return JSON.stringify(d)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}})(xe,xe.exports);var Oi=xe.exports;const Q=li(Oi),ce=["xs","sm","md","lg","xl","xxl"],F={xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560};class je{constructor(t){S(this,"width");this.width=t}get name(){for(let t=0;t<ce.length;t++)if(ce[t+1]&&this.width<F[ce[t+1]])return ce[t];return"xxl"}get xs(){return this.width<F.sm}get sm(){return this.width>=F.sm&&this.width<F.md}get smAndDown(){return this.width<F.md}get smAndUp(){return this.width>=F.sm}get md(){return this.width>=F.md&&this.width<F.lg}get mdAndDown(){return this.width<F.lg}get mobile(){return this.mdAndDown}get mdAndUp(){return this.width>=F.md}get lg(){return this.width>=F.lg&&this.width<F.xl}get lgAndDown(){return this.width<F.xl}get lgAndUp(){return this.width>=F.lg}get xl(){return this.width>=F.xl&&this.width<F.xxl}get xlAndDown(){return this.width<F.xxl}get xlAndUp(){return this.width>=F.xl}get xxl(){return this.width>=F.xxl}}function Ei(e,t){if(!t)return[e,12];let i=t.xs;return e.smAndUp&&t.sm!==void 0&&(i=t.sm),e.mdAndUp&&t.md!==void 0&&(i=t.md),e.lgAndUp&&t.lg!==void 0&&(i=t.lg),e.xlAndUp&&t.xl!==void 0&&(i=t.xl),e.xxl&&t.xxl!==void 0&&(i=t.xxl),[i===12?e:new je(Math.round(e.width*(i/12))),i]}const Ie={};function $t(e){return Ie[e]=Ie[e]??new RegExp(e),Ie[e]}const fe=Q("jl:state-node"),Di=Q("jl:validation"),de=e=>!!(e===""||e===void 0||Array.isArray(e)&&!e.length||typeof e=="object"&&!Array.isArray(e)&&e&&Object.values(e).findIndex(t=>t!==void 0)===-1),Kt=(e,t,i)=>!!(i.defaultOn==="missing"&&e===void 0||i.defaultOn==="empty"&&de(e)),xi=k((e,t,i,r,s,u,n,c,o,d,l,a,f,g,h,v,T,p,b)=>{if(e.messages=c.messages?ji(e.messages||{},c.messages,g):g.messages,e.key=t,e.fullKey=i,e.parentFullKey=r,e.dataPath=s,e.parentDataPath=u,e.skeleton=n,e.layout=c,e.width=o,e.options=g,e.cols=d,e.data=l,e.error=a,e.itemsCacheKey=p,e.childError=b&&b.findIndex(O=>O.error||O.childError)!==-1,e.validated=f,h)e.autofocus=!0,delete e.autofocusChild;else{delete e.autofocus;const O=b==null?void 0:b.find(j=>j.autofocus);O?e.autofocusChild=O.key:delete e.autofocusChild}e.props=v,e.slots=T,e.children=b}),ji=k((e,t,i)=>{Object.assign(e,i.messages,t)}),Mi=k((e,t)=>{for(const i of t){const r=i.key;i.data===void 0?delete e[r]:e[r]=i.data}for(;e.length&&e[e.length-1]===void 0;)e.pop()}),zi=k((e,t,i,r,s)=>{for(let u=0;u<e.length;u++)e[u]instanceof File||(e[u]=Vt(e[u],t+"/"+u,void 0,i,r,s))}),Vt=k((e,t,i,r,s,u)=>{if(s&&(s.length||i!=null&&i.length))for(const n of Object.keys(e))s.includes(n)||delete e[n];if(u)for(const n of u)delete e[n];if(i)for(const n of i)if(t===n.dataPath){if(n.data===void 0)continue;Object.assign(e,n.data)}else n.data===void 0?delete e[n.key]:e[n.key]=n.data;if(r)for(const n of r)n.instancePath===t&&(n.keyword==="additionalProperties"&&delete e[n.params.additionalProperty],n.keyword==="unevaluatedProperties"&&delete e[n.params.unevaluatedProperty])}),$i=k((e,t,i,r)=>{for(const s of Object.keys(t))i.includes(s)||r.some(u=>!!s.match($t(u)))&&(e[s]=t[s]);for(const s of Object.keys(e))s in t||delete e[s]}),Ki=k((e,t,i={})=>{for(const r in t)e[r]=i[r]??t[r];for(const r in i)e[r]=i[r];for(const r in e)!(r in t)&&!(r in i)&&delete e[r]}),wt=k(e=>{e.readOnly=!0,e.summary=!0}),Vi=k((e,t)=>{t.title&&e.titleDepth<6&&(e.titleDepth+=1)}),bt=(e,t,i,r)=>{var u,n,c,o;const s=((n=(u=e.params)==null?void 0:u.errors)==null?void 0:n[0])??e;return r===s.instancePath&&((c=s.params)==null?void 0:c.missingProperty)===t.key||s.instancePath===i&&(s.schemaPath===t.pointer||s.schemaPath===t.refPointer)&&!((o=s.params)!=null&&o.missingProperty)},Se=(e,t,i,r)=>{var u,n;const s=((n=(u=e.params)==null?void 0:u.errors)==null?void 0:n[0])??e;return!(s.schemaPath===t.pointer||s.schemaPath.startsWith(t.pointer+"/"))&&!(s.schemaPath===t.refPointer||s.schemaPath.startsWith(t.refPointer+"/"))?!1:!!s.instancePath.startsWith(i)};function V(e,t,i,r,s,u,n,c,o){if(t.ref===void 0)throw new Error("expression was not compiled : "+JSON.stringify(t));const d=e[t.ref];try{return t.pure?d(i,i,r,r.context,s,u,r.readOnly,r.summary,n):d(i,i,r,r.context,s,u,r.readOnly,r.summary,n,c,o)}catch(l){const a={expression:t,data:i,context:r.context,display:s};throw a[t.dataAlias]=i,t.pure||(a.rootData=c,a.parent=o),console.warn("json-layout: failed to evaluate expression",l,a),new Error("json-layout: failed to evaluate expression")}}const Fe={comp:"none"},Ri=(e,t,i,r,s,u,n,c)=>{if(Nt(e)){for(const o of e.switch)if(!o.if||V(r.expressions,o.if,u,i,s,o,r.validates,n,c))return o}else return t!=null&&t.if&&!V(r.expressions,t.if,u,i,s,e,r.validates,n,c)||e.if&&!V(r.expressions,e.if,u,i,s,e,r.validates,n,c)?Fe:e;return Fe};function se(e,t,i,r,s,u,n,c,o,d,l,a,f,g,h){var Re,He,Le,We,Ue,Be,qe,Ge,Je,Ze,Qe,Xe,Ye,Ne,et,tt,it,rt,st,nt,at,ot,lt,ut,ct,ft;fe("createStateNode",s);let v=null;if(o.pure&&!(h!=null&&h.error)&&!(h!=null&&h.childError)){const y=g.validatedForm||g.validatedChildren.includes(s);if(v=[h,t,i,s,e.currentInput!==null&&e.currentInput.startsWith(s),o,d,l.width,y,e.activatedItems,e.initial,((Re=e.rehydrateErrors)==null?void 0:Re.length)??0,a],h&&e.cacheKeys[s]&&zt(e.cacheKeys[s],v))return fe("createStateNode cache hit",s),e._debugCache&&(e._debugCache[s]=(e._debugCache[s]??[]).concat(["hit"])),h;fe("createStateNode cache miss",s),e._debugCache&&(e._debugCache[s]=(e._debugCache[s]??[]).concat(["miss"]))}else fe("createStateNode cache skip",s),e._debugCache&&(e._debugCache[s]=(e._debugCache[s]??[]).concat(["skip"]));const T=d&&(ei(d)||ti(d))?d:i.normalizedLayouts[o.pointer],p=Ri(T,d,t,i,l,a,e.rootData,f),[b,O]=Ei(l,(d==null?void 0:d.cols)??p.cols),j=(d==null?void 0:d.slots)??p.slots,C=p.getOptions?Ki((h==null?void 0:h.options)??{},t,V(i.expressions,p.getOptions,a,t,b,p,i.validates,e.rootData,f)):t;e.initial&&t.autofocus&&p.autofocus&&p.comp!=="none"&&(e.autofocusTarget=s);let w;if(Qt(p,i.components)){const y=a??{},I=Vi(C,p);w=[];let L=e.autofocusTarget===s;for(let E=0;E<p.children.length;E++){const _=p.children[E];if(["remove","hide"].includes(C.readOnlyPropertiesMode)&&((He=o.roPropertyKeys)!=null&&He.includes(_.key)))continue;let P=o;const z=(Le=o.children)==null?void 0:Le.find(re=>i.skeletonNodes[re].key===_.key);if(z!==void 0&&(P=i.skeletonNodes[z]),P.condition&&!V(i.expressions,P.condition,y,t,b,p,i.validates,e.rootData,f))continue;const D=typeof _.key=="string"&&_.key.startsWith("$"),H=`${s}/${_.key}`;L&&(e.autofocusTarget=H);let B=D?y:y[_.key];if(_.key==="$patternProperties"){const re=i.normalizedLayouts[P.pointer];B=$i(((Ue=(We=h==null?void 0:h.children)==null?void 0:We.find(Wt=>Wt.key==="$patternProperties"))==null?void 0:Ue.data)??{},y,o.propertyKeys,re.indexed??[])}const Ce=se(e,I,i,_.key,H,s,D?n:`${n}/${_.key}`,n,P,_,b,B,{parent:f,data:y},g,(Be=h==null?void 0:h.children)==null?void 0:Be.find(re=>re.fullKey===H));(Ce.autofocus||Ce.autofocusChild!==void 0)&&(L=!1),w.push(Ce)}}if(r==="$oneOf"&&o.childrenTrees){const y=s in e.activatedItems?e.activatedItems[s]:(qe=o.childrenTrees)==null?void 0:qe.findIndex(I=>i.validates[i.skeletonTrees[I].refPointer](a));if(y!==-1){s in e.activatedItems||(e.autoActivatedItems[s]=y),e.errors=(Ge=e.errors)==null?void 0:Ge.filter(E=>{var P,z;const _=((z=(P=E.params)==null?void 0:P.errors)==null?void 0:z[0])??E;return!(bt(E,o,n,c)||Se(E,o,n)&&(_.schemaPath.startsWith(o.pointer)&&!_.schemaPath.startsWith(o.pointer+"/"+y)||_.schemaPath.startsWith(o.refPointer)&&!_.schemaPath.startsWith(o.refPointer+"/"+y)))});const I=`${s}/${y}`;e.autofocusTarget===s&&(e.autofocusTarget=I);const L=i.skeletonTrees[o.childrenTrees[y]];w=[se(e,C,i,y,I,s,n,n,i.skeletonNodes[L.root],null,b,a,{parent:f,data:a},g,(Je=h==null?void 0:h.children)==null?void 0:Je[0])]}}if(Xt(p))if(p.indexed){const y=a??[],I=p.listEditMode==="inline"?C:wt(C);w=[];let L=e.autofocusTarget===s;const E=Object.keys(y);for(let _=0;_<E.length;_++){const P=E[_];let z=null;if(((Ze=o==null?void 0:o.childrenTrees)==null?void 0:Ze.length)===1)z=i.skeletonNodes[(Qe=i.skeletonTrees[o==null?void 0:o.childrenTrees[0]])==null?void 0:Qe.root];else for(let D=0;D<p.indexed.length;D++){const H=p.indexed[D],B=(Xe=o==null?void 0:o.childrenTrees)==null?void 0:Xe[D];if(!B)throw new Error(`missing skeleton tree for pattern ${H}`);P.match($t(H))&&(z=i.skeletonNodes[(Ye=i.skeletonTrees[B])==null?void 0:Ye.root])}if(z){const D=`${s}/${P}`;L&&(e.autofocusTarget=D);const H=se(e,p.listEditMode==="inline-single"&&e.activatedItems[s]===_?C:I,i,P,D,s,`${n}/${P}`,n,z,null,b,y[P],{parent:f,data:y},g,(Ne=h==null?void 0:h.children)==null?void 0:Ne.find(B=>B.key===P));(H.autofocus||H.autofocusChild!==void 0)&&(L=!1),w.push(H)}}}else{const y=a??[],I=((et=o==null?void 0:o.childrenTrees)==null?void 0:et[0])&&i.skeletonNodes[(it=i.skeletonTrees[(tt=o==null?void 0:o.childrenTrees)==null?void 0:tt[0]])==null?void 0:it.root],L=p.listEditMode==="inline"?C:wt(C);w=[];let E=e.autofocusTarget===s;for(let _=0;_<y.length;_++){const P=y[_],z=`${s}/${_}`;E&&(e.autofocusTarget=z);const D=se(e,p.listEditMode==="inline-single"&&e.activatedItems[s]===_?C:L,i,_,z,s,`${n}/${_}`,n,I,null,b,P,{parent:f,data:y},g,(rt=h==null?void 0:h.children)==null?void 0:rt[_]);(D.autofocus||D.autofocusChild!==void 0)&&(E=!1),w.push(D)}}let M=(st=e.errors)==null?void 0:st.find(y=>bt(y,o,n,c));!M&&e.rehydrate&&e.rehydrateErrors&&(M=(nt=e.rehydrateErrors)==null?void 0:nt.findLast(y=>Se(y,o,n))),p.comp!=="none"&&M&&(Di(`${s} capture validation error on node`,M),e.errors=(at=e.errors)==null?void 0:at.filter(y=>M!==y),e.rehydrate&&e.rehydrateErrors&&(e.rehydrateErrors=(ot=e.rehydrateErrors)==null?void 0:ot.filter(y=>!Se(y,o,n))));let m=a;m===null&&!p.nullable&&(m=void 0);const A=g.validatedForm||g.validatedChildren.includes(s)||g.initialized===!1&&C.initialValidation==="always"||g.initialized===!1&&C.initialValidation==="withData"&&!de(m);if(typeof((lt=w==null?void 0:w[0])==null?void 0:lt.key)=="number"&&p.comp!=="one-of-select"&&!p.indexed)m=Mi(m??[],w);else if(Array.isArray(m)){const y=((ut=o.childrenTrees)==null?void 0:ut[0])&&i.skeletonTrees[(ct=o.childrenTrees)==null?void 0:ct[0]],I=y&&i.skeletonNodes[y.root]||null;m=zi(m??[],n,e.additionalPropertiesErrors,[!0,"unknown"].includes(C.removeAdditional)?I==null?void 0:I.propertyKeys:void 0,C.readOnlyPropertiesMode==="remove"?I==null?void 0:I.roPropertyKeys:void 0)}else if((typeof m=="object"||m===void 0&&(w!=null&&w.length))&&!(m instanceof File)){const y=[!0,"unknown"].includes(C.removeAdditional)||(w==null?void 0:w.some(I=>I.key==="$patternProperties"));m=Vt(m??{},n,w,e.additionalPropertiesErrors,y?o.propertyKeys:void 0,C.readOnlyPropertiesMode==="remove"?o.roPropertyKeys:void 0)}if(m!==a&&(Array.isArray(a)&&Array.isArray(m)?m=De(a,m):typeof a=="object"&&typeof m=="object"&&(m=Si(a,m))),p.getConstData)e.rehydrate||(m=V(i.expressions,p.getConstData,m,C,b,p,i.validates,e.rootData,f));else if(p.getDefaultData&&Kt(m,p,C)&&e.currentInput!==s){if(!e.rehydrate){const y=V(i.expressions,p.getDefaultData,m,C,b,p,i.validates,e.rootData,f);(m===void 0||!de(y))&&(m=y)}}else de(m)&&(p.nullable?(C.defaultOn!=="missing"||m!==void 0)&&(m=null):C.defaultOn!=="missing"&&(m=void 0));let Ke;p.getProps&&(Ke=V(i.expressions,p.getProps,m,C,b,p,i.validates,e.rootData,f));let U;if(St(p,i.components)){if(p.items)U=p.items;else if((ft=p.getItems)!=null&&ft.immutable&&(h!=null&&h.itemsCacheKey))U=h.itemsCacheKey;else if(p.getItems&&Ft(p.getItems))if(p.getItems.immutable&&(h!=null&&h.itemsCacheKey))U=h.itemsCacheKey;else try{U=V(i.expressions,p.getItems,m,C,b,p,i.validates,e.rootData,f)}catch{U=null}else if(p.getItems&&Tt(p.getItems))try{U=V(i.expressions,p.getItems.url,null,C,b,p,i.validates,e.rootData,f)}catch{U=null}}const Lt=Yt(p,i.components)&&!C.readOnly&&!C.summary&&e.autofocusTarget===s,Ve=xi(h??{},r,s,u,n,c,o,p,b.width,O,m,M==null?void 0:M.message,A,C,Lt,Ke,j,U,w&&De(h==null?void 0:h.children,w));return v&&(v[0]=Ve,e.cacheKeys[s]=v),Ve}const Hi=k((e,t,i)=>{if(t.dataPath===t.parentDataPath){if(Object.assign(e,i),t.data&&typeof i=="object"&&i!==null)for(const r of Object.keys(t.data))r in i||delete e[r]}else e[t.key]=i}),It=Q("jl:validation"),Li=k((e,t,i)=>{e.root=t,e.valid=i});function*Rt(e){if(yield e,e.children)for(const t of e.children)yield*Rt(t)}function Wi(e,t,i,r,s,u,n,c){var a,f,g;const o=i.validates[r.refPointer],d=o(u);if(o.errors){It(`${r.root} validation errors`,o.errors);for(const h of o.errors)h.keyword!=="errorMessage"&&i.localizeErrors([h]);if(e.errors=e.allErrors=o.errors,e.errors.length)for(const h of e.errors){const v=((f=(a=h.params)==null?void 0:a.errors)==null?void 0:f[0])??h;v!=null&&v.parentSchema.__pointer&&(v.schemaPath=v==null?void 0:v.parentSchema.__pointer,v.keyword==="oneOf"&&(v.schemaPath+="/oneOf"))}[!0,"error"].includes(t.removeAdditional)&&(e.additionalPropertiesErrors=o.errors.filter(h=>h.keyword==="additionalProperties"||h.keyword==="unevaluatedProperties"))}e.rehydrate&&((g=e.rehydrateErrors)!=null&&g.length)&&It(`${r.root} some validation errors were not captured by a leaf property, try to capture on a parent`,e.rehydrateErrors);const l=se(e,t,i,"","",null,"",null,i.skeletonNodes[r.root],null,s,u,null,n,c==null?void 0:c.root);e.nodes=[],e.files=[];for(const h of Rt(l))e.nodes.push(h),h.data instanceof File&&e.files.push({dataPath:h.dataPath,file:h.data});return Li(c??{},l,d)}function Ui(e,t){const i={...t.messages};return e.messages&&Object.assign(i,e.messages),{context:{},width:1e3,readOnly:!1,summary:!1,density:"default",indent:!1,titleDepth:2,validateOn:"input",initialValidation:"withData",updateOn:"input",debounceInputMs:300,defaultOn:"empty",removeAdditional:"error",autofocus:!1,readOnlyPropertiesMode:"show",fetchOptions:{},onAutofocus:()=>{},onUpdate:()=>{},onData:()=>{},...e,messages:i}}const fr=e=>!!e&&e.layout.comp==="section",Bi=(e,t)=>!!e&&St(e.layout,t),W=Q("jl:data-binding"),X=Q("jl:select-items"),Y=Q("jl:activated-items"),qi=e=>new URL(e.startsWith("/")?window.location.origin+e:e);class Gi{constructor(t,i,r,s){S(this,"_compiledLayout");S(this,"_stateTree");S(this,"skeletonTree");S(this,"_display");S(this,"_validationState");S(this,"_options");S(this,"_data");S(this,"_previousData");S(this,"_dataWaitingForBlur",!1);S(this,"_currentInput",null);S(this,"_lastCreateStateTreeContext");S(this,"_autofocusTarget");S(this,"_previousAutofocusTarget");S(this,"files",[]);S(this,"debouncedInput",null);S(this,"_itemsCache",{});S(this,"activatedItems");W("create stateful layout",t,i,r,s),this._compiledLayout=t,this.skeletonTree=i,this.prepareOptions(r),this._autofocusTarget=this.options.autofocus?"":null,this._previousAutofocusTarget=null,this._data=s,this._previousData=s,this.initValidationState(),this.activatedItems={},this.updateState(),this.handleAutofocus()}get compiledLayout(){return this._compiledLayout}get stateTree(){return this._stateTree}get display(){return this._display}get validationState(){return this._validationState}set validationState(t){this._validationState={initialized:t.initialized??this._validationState.initialized??!1,validatedForm:t.validatedForm??this._validationState.validatedForm??!1,validatedChildren:t.validatedChildren??this._validationState.validatedChildren??[]},this.updateState()}get options(){return this._options}set options(t){W("apply main options setter",t),this.prepareOptions(t),this.updateState()}get data(){return this._data}set data(t){W("apply main data setter",t),this._data=t,this.updateState()}prepareOptions(t){this._options=Ui(t,this.compiledLayout),this._display=this._display&&this._display.width===this._options.width?this._display:new je(this._options.width)}initValidationState(){const t=this.options.initialValidation==="always";this._validationState={initialized:t,validatedForm:t,validatedChildren:[]}}updateState(){var i;this.createStateTree();let t=0;for(;this._data!==(this._stateTree.root.data??null)||this._autofocusTarget!==this._lastCreateStateTreeContext.autofocusTarget||t===0&&((i=this._lastCreateStateTreeContext.errors)!=null&&i.length);){if(t+=1,t>100)throw console.error("too many iterations in updateState, the data is probably not stable",this._data,this._stateTree.root.data),new Error("too many iterations in updateState, the data is probably not stable");W("hydrating state tree changed the data, do it again",this._data,this._stateTree.root.data),this._data=this._stateTree.root.data??null,this._autofocusTarget=this._lastCreateStateTreeContext.autofocusTarget,this.createStateTree(!0)}!this._stateTree.valid&&!this._stateTree.root.error&&!this._stateTree.root.childError&&console.error("JSON layout failed to assign validation error to a node",this._lastCreateStateTreeContext.allErrors),W("emit update event",this._data,this._stateTree),this.options.onUpdate(this),this.emitData()}emitData(){!this._dataWaitingForBlur&&this._data!==this._previousData&&(W("emit data event",this._data),this.options.onData(this._data),this._previousData=this._data)}createStateTree(t=!1){var r,s,u;const i={activatedItems:this.activatedItems,autoActivatedItems:{},autofocusTarget:this._autofocusTarget,currentInput:this._currentInput,initial:!this._lastCreateStateTreeContext,rehydrate:t,cacheKeys:((r=this._lastCreateStateTreeContext)==null?void 0:r.cacheKeys)??{},rootData:this._data,files:[],nodes:[],rehydrateErrors:t?(s=this._lastCreateStateTreeContext)==null?void 0:s.errors:void 0};this._options._debugCache&&(i._debugCache=((u=this._lastCreateStateTreeContext)==null?void 0:u._debugCache)??{}),this._stateTree=Wi(i,this._options,this._compiledLayout,this.skeletonTree,this._display,this._data,this._validationState,this._stateTree),this._lastCreateStateTreeContext=i,this.validationState.initialized||(this._validationState={initialized:!0,validatedForm:this._validationState.validatedForm,validatedChildren:i.nodes.filter(n=>n.validated).map(n=>n.fullKey)}),this.files=De(this.files,i.files);for(const n in i.autoActivatedItems)Y("auto-activated item",n,i.autoActivatedItems[n]),this.activatedItems=k(this.activatedItems,c=>{c[n]=i.autoActivatedItems[n]})}validate(){this.validationState={validatedForm:!0}}resetValidation(){this.initValidationState(),this.updateState()}get valid(){return this.stateTree.valid}get errors(){return this._lastCreateStateTreeContext.nodes.filter(t=>!!t.error).map(t=>t.error)}get hasHiddenError(){return this._lastCreateStateTreeContext.nodes.findIndex(t=>t.error&&!t.validated)!==-1}getParentContextExpression(t){const i=this._lastCreateStateTreeContext.nodes.find(r=>r.fullKey===t.parentFullKey);return i?{parent:this.getParentContextExpression(i),data:i.data}:null}evalNodeExpression(t,i,r){return V(this.compiledLayout.expressions,i,r,t.options,new je(t.width),t.layout,this.compiledLayout.validates,this._data,this.getParentContextExpression(t))}applyInput(t,i,r,s){var o;W("received input event from node",t,i);const u=t.layout.transformData&&this.evalNodeExpression(t,t.layout.transformData,i);if((o=this.compiledLayout.components[t.layout.comp])!=null&&o.isFileInput){if(u)i.toJSON=()=>u;else if(i instanceof File){const d={name:i.name,size:i.size,type:i.type};i.toJSON=()=>d}else if(Array.isArray(i))for(const d of i){const l={name:d.name,size:d.size,type:d.type};d.toJSON=()=>l}}else u&&(i=u);if(r&&!this.validationState.validatedChildren.includes(t.fullKey)&&(this.validationState={validatedChildren:this.validationState.validatedChildren.concat([t.fullKey])}),s!==void 0&&(Y("activated item on input",t.fullKey,s),this.activatedItems=k(this.activatedItems,d=>{d[t.fullKey]=s}),this._autofocusTarget=t.fullKey+"/"+s),t.parentFullKey===null){this._data=i,this.updateState();return}const n=this._lastCreateStateTreeContext.nodes.find(d=>d.fullKey===t.parentFullKey);if(!n)throw new Error(`parent with key "${t.parentFullKey}" not found`);const c=Hi(n.data??(typeof t.key=="number"?[]:{}),t,i??(t.skeleton.nullable?null:void 0));this.applyInput(n,c,r),s!==void 0&&this.handleAutofocus()}applyDebouncedInput(){this.debouncedInput&&(clearTimeout(this.debouncedInput[4]),this.applyInput(this.debouncedInput[0],this.debouncedInput[1],this.debouncedInput[2],this.debouncedInput[3]),this.debouncedInput=null)}input(t,i,r){var c,o;this.debouncedInput&&(this.debouncedInput[0]===t?clearTimeout(this.debouncedInput[4]):this.applyDebouncedInput());const s=(c=this.compiledLayout.components[t.layout.comp])==null?void 0:c.emitsBlur;s&&(this._currentInput=t.fullKey),t.options.updateOn==="blur"&&s&&(this._dataWaitingForBlur=!0);const u=t.options.validateOn==="input"||t.options.validateOn==="blur"&&!s;((o=this.compiledLayout.components[t.layout.comp])==null?void 0:o.shouldDebounce)&&t.options.debounceInputMs?this.debouncedInput=[t,i,u,r,setTimeout(()=>this.applyDebouncedInput(),t.options.debounceInputMs)]:this.applyInput(t,i,u,r)}blur(t){this._currentInput===t.fullKey&&(this._currentInput=null),this.debouncedInput?this.applyDebouncedInput():t.layout.getDefaultData&&Kt(t.data,t.layout,t.options)&&this.applyInput(t,t.data,!0),W("received blur event from node",t),(t.options.validateOn==="input"||t.options.validateOn==="blur")&&!this.validationState.validatedChildren.includes(t.fullKey)&&(this.validationState={validatedChildren:this.validationState.validatedChildren.concat([t.fullKey])}),this._dataWaitingForBlur&&(this._dataWaitingForBlur=!1,this.emitData())}validateNodeRecurse(t){if(this.validationState={validatedChildren:this.validationState.validatedChildren.concat([t.fullKey])},t.children)for(const i of t.children)this.validateNodeRecurse(i)}async getItemsWithoutCache(t,i=""){var n;if(!Bi(t,this._compiledLayout.components))throw new Error("node is not a component with an items list");if(t.itemsCacheKey===null)return{appliedQ:!1,items:[]};let r=!1,s;if((t.layout.items||t.layout.getItems&&Ft(t.layout.getItems))&&(s=t.itemsCacheKey,X(`${t.fullKey} - raw items from context or schema or getItems expression`,s)),t.layout.getItems&&Tt(t.layout.getItems)){X(`${t.fullKey} - will fetch raw items from URL`,t.itemsCacheKey);const c=qi(t.itemsCacheKey);let o=t.layout.getItems.qSearchParam;if(!o)for(const l of c.searchParams.entries())l[1]==="{q}"&&(o=l[0]);o&&(X(`${t.fullKey} - apply search params`,o),r=!0,i?c.searchParams.set(o,i):c.searchParams.delete(o));const d=typeof t.options.fetchOptions=="function"?t.options.fetchOptions(c):t.options.fetchOptions;s=await(await fetch(c,d)).json(),X(`${t.fullKey} - raw items URL`,s)}if(!s)throw new Error(`node ${t.fullKey} is missing items or getItems parameters`);if((n=t.layout.getItems)!=null&&n.itemsResults&&(s=this.evalNodeExpression(t,t.layout.getItems.itemsResults,s),X(`${t.fullKey} - items passed through the getItems.itemsResults expression`,s)),!Array.isArray(s))throw new Error(`getItems didn't return an array for node ${t.fullKey}, you can define itemsResults to extract the array`);const u=s.map(c=>this.prepareSelectItem(t,c));return{appliedQ:r,items:u}}async getItems(t,i=""){let r;return this._itemsCache[t.fullKey]&&this._itemsCache[t.fullKey].key===t.itemsCacheKey&&(!i||!this._itemsCache[t.fullKey].appliedQ)?r=this._itemsCache[t.fullKey]:(r=await this.getItemsWithoutCache(t,i),(!i||!r.appliedQ)&&(this._itemsCache[t.fullKey]={key:t.itemsCacheKey,...r})),i&&!r.appliedQ?r.items.filter(s=>s.title.toLowerCase().includes(i.toLowerCase())):r.items}prepareSelectItem(t,i){var u,n,c,o,d,l,a,f,g;const r={},s=t.layout;return typeof i=="object"?(r.value=(u=s.getItems)!=null&&u.itemValue?this.evalNodeExpression(t,s.getItems.itemValue,i):(n=s.getItems)!=null&&n.returnObjects?i:i.value,r.key=(c=s.getItems)!=null&&c.itemKey?this.evalNodeExpression(t,s.getItems.itemKey,i):i.key,r.title=(o=s.getItems)!=null&&o.itemTitle?this.evalNodeExpression(t,s.getItems.itemTitle,i):i.title,r.value=r.value??r.key,r.key=r.key??r.value+"",r.title=r.title??r.key,!r.icon&&i.icon&&(r.icon=i.icon)):(r.value=(d=s.getItems)!=null&&d.itemValue?this.evalNodeExpression(t,s.getItems.itemValue,i):i,r.key=(l=s.getItems)!=null&&l.itemKey?this.evalNodeExpression(t,s.getItems.itemKey,i):r.value,r.title=(a=s.getItems)!=null&&a.itemTitle?this.evalNodeExpression(t,s.getItems.itemTitle,i):r.value),(f=s.getItems)!=null&&f.itemIcon&&(r.icon=this.evalNodeExpression(t,(g=s.getItems)==null?void 0:g.itemIcon,i)),X(`${t.fullKey} - select item after applying itemValue/itemKey/itemTitle/itemIcon expressions`,r),r}activateItem(t,i){var r,s,u;if(Y("activate item explicitly",t.fullKey,i),this.activatedItems=k(this.activatedItems,n=>{n[t.fullKey]=i}),this._autofocusTarget=t.fullKey+"/"+i,t.key==="$oneOf")if(t.layout.emptyData&&t.data&&typeof t.data=="object"&&((r=t.children)!=null&&r[0])){const n=this._lastCreateStateTreeContext.nodes.find(o=>o.fullKey===t.parentFullKey);if(!n)throw new Error(`parent with key "${t.parentFullKey}" not found`);if(!n.data||typeof n.data!="object")throw new Error(`parent with key "${t.parentFullKey}" is missing data object`);const c={...n.data};Y("remove properties of previous oneOf activated item",t.fullKey,(s=t.children)==null?void 0:s[0].fullKey);for(const o of(u=t.children)==null?void 0:u[0].skeleton.propertyKeys)delete c[o];this.input(n,c)}else this.input(t,void 0);else this.updateState();this.handleAutofocus()}deactivateItem(t){Y("deactivate item explicitly",t.fullKey),this.activatedItems=k(this.activatedItems,i=>{for(const r in i)r.startsWith(t.fullKey)&&(Y("item deactivation deletes a key",r),delete i[r])}),this.updateState()}handleAutofocus(){const t=this._autofocusTarget;t!==null&&this._autofocusTarget!==this._previousAutofocusTarget&&(this._previousAutofocusTarget=t,setTimeout(()=>{W("emit autofocus event",t),this.options.onAutofocus(t)}))}}function Ji(e){return ni()?(ai(e),!0):!1}const Zi=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function Qi(e){return Me()}function Xi(e){return Array.isArray(e)?e:[e]}function Yi(e,t=!0,i){Qi()?At(e,i):t?e():Pt(e)}const Ht=Zi?window:void 0;function ee(e){var t;const i=kt(e);return(t=i==null?void 0:i.$el)!=null?t:i}function Ni(){const e=ae(!1),t=Me();return t&&At(()=>{e.value=!0},t),e}function er(e){const t=Ni();return ne(()=>(t.value,!!e()))}function tr(e,t,i={}){const{window:r=Ht,...s}=i;let u;const n=er(()=>r&&"ResizeObserver"in r),c=()=>{u&&(u.disconnect(),u=void 0)},o=ne(()=>{const a=kt(e);return Array.isArray(a)?a.map(f=>ee(f)):[ee(a)]}),d=N(o,a=>{if(c(),n.value&&r){u=new ResizeObserver(t);for(const f of a)f&&u.observe(f,s)}},{immediate:!0,flush:"post"}),l=()=>{c(),d()};return Ji(l),{isSupported:n,stop:l}}function ir(e,t={width:0,height:0},i={}){const{window:r=Ht,box:s="content-box"}=i,u=ne(()=>{var a,f;return(f=(a=ee(e))==null?void 0:a.namespaceURI)==null?void 0:f.includes("svg")}),n=ae(t.width),c=ae(t.height),{stop:o}=tr(e,([a])=>{const f=s==="border-box"?a.borderBoxSize:s==="content-box"?a.contentBoxSize:a.devicePixelContentBoxSize;if(r&&u.value){const g=ee(e);if(g){const h=g.getBoundingClientRect();n.value=h.width,c.value=h.height}}else if(f){const g=Xi(f);n.value=g.reduce((h,{inlineSize:v})=>h+v,0),c.value=g.reduce((h,{blockSize:v})=>h+v,0)}else n.value=a.contentRect.width,c.value=a.contentRect.height},i);Yi(()=>{const a=ee(e);a&&(n.value="offsetWidth"in a?a.offsetWidth:t.width,c.value="offsetHeight"in a?a.offsetHeight:t.height)});const d=N(()=>ee(e),a=>{n.value=a?t.width:0,c.value=a?t.height:0});function l(){o(),d()}return{width:n,height:c,stop:l}}const rr={add:"$plus",calendar:"$calendar",close:"$close",edit:"$edit",sortDown:"$sortDesc",sortUp:"$sortAsc",alert:"svg:M13 14H11V9H13M13 18H11V16H13M1 21H23L12 2L1 21Z",clock:"svg:M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z",delete:"svg:M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",duplicate:"svg:M11,17H4A2,2 0 0,1 2,15V3A2,2 0 0,1 4,1H16V3H4V15H11V13L15,16L11,19V17M19,21V7H8V13H6V7A2,2 0 0,1 8,5H19A2,2 0 0,1 21,7V21A2,2 0 0,1 19,23H8A2,2 0 0,1 6,21V19H8V21H19Z",infoSymbol:"svg:M11 9H13V7H11V9M11 17H13V11H11V17Z",menu:"svg:M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",sort:"svg:M17.45,17.55L12,23L6.55,17.55L7.96,16.14L11,19.17V4.83L7.96,7.86L6.55,6.45L12,1L17.45,6.45L16.04,7.86L13,4.83V19.17L16.04,16.14L17.45,17.55Z"},sr={nodeComponents:{},plugins:[],pluginsOptions:{}},nr=(e,t,i,r,s,u,n,c,o,d)=>{const l={...e==null?void 0:e.components},a={...n,...e==null?void 0:e.nodeComponents};if(e!=null&&e.plugins)for(const h of e.plugins)l[h.info.name]=h.info,a[h.info.name]=h.nodeComponent;const f={...e==null?void 0:e.icons,...rr};return{...sr,readOnly:!!(t&&(t.isDisabled.value||t.isReadonly.value)),density:s==null?void 0:s.density,locale:r,...e,onData:c,onUpdate:o,onAutofocus:d,context:e!=null&&e.context?JSON.parse(JSON.stringify(e.context)):{},width:Math.round(i??0),vjsfSlots:{...u},components:l,nodeComponents:a,icons:f}},x=Q("vjsf:use-vjsf");Ci(!1);const dr={"update:modelValue":e=>!0,"update:state":e=>!0},hr=(e,t,i,r,s,u,n)=>{var M;const c=ae(null);ii({},"Vjsf");const o=(M=dt(Symbol.for("vuetify:defaults")))==null?void 0:M.value;x("provided defaults",o);const{width:d}=ir(c),l=ht(null),a=ht(null),f=dt(Symbol.for("vuetify:form"),null),g=`vjsf-${Math.random().toString(36).substring(2,9)}`;f?f.register({id:g,validate:()=>{var m,A;return(m=l.value)==null||m.validate(),((A=l.value)==null?void 0:A.errors)||[]},reset:()=>{var m;return(m=l.value)==null?void 0:m.resetValidation()},resetValidation:()=>{var m;return(m=l.value)==null?void 0:m.resetValidation()},vm:Me()}):console.warn("Vjsf should be wrapped in VForm");const h=oi(),v=m=>{x("onStatefulLayoutUpdate",m),m&&(a.value=m.stateTree,x("  -> emit update:state"),s("update:state",m),f&&(m.valid?f.update(g,!0,[]):m.hasHiddenError?f.update(g,null,[]):f.update(g,!1,[])))},T=async m=>{x("onDataUpdate",m),x("  -> emit update:modelValue"),await Pt(),s("update:modelValue",m)},p=()=>{if(!c.value)return;const m=c.value.querySelector(".vjsf-input--autofocus");if(x("onAutofocus",m),m){const A=m.querySelector("input")??m.querySelector('textarea:not([style*="display: none"]');A&&A.focus()}},b=ri(),O=ne(()=>nr(i.value,f,d.value,b.current.value,o==null?void 0:o.global,h,{...r},T,v,p)),j=ae({});N(O,m=>{if(n!=null&&n.value)return;const A=Ti(j.value,m);A!==j.value&&(x("new compileOptions",A),j.value=A)},{immediate:!0});const C=ne(()=>{if(n!=null&&n.value)return n==null?void 0:n.value;if(!u)throw new Error("compile function is not available");return u(e.value,j.value)}),w=()=>{d.value&&(l.value=new Gi(q(C.value),q(C.value.skeletonTrees[C.value.mainTree]),q(O.value),q(t.value)))};return N(O,m=>{x("watch fullOptions",O),l.value?(x("  -> update statefulLayout options"),l.value.options=q(m)):(x("  -> init statefulLayout"),w())}),N(t,m=>{const A=q(m);l.value&&l.value.data!==A&&(x("modelValue changed from outside",A),x("  -> update statefulLayout data"),l.value.data=q(A))}),N(C,m=>{x("watch compiledLayout",m),x("  -> init statefulLayout"),w()}),{el:c,statefulLayout:l,stateTree:a}};export{sr as a,Q as b,rr as d,dr as e,cr as f,$t as g,fr as i,k as p,hr as u};
