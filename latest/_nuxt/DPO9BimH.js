var Kt=Object.defineProperty;var Wt=(e,t,i)=>t in e?Kt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var F=(e,t,i)=>Wt(e,typeof t!="symbol"?t+"":t,i);import{a as Ht,z as Lt,s as Ut,A as Bt,p as qt,B as Gt,q as wt,r as bt,t as St,C as Jt,o as Zt,D as Qt}from"./DR9fA82p.js";import{$ as Nt,R as L,o as Ft,S as Yt,bo as Xt,ap as ei,E as ti,bp as je,r as B,ak as ii,i as ie,a8 as ni,ar as ft,aj as dt,bq as ri,aE as G}from"./CtA0HkqK.js";import{g as si}from"./BosuxZz1.js";var It=Symbol.for("immer-nothing"),ht=Symbol.for("immer-draftable"),j=Symbol.for("immer-state");function V(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Y=Object.getPrototypeOf;function X(e){return!!e&&!!e[j]}function Q(e){var t;return e?Tt(e)||Array.isArray(e)||!!e[ht]||!!((t=e.constructor)!=null&&t[ht])||pe(e)||ge(e):!1}var ai=Object.prototype.constructor.toString();function Tt(e){if(!e||typeof e!="object")return!1;const t=Y(e);if(t===null)return!0;const i=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return i===Object?!0:typeof i=="function"&&Function.toString.call(i)===ai}function ne(e,t){me(e)===0?Object.entries(e).forEach(([i,n])=>{t(i,n,e)}):e.forEach((i,n)=>t(n,i,e))}function me(e){const t=e[j];return t?t.type_:Array.isArray(e)?1:pe(e)?2:ge(e)?3:0}function Ie(e,t){return me(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function At(e,t,i){const n=me(e);n===2?e.set(t,i):n===3?e.add(i):e[t]=i}function oi(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function pe(e){return e instanceof Map}function ge(e){return e instanceof Set}function J(e){return e.copy_||e.base_}function Te(e,t){if(pe(e))return new Map(e);if(ge(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&Tt(e))return Y(e)?{...e}:Object.assign(Object.create(null),e);const i=Object.getOwnPropertyDescriptors(e);delete i[j];let n=Reflect.ownKeys(i);for(let r=0;r<n.length;r++){const a=n[r],s=i[a];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(i[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create(Y(e),i)}function ze(e,t=!1){return ye(e)||X(e)||!Q(e)||(me(e)>1&&(e.set=e.add=e.clear=e.delete=li),Object.freeze(e),t&&ne(e,(i,n)=>ze(n,!0))),e}function li(){V(2)}function ye(e){return Object.isFrozen(e)}var ui={};function N(e){const t=ui[e];return t||V(0,e),t}var re;function Ot(){return re}function ci(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function mt(e,t){t&&(N("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ae(e){Oe(e),e.drafts_.forEach(fi),e.drafts_=null}function Oe(e){e===re&&(re=e.parent_)}function pt(e){return re=ci(re,e)}function fi(e){const t=e[j];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function gt(e,t){t.unfinalizedDrafts_=t.drafts_.length;const i=t.drafts_[0];return e!==void 0&&e!==i?(i[j].modified_&&(Ae(t),V(4)),Q(e)&&(e=de(t,e),t.parent_||he(t,e)),t.patches_&&N("Patches").generateReplacementPatches_(i[j].base_,e,t.patches_,t.inversePatches_)):e=de(t,i,[]),Ae(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==It?e:void 0}function de(e,t,i){if(ye(t))return t;const n=t[j];if(!n)return ne(t,(r,a)=>yt(e,n,t,r,a,i)),t;if(n.scope_!==e)return t;if(!n.modified_)return he(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const r=n.copy_;let a=r,s=!1;n.type_===3&&(a=new Set(r),r.clear(),s=!0),ne(a,(c,l)=>yt(e,n,r,c,l,i,s)),he(e,r,!1),i&&e.patches_&&N("Patches").generatePatches_(n,i,e.patches_,e.inversePatches_)}return n.copy_}function yt(e,t,i,n,r,a,s){if(X(r)){const c=a&&t&&t.type_!==3&&!Ie(t.assigned_,n)?a.concat(n):void 0,l=de(e,r,c);if(At(i,n,l),X(l))e.canAutoFreeze_=!1;else return}else s&&i.add(r);if(Q(r)&&!ye(r)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;de(e,r),(!t||!t.scope_.parent_)&&he(e,r)}}function he(e,t,i=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ze(t,i)}function di(e,t){const i=Array.isArray(e),n={type_:i?1:0,scope_:t?t.scope_:Ot(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=n,a=Ve;i&&(r=[n],a=se);const{revoke:s,proxy:c}=Proxy.revocable(r,a);return n.draft_=c,n.revoke_=s,c}var Ve={get(e,t){if(t===j)return e;const i=J(e);if(!Ie(i,t))return hi(e,i,t);const n=i[t];return e.finalized_||!Q(n)?n:n===Ce(e.base_,t)?(_e(e),e.copy_[t]=ke(n,e)):n},has(e,t){return t in J(e)},ownKeys(e){return Reflect.ownKeys(J(e))},set(e,t,i){const n=Pt(J(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,i),!0;if(!e.modified_){const r=Ce(J(e),t),a=r==null?void 0:r[j];if(a&&a.base_===i)return e.copy_[t]=i,e.assigned_[t]=!1,!0;if(oi(i,r)&&(i!==void 0||Ie(e.base_,t)))return!0;_e(e),Pe(e)}return e.copy_[t]===i&&(i!==void 0||t in e.copy_)||Number.isNaN(i)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=i,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Ce(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,_e(e),Pe(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const i=J(e),n=Reflect.getOwnPropertyDescriptor(i,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:i[t]}},defineProperty(){V(11)},getPrototypeOf(e){return Y(e.base_)},setPrototypeOf(){V(12)}},se={};ne(Ve,(e,t)=>{se[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});se.deleteProperty=function(e,t){return se.set.call(this,e,t,void 0)};se.set=function(e,t,i){return Ve.set.call(this,e[0],t,i,e[0])};function Ce(e,t){const i=e[j];return(i?J(i):e)[t]}function hi(e,t,i){var r;const n=Pt(t,i);return n?"value"in n?n.value:(r=n.get)==null?void 0:r.call(e.draft_):void 0}function Pt(e,t){if(!(t in e))return;let i=Y(e);for(;i;){const n=Object.getOwnPropertyDescriptor(i,t);if(n)return n;i=Y(i)}}function Pe(e){e.modified_||(e.modified_=!0,e.parent_&&Pe(e.parent_))}function _e(e){e.copy_||(e.copy_=Te(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var mi=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,i,n)=>{if(typeof t=="function"&&typeof i!="function"){const a=i;i=t;const s=this;return function(l=a,...d){return s.produce(l,o=>i.call(this,o,...d))}}typeof i!="function"&&V(6),n!==void 0&&typeof n!="function"&&V(7);let r;if(Q(t)){const a=pt(this),s=ke(t,void 0);let c=!0;try{r=i(s),c=!1}finally{c?Ae(a):Oe(a)}return mt(a,n),gt(r,a)}else if(!t||typeof t!="object"){if(r=i(t),r===void 0&&(r=t),r===It&&(r=void 0),this.autoFreeze_&&ze(r,!0),n){const a=[],s=[];N("Patches").generateReplacementPatches_(t,r,a,s),n(a,s)}return r}else V(1,t)},this.produceWithPatches=(t,i)=>{if(typeof t=="function")return(s,...c)=>this.produceWithPatches(s,l=>t(l,...c));let n,r;return[this.produce(t,i,(s,c)=>{n=s,r=c}),n,r]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Q(e)||V(8),X(e)&&(e=pi(e));const t=pt(this),i=ke(e,void 0);return i[j].isManual_=!0,Oe(t),i}finishDraft(e,t){const i=e&&e[j];(!i||!i.isManual_)&&V(9);const{scope_:n}=i;return mt(n,t),gt(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let i;for(i=t.length-1;i>=0;i--){const r=t[i];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}i>-1&&(t=t.slice(i+1));const n=N("Patches").applyPatches_;return X(e)?n(e,t):this.produce(e,r=>n(r,t))}};function ke(e,t){const i=pe(e)?N("MapSet").proxyMap_(e,t):ge(e)?N("MapSet").proxySet_(e,t):di(e,t);return(t?t.scope_:Ot()).drafts_.push(i),i}function pi(e){return X(e)||V(10,e),kt(e)}function kt(e){if(!Q(e)||ye(e))return e;const t=e[j];let i;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,i=Te(e,t.scope_.immer_.useStrictShallowCopy_)}else i=Te(e,!0);return ne(i,(n,r)=>{At(i,n,kt(r))}),t&&(t.finalized_=!1),i}var z=new mi,P=z.produce;z.produceWithPatches.bind(z);var gi=z.setAutoFreeze.bind(z);z.setUseStrictShallowCopy.bind(z);z.applyPatches.bind(z);z.createDraft.bind(z);z.finishDraft.bind(z);const yi={errorOneOf:"chose one",errorRequired:"required information",addItem:"Add item",delete:"Delete",edit:"Edit",close:"Close",duplicate:"Duplicate",sort:"Sort",up:"Move up",down:"Move down",showHelp:"Show a help message",mdeLink1:"[Link title",mdeLink2:"](link url)",mdeImg1:"![](",mdeImg2:"image url)",mdeTable1:"",mdeTable2:`

| Column 1 | Column 2 | Column 3 |
| -------- | -------- | -------- |
| Text     | Text     | Text     |

`,bold:"Bold",italic:"Italic",heading:"Title",quote:"Quote",unorderedList:"Unordered list",orderedList:"Ordered list",createLink:"Create a link",insertImage:"Insert an image",createTable:"Create a table",preview:"Aperçu du rendu",mdeGuide:"Documentation de la syntaxe",undo:"Undo",redo:"Redo"},vi={errorOneOf:"choisissez une valeur",errorRequired:"information obligatoire",addItem:"Ajouter un élément",delete:"Supprimer",edit:"Éditer",close:"Fermer",duplicate:"Dupliquer",sort:"Trier",up:"Décaler vers le haut",down:"Décaler vers le bas",showHelp:"Afficher un message d'aide",mdeLink1:"[titre du lien",mdeLink2:"](adresse du lien)",mdeImg1:"![](",mdeImg2:"adresse de l'image)",mdeTable1:"",mdeTable2:`

| Colonne 1 | Colonne 2 | Colonne 3 |
| -------- | -------- | -------- |
| Texte     | Texte     | Texte     |

`,bold:"Gras",italic:"Italique",heading:"Titre",quote:"Citation",unorderedList:"Liste à puce",orderedList:"Liste numérotée",createLink:"Créer un lien",insertImage:"Insérer une image",createTable:"Créer un tableau",preview:"Preview",mdeGuide:"Syntax documentation",undo:"Défaire",redo:"Refaire"},Ci={errorOneOf:"Kies er een",errorRequired:"benodigde informatie",addItem:"Item toevoegen",delete:"Verwijderen",edit:"Bewerken",close:"Sluiten",duplicate:"Verveelvoudigen",sort:"Sorteren",up:"Omhoog verplaatsen",down:"Omlaag verplaatsen",showHelp:"Toon helpbericht",mdeLink1:"[Link titel",mdeLink2:"](link url)",mdeImg1:"![](",mdeImg2:"afbeelding url)",mdeTable1:"",mdeTable2:`

| Kolom 1  | Kolom 2  | Kolom 3  |
| -------- | -------- | -------- |
| Tekst    | Tekst    | Tekst    |

`,bold:"Vet",italic:"Cursief",heading:"Titel",quote:"Citaat",unorderedList:"Ongeordende lijst",orderedList:"Geordende lijst",createLink:"Maak een koppeling",insertImage:"Afbeelding invoegen",createTable:"Tabel aanmaken",preview:"Voorbeeld",mdeGuide:"Documentatie over syntaxis",undo:"Ongedaan maken",redo:"Opnieuw"},_i={errorOneOf:"Wählen Sie eine Option",errorRequired:"Erforderliche Information",addItem:"Element hinzufügen",delete:"Löschen",edit:"Bearbeiten",close:"Schließen",duplicate:"Duplizieren",sort:"Sortieren",up:"Nach oben verschieben",down:"Nach unten verschieben",showHelp:"Hilfemeldung anzeigen",mdeLink1:"[Link-Titel",mdeLink2:"](Link-URL)",mdeImg1:"![](",mdeImg2:"Bild-URL)",mdeTable1:"",mdeTable2:`

| Spalte 1 | Spalte 2 | Spalte 3 |
| -------- | -------- | -------- |
| Text     | Text     | Text     |

`,bold:"Fett",italic:"Kursiv",heading:"Titel",quote:"Zitat",unorderedList:"Ungeordnete Liste",orderedList:"Geordnete Liste",createLink:"Link erstellen",insertImage:"Bild einfügen",createTable:"Tabelle erstellen",preview:"Vorschau",mdeGuide:"Syntax-Dokumentation",undo:"Rückgängig",redo:"Wiederholen"},vt={en:yi,fr:vi,nl:Ci,de:_i};function Ee(e=[],t=[]){if(!e||!t||e.length!==t.length)return t;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return t;return e}function wi(e={},t={}){if(!e||!t)return t;const i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return t;for(const r of i)if(e[r]!==t[r])return t;return e}function Et(e=[],t=[]){if(!e||!t)return e===t;if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const bi=Bt,cn=e=>{let t=e.ajv;if(!t){const c={allErrors:!0,strict:!1,verbose:!0};e.ajvOptions&&Object.assign(c,e.ajvOptions),e.code&&(c.code={source:!0,esm:!0,lines:!0});const l=new bi(c);Ht.default(l),Lt.default(l),t=l}t.addKeyword("layout");let i=e.markdown;i||(i=l=>Nt.parse(l,e.markedOptions));const n=e.defaultLocale||"en",r=e.locale||n,a={...vt[r]||vt[n]};e.messages&&Object.assign(a,e.messages);const s=Ut.reduce((c,l)=>(c[l.name]=l,c),{});if(e.components){for(const c of Object.keys(e.components))s[c]={...e.components[c],name:c};Object.assign(s,e.components)}return{ajv:t,code:!1,markdown:i,optionsKeys:[],...e,locale:r,defaultLocale:n,messages:a,components:s,xI18n:!!e.xI18n}},Si=P((e,t)=>{for(const i of["ajv","ajvOptions","code","markdown","markedOptions","xI18n","locale","defaultLocale","messages","optionsKeys","components"])if(i in t){if(i==="components"&&Et(Object.keys(e.components??[]),Object.keys(t.components??[])))continue;e[i]=t[i]}else delete e[i]});var De={exports:{}},we,Ct;function Fi(){if(Ct)return we;Ct=1;var e=1e3,t=e*60,i=t*60,n=i*24,r=n*7,a=n*365.25;we=function(o,u){u=u||{};var f=typeof o;if(f==="string"&&o.length>0)return s(o);if(f==="number"&&isFinite(o))return u.long?l(o):c(o);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))};function s(o){if(o=String(o),!(o.length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(o);if(u){var f=parseFloat(u[1]),g=(u[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return f*a;case"weeks":case"week":case"w":return f*r;case"days":case"day":case"d":return f*n;case"hours":case"hour":case"hrs":case"hr":case"h":return f*i;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function c(o){var u=Math.abs(o);return u>=n?Math.round(o/n)+"d":u>=i?Math.round(o/i)+"h":u>=t?Math.round(o/t)+"m":u>=e?Math.round(o/e)+"s":o+"ms"}function l(o){var u=Math.abs(o);return u>=n?d(o,u,n,"day"):u>=i?d(o,u,i,"hour"):u>=t?d(o,u,t,"minute"):u>=e?d(o,u,e,"second"):o+" ms"}function d(o,u,f,g){var m=u>=f*1.5;return Math.round(o/f)+" "+g+(m?"s":"")}return we}function Ii(e){i.debug=i,i.default=i,i.coerce=l,i.disable=a,i.enable=r,i.enabled=s,i.humanize=Fi(),i.destroy=d,Object.keys(e).forEach(o=>{i[o]=e[o]}),i.names=[],i.skips=[],i.formatters={};function t(o){let u=0;for(let f=0;f<o.length;f++)u=(u<<5)-u+o.charCodeAt(f),u|=0;return i.colors[Math.abs(u)%i.colors.length]}i.selectColor=t;function i(o){let u,f=null,g,m;function w(...T){if(!w.enabled)return;const p=w,_=Number(new Date),R=_-(u||_);p.diff=R,p.prev=u,p.curr=_,u=_,T[0]=i.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let v=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(x,h)=>{if(x==="%%")return"%";v++;const A=i.formatters[h];if(typeof A=="function"){const le=T[v];x=A.call(p,le),T.splice(v,1),v--}return x}),i.formatArgs.call(p,T),(p.log||i.log).apply(p,T)}return w.namespace=o,w.useColors=i.useColors(),w.color=i.selectColor(o),w.extend=n,w.destroy=i.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(g!==i.namespaces&&(g=i.namespaces,m=i.enabled(o)),m),set:T=>{f=T}}),typeof i.init=="function"&&i.init(w),w}function n(o,u){const f=i(this.namespace+(typeof u>"u"?":":u)+o);return f.log=this.log,f}function r(o){i.save(o),i.namespaces=o,i.names=[],i.skips=[];let u;const f=(typeof o=="string"?o:"").split(/[\s,]+/),g=f.length;for(u=0;u<g;u++)f[u]&&(o=f[u].replace(/\*/g,".*?"),o[0]==="-"?i.skips.push(new RegExp("^"+o.slice(1)+"$")):i.names.push(new RegExp("^"+o+"$")))}function a(){const o=[...i.names.map(c),...i.skips.map(c).map(u=>"-"+u)].join(",");return i.enable(""),o}function s(o){if(o[o.length-1]==="*")return!0;let u,f;for(u=0,f=i.skips.length;u<f;u++)if(i.skips[u].test(o))return!1;for(u=0,f=i.names.length;u<f;u++)if(i.names[u].test(o))return!0;return!1}function c(o){return o.toString().substring(2,o.toString().length-2).replace(/\.\*\?$/,"*")}function l(o){return o instanceof Error?o.stack||o.message:o}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return i.enable(i.load()),i}var Ti=Ii;(function(e,t){var i={};t.formatArgs=r,t.save=a,t.load=s,t.useColors=n,t.storage=c(),t.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let d;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(d=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(d[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const o="color: "+this.color;d.splice(1,0,o,"color: inherit");let u=0,f=0;d[0].replace(/%[a-zA-Z%]/g,g=>{g!=="%%"&&(u++,g==="%c"&&(f=u))}),d.splice(f,0,o)}t.log=console.debug||console.log||(()=>{});function a(d){try{d?t.storage.setItem("debug",d):t.storage.removeItem("debug")}catch{}}function s(){let d;try{d=t.storage.getItem("debug")}catch{}return!d&&typeof process<"u"&&"env"in process&&(d=i.DEBUG),d}function c(){try{return localStorage}catch{}}e.exports=Ti(t);const{formatters:l}=e.exports;l.j=function(d){try{return JSON.stringify(d)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}}})(De,De.exports);var Ai=De.exports;const Re=si(Ai),ue=["xs","sm","md","lg","xl","xxl"],I={xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560};class xe{constructor(t){F(this,"width");this.width=t}get name(){for(let t=0;t<ue.length;t++)if(ue[t+1]&&this.width<I[ue[t+1]])return ue[t];return"xxl"}get xs(){return this.width<I.sm}get sm(){return this.width>=I.sm&&this.width<I.md}get smAndDown(){return this.width<I.md}get smAndUp(){return this.width>=I.sm}get md(){return this.width>=I.md&&this.width<I.lg}get mdAndDown(){return this.width<I.lg}get mobile(){return this.mdAndDown}get mdAndUp(){return this.width>=I.md}get lg(){return this.width>=I.lg&&this.width<I.xl}get lgAndDown(){return this.width<I.xl}get lgAndUp(){return this.width>=I.lg}get xl(){return this.width>=I.xl&&this.width<I.xxl}get xlAndDown(){return this.width<I.xxl}get xlAndUp(){return this.width>=I.xl}get xxl(){return this.width>=I.xxl}}function Oi(e,t){if(!t)return[e,12];let i=t.xs;return e.smAndUp&&t.sm!==void 0&&(i=t.sm),e.mdAndUp&&t.md!==void 0&&(i=t.md),e.lgAndUp&&t.lg!==void 0&&(i=t.lg),e.xlAndUp&&t.xl!==void 0&&(i=t.xl),e.xxl&&t.xxl!==void 0&&(i=t.xxl),[i===12?e:new xe(Math.round(e.width*(i/12))),i]}const be={};function Dt(e){return be[e]=be[e]??new RegExp(e),be[e]}const ce=Re("jl:state-node"),fe=e=>!!(e===""||e===void 0||Array.isArray(e)&&!e.length||typeof e=="object"&&!Array.isArray(e)&&e&&Object.values(e).findIndex(t=>t!==void 0)===-1),xt=(e,t,i)=>!!(i.defaultOn==="missing"&&e===void 0||i.defaultOn==="empty"&&fe(e)),Pi=P((e,t,i,n,r,a,s,c,l,d,o,u,f,g,m,w,T,p)=>{if(e.messages=c.messages?ki(e.messages||{},c.messages,g):g.messages,e.key=t,e.fullKey=i,e.parentFullKey=n,e.dataPath=r,e.parentDataPath=a,e.skeleton=s,e.layout=c,e.width=l,e.options=g,e.cols=d,e.data=o,e.error=u,e.itemsCacheKey=T,e.childError=p&&p.findIndex(_=>_.error||_.childError)!==-1,e.validated=f,m)e.autofocus=!0,delete e.autofocusChild;else{delete e.autofocus;const _=p==null?void 0:p.find(R=>R.autofocus);_?e.autofocusChild=_.key:delete e.autofocusChild}e.props=w,e.children=p}),ki=P((e,t,i)=>{Object.assign(e,i.messages,t)}),Ei=P((e,t)=>{for(const i of t){const n=i.key;i.data===void 0?delete e[n]:e[n]=i.data}for(;e.length&&e[e.length-1]===void 0;)e.pop()}),Di=P((e,t,i,n,r)=>{for(let a=0;a<e.length;a++)e[a]instanceof File||(e[a]=Mt(e[a],t+"/"+a,void 0,i,n,r))}),Mt=P((e,t,i,n,r,a)=>{if(r&&(r.length||i!=null&&i.length))for(const s of Object.keys(e))r.includes(s)||delete e[s];if(a)for(const s of a)delete e[s];if(i)for(const s of i)if(t===s.dataPath){if(s.data===void 0)continue;Object.assign(e,s.data)}else s.data===void 0?delete e[s.key]:e[s.key]=s.data;if(n)for(const s of n)s.instancePath===t&&(s.keyword==="additionalProperties"&&delete e[s.params.additionalProperty],s.keyword==="unevaluatedProperties"&&delete e[s.params.unevaluatedProperty])}),xi=P((e,t,i,n)=>{for(const r of Object.keys(t))i.includes(r)||n.some(a=>!!r.match(Dt(a)))&&(e[r]=t[r]);for(const r of Object.keys(e))r in t||delete e[r]}),Mi=P((e,t,i={})=>{for(const n in t)e[n]=i[n]??t[n];for(const n in i)e[n]=i[n];for(const n in e)!(n in t)&&!(n in i)&&delete e[n]}),_t=P(e=>{e.readOnly=!0,e.summary=!0}),ji=P((e,t)=>{t.title&&e.titleDepth<6&&(e.titleDepth+=1)}),Se=(e,t,i,n)=>{var a,s,c;const r=((s=(a=e.params)==null?void 0:a.errors)==null?void 0:s[0])??e;return n===r.instancePath&&((c=r.params)==null?void 0:c.missingProperty)===t.key||r.instancePath===i&&(r.schemaPath===t.pointer||r.schemaPath===t.refPointer)},Fe=(e,t,i,n)=>{var a,s;const r=((s=(a=e.params)==null?void 0:a.errors)==null?void 0:s[0])??e;return!(r.schemaPath===t.pointer||r.schemaPath.startsWith(t.pointer+"/"))&&!(r.schemaPath===t.refPointer||r.schemaPath.startsWith(t.refPointer+"/"))?!1:!!r.instancePath.startsWith(i)};function K(e,t,i,n,r,a,s,c,l){if(t.ref===void 0)throw new Error("expression was not compiled : "+JSON.stringify(t));const d=e[t.ref];try{return t.pure?d(i,i,n,n.context,r,a,n.readOnly,n.summary,s):d(i,i,n,n.context,r,a,n.readOnly,n.summary,s,c,l)}catch(o){const u={expression:t,data:i,context:n.context,display:r};throw u[t.dataAlias]=i,t.pure||(u.rootData=c,u.parent=l),console.warn("json-layout: failed to evaluate expression",o,u),new Error("json-layout: failed to evaluate expression")}}const zi=(e,t,i,n,r,a,s)=>{if(Zt(e)){for(const c of e.switch)if(!c.if||K(i.expressions,c.if,r,t,n,c,i.validates,a,s))return c}else if(e.if){if(K(i.expressions,e.if,r,t,n,e,i.validates,a,s))return e}else return e;return{comp:"none"}};function te(e,t,i,n,r,a,s,c,l,d,o,u,f,g,m){var We,He,Le,Ue,Be,qe,Ge,Je,Ze,Qe,Ne,Ye,Xe,et,tt,it,nt,rt,st,at,ot,lt,ut,ct;ce("createStateNode",r);let w=null;if(l.pure&&!(m!=null&&m.error)&&!(m!=null&&m.childError)){const y=g.validatedForm||g.validatedChildren.includes(r);if(w=[m,t,i,r,e.currentInput!==null&&e.currentInput.startsWith(r),l,d,o.width,y,e.activatedItems,e.initial,u],m&&e.cacheKeys[r]&&Et(e.cacheKeys[r],w))return ce("createStateNode cache hit",r),e._debugCache&&(e._debugCache[r]=(e._debugCache[r]??[]).concat(["hit"])),m;ce("createStateNode cache miss",r),e._debugCache&&(e._debugCache[r]=(e._debugCache[r]??[]).concat(["miss"]))}else ce("createStateNode cache skip",r),e._debugCache&&(e._debugCache[r]=(e._debugCache[r]??[]).concat(["skip"]));const T=d&&Qt(d)?d:i.normalizedLayouts[l.pointer],p=zi(T,t,i,o,u,e.rootData,f),[_,R]=Oi(o,(d==null?void 0:d.cols)??p.cols),v=p.getOptions?Mi((m==null?void 0:m.options)??{},t,K(i.expressions,p.getOptions,u,t,_,p,i.validates,e.rootData,f)):t;e.initial&&t.autofocus&&p.autofocus&&p.comp!=="none"&&(e.autofocusTarget=r);let b;if(qt(p,i.components)){const y=u??{},S=ji(v,p);b=[];let W=e.autofocusTarget===r;for(let k=0;k<p.children.length;k++){const C=p.children[k];if(["remove","hide"].includes(v.readOnlyPropertiesMode)&&((We=l.roPropertyKeys)!=null&&We.includes(C.key)))continue;let O=l;const M=(He=l.children)==null?void 0:He.find(ee=>i.skeletonNodes[ee].key===C.key);if(M!==void 0&&(O=i.skeletonNodes[M]),O.condition&&!K(i.expressions,O.condition,y,t,_,p,i.validates,e.rootData,f))continue;const E=typeof C.key=="string"&&C.key.startsWith("$"),$=`${r}/${C.key}`;W&&(e.autofocusTarget=$);let q=E?y:y[C.key];if(C.key==="$patternProperties"){const ee=i.normalizedLayouts[O.pointer];q=xi(((Ue=(Le=m==null?void 0:m.children)==null?void 0:Le.find($t=>$t.key==="$patternProperties"))==null?void 0:Ue.data)??{},y,l.propertyKeys,ee.indexed??[])}const ve=te(e,S,i,C.key,$,r,E?s:`${s}/${C.key}`,s,O,C,_,q,{parent:f,data:y},g,(Be=m==null?void 0:m.children)==null?void 0:Be.find(ee=>ee.fullKey===$));(ve.autofocus||ve.autofocusChild!==void 0)&&(W=!1),b.push(ve)}}if(n==="$oneOf"&&l.childrenTrees){const y=r in e.activatedItems?e.activatedItems[r]:(qe=l.childrenTrees)==null?void 0:qe.findIndex(S=>i.validates[i.skeletonTrees[S].refPointer](u));if(y!==-1){e.initial&&(e.activatedItems[r]=y),e.errors=(Ge=e.errors)==null?void 0:Ge.filter(k=>{var O,M;const C=((M=(O=k.params)==null?void 0:O.errors)==null?void 0:M[0])??k;return!(Se(k,l,s,c)||Fe(k,l,s)&&(C.schemaPath.startsWith(l.pointer)&&!C.schemaPath.startsWith(l.pointer+"/"+y)||C.schemaPath.startsWith(l.refPointer)&&!C.schemaPath.startsWith(l.refPointer+"/"+y)))});const S=`${r}/${y}`;e.autofocusTarget===r&&(e.autofocusTarget=S);const W=i.skeletonTrees[l.childrenTrees[y]];b=[te(e,v,i,y,S,r,s,s,i.skeletonNodes[W.root],null,_,u,{parent:f,data:u},g,(Je=m==null?void 0:m.children)==null?void 0:Je[0])]}}if(Gt(p))if(p.indexed){const y=u??[],S=p.listEditMode==="inline"?v:_t(v);b=[];let W=e.autofocusTarget===r;const k=Object.keys(y);for(let C=0;C<k.length;C++){const O=k[C];let M=null;if(((Ze=l==null?void 0:l.childrenTrees)==null?void 0:Ze.length)===1)M=i.skeletonNodes[(Qe=i.skeletonTrees[l==null?void 0:l.childrenTrees[0]])==null?void 0:Qe.root];else for(let E=0;E<p.indexed.length;E++){const $=p.indexed[E],q=(Ne=l==null?void 0:l.childrenTrees)==null?void 0:Ne[E];if(!q)throw new Error(`missing skeleton tree for pattern ${$}`);O.match(Dt($))&&(M=i.skeletonNodes[(Ye=i.skeletonTrees[q])==null?void 0:Ye.root])}if(M){const E=`${r}/${O}`;W&&(e.autofocusTarget=E);const $=te(e,p.listEditMode==="inline-single"&&e.activatedItems[r]===C?v:S,i,O,E,r,`${s}/${O}`,s,M,null,_,y[O],{parent:f,data:y},g,(Xe=m==null?void 0:m.children)==null?void 0:Xe.find(q=>q.key===O));($.autofocus||$.autofocusChild!==void 0)&&(W=!1),b.push($)}}}else{const y=u??[],S=((et=l==null?void 0:l.childrenTrees)==null?void 0:et[0])&&i.skeletonNodes[(it=i.skeletonTrees[(tt=l==null?void 0:l.childrenTrees)==null?void 0:tt[0]])==null?void 0:it.root],W=p.listEditMode==="inline"?v:_t(v);b=[];let k=e.autofocusTarget===r;for(let C=0;C<y.length;C++){const O=y[C],M=`${r}/${C}`;k&&(e.autofocusTarget=M);const E=te(e,p.listEditMode==="inline-single"&&e.activatedItems[r]===C?v:W,i,C,M,r,`${s}/${C}`,s,S,null,_,O,{parent:f,data:y},g,(nt=m==null?void 0:m.children)==null?void 0:nt[C]);(E.autofocus||E.autofocusChild!==void 0)&&(k=!1),b.push(E)}}let x=(rt=e.errors)==null?void 0:rt.find(y=>Se(y,l,s,c));x||(x=(st=e.errors)==null?void 0:st.findLast(y=>Fe(y,l,s))),p.comp!=="none"&&x&&(e.errors=(at=e.errors)==null?void 0:at.filter(y=>!Se(y,l,s,c)&&!Fe(y,l,s)));let h=u;h===null&&!p.nullable&&(h=void 0);const A=g.validatedForm||g.validatedChildren.includes(r)||g.initialized===!1&&v.initialValidation==="always"||g.initialized===!1&&v.initialValidation==="withData"&&!fe(h);if(typeof((ot=b==null?void 0:b[0])==null?void 0:ot.key)=="number"&&p.comp!=="one-of-select"&&!p.indexed)h=Ei(h??[],b);else if(Array.isArray(h)){const y=((lt=l.childrenTrees)==null?void 0:lt[0])&&i.skeletonTrees[(ut=l.childrenTrees)==null?void 0:ut[0]],S=y&&i.skeletonNodes[y.root]||null;h=Di(h??[],s,e.additionalPropertiesErrors,[!0,"unknown"].includes(v.removeAdditional)?S==null?void 0:S.propertyKeys:void 0,v.readOnlyPropertiesMode==="remove"?S==null?void 0:S.roPropertyKeys:void 0)}else if((typeof h=="object"||h===void 0&&(b!=null&&b.length))&&!(h instanceof File)){const y=[!0,"unknown"].includes(v.removeAdditional)||(b==null?void 0:b.some(S=>S.key==="$patternProperties"));h=Mt(h??{},s,b,e.additionalPropertiesErrors,y?l.propertyKeys:void 0,v.readOnlyPropertiesMode==="remove"?l.roPropertyKeys:void 0)}if(h!==u&&(Array.isArray(u)&&Array.isArray(h)?h=Ee(u,h):typeof u=="object"&&typeof h=="object"&&(h=wi(u,h))),p.getConstData)e.rehydrate||(h=K(i.expressions,p.getConstData,h,v,_,p,i.validates,e.rootData,f));else if(p.getDefaultData&&xt(h,p,v)&&e.currentInput!==r){if(!e.rehydrate){const y=K(i.expressions,p.getDefaultData,h,v,_,p,i.validates,e.rootData,f);(h===void 0||!fe(y))&&(h=y)}}else fe(h)&&(p.nullable?(v.defaultOn!=="missing"||h!==void 0)&&(h=null):v.defaultOn!=="missing"&&(h=void 0));let le;p.getProps&&(le=K(i.expressions,p.getProps,h,v,_,p,i.validates,e.rootData,f));let U;if(wt(p,i.components)){if(p.items)U=p.items;else if((ct=p.getItems)!=null&&ct.immutable&&(m!=null&&m.itemsCacheKey))U=m.itemsCacheKey;else if(p.getItems&&bt(p.getItems))if(p.getItems.immutable&&(m!=null&&m.itemsCacheKey))U=m.itemsCacheKey;else try{U=K(i.expressions,p.getItems,h,v,_,p,i.validates,e.rootData,f)}catch{U=null}else if(p.getItems&&St(p.getItems))try{U=K(i.expressions,p.getItems.url,null,v,_,p,i.validates,e.rootData,f)}catch{U=null}}const Rt=Jt(p,i.components)&&!v.readOnly&&!v.summary&&e.autofocusTarget===r,Ke=Pi(m??{},n,r,a,s,c,l,p,_.width,R,h,x==null?void 0:x.message,A,v,Rt,le,U,b&&Ee(m==null?void 0:m.children,b));return w&&(w[0]=Ke,e.cacheKeys[r]=w),Ke}const Vi=P((e,t,i)=>{if(t.dataPath===t.parentDataPath){if(Object.assign(e,i),t.data&&typeof i=="object"&&i!==null)for(const n of Object.keys(t.data))n in i||delete e[n]}else e[t.key]=i}),Ri=P((e,t,i)=>{e.root=t,e.valid=i});function*jt(e){if(yield e,e.children)for(const t of e.children)yield*jt(t)}function $i(e,t,i,n,r,a,s,c){var u,f;const l=i.validates[n.refPointer],d=l(a);if(l.errors){for(const g of l.errors)g.keyword!=="errorMessage"&&i.localizeErrors([g]);if(e.errors=e.allErrors=l.errors,e.errors.length)for(const g of e.errors){const m=((f=(u=g.params)==null?void 0:u.errors)==null?void 0:f[0])??g;m!=null&&m.parentSchema.__pointer&&(m.schemaPath=m==null?void 0:m.parentSchema.__pointer,m.keyword==="oneOf"&&(m.schemaPath+="/oneOf"))}[!0,"error"].includes(t.removeAdditional)&&(e.additionalPropertiesErrors=l.errors.filter(g=>g.keyword==="additionalProperties"||g.keyword==="unevaluatedProperties"))}const o=te(e,t,i,"","",null,"",null,i.skeletonNodes[n.root],null,r,a,null,s,c==null?void 0:c.root);e.nodes=[],e.files=[];for(const g of jt(o))e.nodes.push(g),g.data instanceof File&&e.files.push({dataPath:g.dataPath,file:g.data});return Ri(c??{},o,d)}function Ki(e,t){const i={...t.messages};return e.messages&&Object.assign(i,e.messages),{context:{},width:1e3,readOnly:!1,summary:!1,density:"default",indent:!1,titleDepth:2,validateOn:"input",initialValidation:"withData",updateOn:"input",debounceInputMs:300,defaultOn:"empty",removeAdditional:"error",autofocus:!1,readOnlyPropertiesMode:"show",fetchOptions:{},onAutofocus:()=>{},onUpdate:()=>{},onData:()=>{},...e,messages:i}}const fn=e=>!!e&&e.layout.comp==="section",Wi=(e,t)=>!!e&&wt(e.layout,t),H=Re("jl:data-binding");class Hi{constructor(t,i,n,r){F(this,"_compiledLayout");F(this,"_stateTree");F(this,"skeletonTree");F(this,"_display");F(this,"_validationState");F(this,"_options");F(this,"_data");F(this,"_previousData");F(this,"_dataWaitingForBlur",!1);F(this,"_currentInput",null);F(this,"_lastCreateStateTreeContext");F(this,"_autofocusTarget");F(this,"_previousAutofocusTarget");F(this,"files",[]);F(this,"debouncedInput",null);F(this,"_itemsCache",{});F(this,"activatedItems");H("create stateful layout",t,i,n,r),this._compiledLayout=t,this.skeletonTree=i,this.prepareOptions(n),this._autofocusTarget=this.options.autofocus?"":null,this._previousAutofocusTarget=null,this._data=r,this._previousData=r,this.initValidationState(),this.activatedItems={},this.updateState(),this.handleAutofocus()}get compiledLayout(){return this._compiledLayout}get stateTree(){return this._stateTree}get display(){return this._display}get validationState(){return this._validationState}set validationState(t){this._validationState={initialized:t.initialized??this._validationState.initialized??!1,validatedForm:t.validatedForm??this._validationState.validatedForm??!1,validatedChildren:t.validatedChildren??this._validationState.validatedChildren??[]},this.updateState()}get options(){return this._options}set options(t){H("apply main options setter",t),this.prepareOptions(t),this.updateState()}get data(){return this._data}set data(t){H("apply main data setter",t),this._data=t,this.updateState()}prepareOptions(t){this._options=Ki(t,this.compiledLayout),this._display=this._display&&this._display.width===this._options.width?this._display:new xe(this._options.width)}initValidationState(){const t=this.options.initialValidation==="always";this._validationState={initialized:t,validatedForm:t,validatedChildren:[]}}updateState(){this.createStateTree();let t=0;for(;this._data!==(this._stateTree.root.data??null)||this._autofocusTarget!==this._lastCreateStateTreeContext.autofocusTarget;){if(t+=1,t>100)throw console.error("too many iterations in updateState, the data is probably not stable",this._data,this._stateTree.root.data),new Error("too many iterations in updateState, the data is probably not stable");H("hydrating state tree changed the data, do it again",this._data,this._stateTree.root.data),this._data=this._stateTree.root.data??null,this._autofocusTarget=this._lastCreateStateTreeContext.autofocusTarget,this.createStateTree(!0)}!this._stateTree.valid&&!this._stateTree.root.error&&!this._stateTree.root.childError&&console.error("JSON layout failed to assign validation error to a node",this._lastCreateStateTreeContext.allErrors),H("emit update event",this._data,this._stateTree),this.options.onUpdate(this),this.emitData()}emitData(){!this._dataWaitingForBlur&&this._data!==this._previousData&&(H("emit data event",this._data),this.options.onData(this._data),this._previousData=this._data)}createStateTree(t=!1){var n,r;const i={activatedItems:this.activatedItems,autofocusTarget:this._autofocusTarget,currentInput:this._currentInput,initial:!this._lastCreateStateTreeContext,rehydrate:t,cacheKeys:((n=this._lastCreateStateTreeContext)==null?void 0:n.cacheKeys)??{},rootData:this._data,files:[],nodes:[]};this._options._debugCache&&(i._debugCache=((r=this._lastCreateStateTreeContext)==null?void 0:r._debugCache)??{}),this._stateTree=$i(i,this._options,this._compiledLayout,this.skeletonTree,this._display,this._data,this._validationState,this._stateTree),this._lastCreateStateTreeContext=i,this.validationState.initialized||(this._validationState={initialized:!0,validatedForm:this._validationState.validatedForm,validatedChildren:i.nodes.filter(a=>a.validated).map(a=>a.fullKey)}),this.files=Ee(this.files,i.files)}validate(){this.validationState={validatedForm:!0}}resetValidation(){this.initValidationState(),this.updateState()}get valid(){return this.stateTree.valid}get errors(){return this._lastCreateStateTreeContext.nodes.filter(t=>!!t.error).map(t=>t.error)}get hasHiddenError(){return this._lastCreateStateTreeContext.nodes.findIndex(t=>t.error&&!t.validated)!==-1}getParentContextExpression(t){const i=this._lastCreateStateTreeContext.nodes.find(n=>n.fullKey===t.parentFullKey);return i?{parent:this.getParentContextExpression(i),data:i.data}:null}evalNodeExpression(t,i,n){return K(this.compiledLayout.expressions,i,n,t.options,new xe(t.width),t.layout,this.compiledLayout.validates,this._data,this.getParentContextExpression(t))}applyInput(t,i,n,r){H("received input event from node",t,i);const a=t.layout.transformData&&this.evalNodeExpression(t,t.layout.transformData,i);if(t.layout.comp==="file-input"){if(a)i.toJSON=()=>a;else if(i instanceof File){const l={name:i.name,size:i.size,type:i.type};i.toJSON=()=>l}else if(Array.isArray(i))for(const l of i){const d={name:l.name,size:l.size,type:l.type};l.toJSON=()=>d}}else a&&(i=a);if(n&&!this.validationState.validatedChildren.includes(t.fullKey)&&(this.validationState={validatedChildren:this.validationState.validatedChildren.concat([t.fullKey])}),r!==void 0&&(this.activatedItems=P(this.activatedItems,l=>{l[t.fullKey]=r}),this._autofocusTarget=t.fullKey+"/"+r),t.parentFullKey===null){this._data=i,this.updateState();return}const s=this._lastCreateStateTreeContext.nodes.find(l=>l.fullKey===t.parentFullKey);if(!s)throw new Error(`parent with key "${t.parentFullKey}" not found`);const c=Vi(s.data??(typeof t.key=="number"?[]:{}),t,i??(t.skeleton.nullable?null:void 0));this.applyInput(s,c,n),r!==void 0&&this.handleAutofocus()}applyDebouncedInput(){this.debouncedInput&&(clearTimeout(this.debouncedInput[4]),this.applyInput(this.debouncedInput[0],this.debouncedInput[1],this.debouncedInput[2],this.debouncedInput[3]),this.debouncedInput=null)}input(t,i,n){var c,l;this.debouncedInput&&(this.debouncedInput[0]===t?clearTimeout(this.debouncedInput[4]):this.applyDebouncedInput());const r=(c=this.compiledLayout.components[t.layout.comp])==null?void 0:c.emitsBlur;r&&(this._currentInput=t.fullKey),t.options.updateOn==="blur"&&r&&(this._dataWaitingForBlur=!0);const a=t.options.validateOn==="input"||t.options.validateOn==="blur"&&!r;((l=this.compiledLayout.components[t.layout.comp])==null?void 0:l.shouldDebounce)&&t.options.debounceInputMs?this.debouncedInput=[t,i,a,n,setTimeout(()=>this.applyDebouncedInput(),t.options.debounceInputMs)]:this.applyInput(t,i,a,n)}blur(t){this.applyDebouncedInput(),this._currentInput===t.fullKey&&(this._currentInput=null),t.layout.getDefaultData&&xt(t.data,t.layout,t.options)&&this.applyInput(t,t.data,!0),H("received blur event from node",t),(t.options.validateOn==="input"||t.options.validateOn==="blur")&&!this.validationState.validatedChildren.includes(t.fullKey)&&(this.validationState={validatedChildren:this.validationState.validatedChildren.concat([t.fullKey])}),this._dataWaitingForBlur&&(this._dataWaitingForBlur=!1,this.emitData())}validateNodeRecurse(t){if(this.validationState={validatedChildren:this.validationState.validatedChildren.concat([t.fullKey])},t.children)for(const i of t.children)this.validateNodeRecurse(i)}async getItemsWithoutCache(t,i=""){var s;if(!Wi(t,this._compiledLayout.components))throw new Error("node is not a component with an items list");if(t.itemsCacheKey===null)return{appliedQ:!1,items:[]};let n=!1,r;if((t.layout.items||t.layout.getItems&&bt(t.layout.getItems))&&(r=t.itemsCacheKey),t.layout.getItems&&St(t.layout.getItems)){const c=new URL(t.itemsCacheKey);let l=t.layout.getItems.qSearchParam;if(!l)for(const o of c.searchParams.entries())o[1]==="{q}"&&(l=o[0]);l&&(n=!0,i?c.searchParams.set(l,i):c.searchParams.delete(l));const d=typeof t.options.fetchOptions=="function"?t.options.fetchOptions(c):t.options.fetchOptions;r=await(await fetch(c,d)).json()}if(!r)throw new Error(`node ${t.fullKey} is missing items or getItems parameters`);if((s=t.layout.getItems)!=null&&s.itemsResults&&(r=this.evalNodeExpression(t,t.layout.getItems.itemsResults,r)),!Array.isArray(r))throw new Error(`getItems didn't return an array for node ${t.fullKey}, you can define itemsResults to extract the array`);const a=r.map(c=>this.prepareSelectItem(t,c));return{appliedQ:n,items:a}}async getItems(t,i=""){let n;return this._itemsCache[t.fullKey]&&this._itemsCache[t.fullKey].key===t.itemsCacheKey&&(!i||!this._itemsCache[t.fullKey].appliedQ)?n=this._itemsCache[t.fullKey]:(n=await this.getItemsWithoutCache(t,i),(!i||!n.appliedQ)&&(this._itemsCache[t.fullKey]={key:t.itemsCacheKey,...n})),i&&!n.appliedQ?n.items.filter(r=>r.title.toLowerCase().includes(i.toLowerCase())):n.items}prepareSelectItem(t,i){var a,s,c,l,d,o,u,f,g;const n={},r=t.layout;return typeof i=="object"?(n.value=(a=r.getItems)!=null&&a.itemValue?this.evalNodeExpression(t,r.getItems.itemValue,i):(s=r.getItems)!=null&&s.returnObjects?i:i.value,n.key=(c=r.getItems)!=null&&c.itemKey?this.evalNodeExpression(t,r.getItems.itemKey,i):i.key,n.title=(l=r.getItems)!=null&&l.itemTitle?this.evalNodeExpression(t,r.getItems.itemTitle,i):i.title,n.value=n.value??n.key,n.key=n.key??n.value+"",n.title=n.title??n.key,!n.icon&&i.icon&&(n.icon=i.icon)):(n.value=(d=r.getItems)!=null&&d.itemValue?this.evalNodeExpression(t,r.getItems.itemValue,i):i,n.key=(o=r.getItems)!=null&&o.itemKey?this.evalNodeExpression(t,r.getItems.itemKey,i):n.value,n.title=(u=r.getItems)!=null&&u.itemTitle?this.evalNodeExpression(t,r.getItems.itemTitle,i):n.value),(f=r.getItems)!=null&&f.itemIcon&&(n.icon=this.evalNodeExpression(t,(g=r.getItems)==null?void 0:g.itemIcon,i)),n}activateItem(t,i){var n,r;if(this.activatedItems=P(this.activatedItems,a=>{a[t.fullKey]=i}),this._autofocusTarget=t.fullKey+"/"+i,t.key==="$oneOf")if(t.layout.emptyData&&t.data&&typeof t.data=="object"&&((n=t.children)!=null&&n[0])){const a=this._lastCreateStateTreeContext.nodes.find(c=>c.fullKey===t.parentFullKey);if(!a)throw new Error(`parent with key "${t.parentFullKey}" not found`);if(!a.data||typeof a.data!="object")throw new Error(`parent with key "${t.parentFullKey}" is missing data object`);const s={...a.data};for(const c of(r=t.children)==null?void 0:r[0].skeleton.propertyKeys)delete s[c];this.input(a,s)}else this.input(t,void 0);else this.updateState();this.handleAutofocus()}deactivateItem(t){this.activatedItems=P(this.activatedItems,i=>{for(const n in i)n.startsWith(t.fullKey)&&delete i[n]}),this.updateState()}handleAutofocus(){const t=this._autofocusTarget;t!==null&&this._autofocusTarget!==this._previousAutofocusTarget&&(this._previousAutofocusTarget=t,setTimeout(()=>{H("emit autofocus event",t),this.options.onAutofocus(t)}))}}function $e(e){return Xt()?(ei(e),!0):!1}function ae(e){return typeof e=="function"?e():ti(e)}const Li=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ui=Object.prototype.toString,Bi=e=>Ui.call(e)==="[object Object]",Me=()=>{};function qi(e,t){function i(...n){return new Promise((r,a)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(r).catch(a)})}return i}const Gi=e=>e();function Ji(e,t={}){let i,n,r=Me;const a=c=>{clearTimeout(c),r(),r=Me};return c=>{const l=ae(e),d=ae(t.maxWait);return i&&a(i),l<=0||d!==void 0&&d<=0?(n&&(a(n),n=null),Promise.resolve(c())):new Promise((o,u)=>{r=t.rejectOnCancel?u:o,d&&!n&&(n=setTimeout(()=>{i&&a(i),n=null,o(c())},d)),i=setTimeout(()=>{n&&a(n),n=null,o(c())},l)})}}function Zi(e){return je()}function Qi(e,t,i={}){const{eventFilter:n=Gi,...r}=i;return L(e,qi(n,t),r)}function zt(e,t=!0,i){Zi()?Ft(e,i):t?e():Yt(e)}function dn(e,t,i={}){const{debounce:n=0,maxWait:r=void 0,...a}=i;return Qi(e,t,{...a,eventFilter:Ji(n,{maxWait:r})})}function Z(e){var t;const i=ae(e);return(t=i==null?void 0:i.$el)!=null?t:i}const oe=Li?window:void 0;function Ni(...e){let t,i,n,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([i,n,r]=e,t=oe):[t,i,n,r]=e,!t)return Me;Array.isArray(i)||(i=[i]),Array.isArray(n)||(n=[n]);const a=[],s=()=>{a.forEach(o=>o()),a.length=0},c=(o,u,f,g)=>(o.addEventListener(u,f,g),()=>o.removeEventListener(u,f,g)),l=L(()=>[Z(t),ae(r)],([o,u])=>{if(s(),!o)return;const f=Bi(u)?{...u}:u;a.push(...i.flatMap(g=>n.map(m=>c(o,g,m,f))))},{immediate:!0,flush:"post"}),d=()=>{l(),s()};return $e(d),d}function Yi(){const e=B(!1),t=je();return t&&Ft(()=>{e.value=!0},t),e}function Vt(e){const t=Yi();return ie(()=>(t.value,!!e()))}function Xi(e,t={}){const{window:i=oe}=t,n=Vt(()=>i&&"matchMedia"in i&&typeof i.matchMedia=="function");let r;const a=B(!1),s=d=>{a.value=d.matches},c=()=>{r&&("removeEventListener"in r?r.removeEventListener("change",s):r.removeListener(s))},l=ii(()=>{n.value&&(c(),r=i.matchMedia(ae(e)),"addEventListener"in r?r.addEventListener("change",s):r.addListener(s),a.value=r.matches)});return $e(()=>{l(),c(),r=void 0}),a}function en(e,t,i={}){const{window:n=oe,...r}=i;let a;const s=Vt(()=>n&&"ResizeObserver"in n),c=()=>{a&&(a.disconnect(),a=void 0)},l=ie(()=>Array.isArray(e)?e.map(u=>Z(u)):[Z(e)]),d=L(l,u=>{if(c(),s.value&&n){a=new ResizeObserver(t);for(const f of u)f&&a.observe(f,r)}},{immediate:!0,flush:"post"}),o=()=>{c(),d()};return $e(o),{isSupported:s,stop:o}}function tn(e,t={width:0,height:0},i={}){const{window:n=oe,box:r="content-box"}=i,a=ie(()=>{var u,f;return(f=(u=Z(e))==null?void 0:u.namespaceURI)==null?void 0:f.includes("svg")}),s=B(t.width),c=B(t.height),{stop:l}=en(e,([u])=>{const f=r==="border-box"?u.borderBoxSize:r==="content-box"?u.contentBoxSize:u.devicePixelContentBoxSize;if(n&&a.value){const g=Z(e);if(g){const m=n.getComputedStyle(g);s.value=Number.parseFloat(m.width),c.value=Number.parseFloat(m.height)}}else if(f){const g=Array.isArray(f)?f:[f];s.value=g.reduce((m,{inlineSize:w})=>m+w,0),c.value=g.reduce((m,{blockSize:w})=>m+w,0)}else s.value=u.contentRect.width,c.value=u.contentRect.height},i);zt(()=>{const u=Z(e);u&&(s.value="offsetWidth"in u?u.offsetWidth:t.width,c.value="offsetHeight"in u?u.offsetHeight:t.height)});const d=L(()=>Z(e),u=>{s.value=u?t.width:0,c.value=u?t.height:0});function o(){l(),d()}return{width:s,height:c,stop:o}}function hn(e={}){const{window:t=oe,initialWidth:i=Number.POSITIVE_INFINITY,initialHeight:n=Number.POSITIVE_INFINITY,listenOrientation:r=!0,includeScrollbar:a=!0}=e,s=B(i),c=B(n),l=()=>{t&&(a?(s.value=t.innerWidth,c.value=t.innerHeight):(s.value=t.document.documentElement.clientWidth,c.value=t.document.documentElement.clientHeight))};if(l(),zt(l),Ni("resize",l,{passive:!0}),r){const d=Xi("(orientation: portrait)");L(d,()=>l())}return{width:s,height:c}}const nn={add:"$plus",calendar:"$calendar",close:"$close",edit:"$edit",sortDown:"$sortDesc",sortUp:"$sortAsc",alert:"svg:M13 14H11V9H13M13 18H11V16H13M1 21H23L12 2L1 21Z",clock:"svg:M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z",delete:"svg:M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",duplicate:"svg:M11,17H4A2,2 0 0,1 2,15V3A2,2 0 0,1 4,1H16V3H4V15H11V13L15,16L11,19V17M19,21V7H8V13H6V7A2,2 0 0,1 8,5H19A2,2 0 0,1 21,7V21A2,2 0 0,1 19,23H8A2,2 0 0,1 6,21V19H8V21H19Z",infoSymbol:"svg:M11 9H13V7H11V9M11 17H13V11H11V17Z",menu:"svg:M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",sort:"svg:M17.45,17.55L12,23L6.55,17.55L7.96,16.14L11,19.17V4.83L7.96,7.86L6.55,6.45L12,1L17.45,6.45L16.04,7.86L13,4.83V19.17L16.04,16.14L17.45,17.55Z"},rn={nodeComponents:{},plugins:[],pluginsOptions:{}},sn=(e,t,i,n,r,a,s,c,l)=>{const d={...e==null?void 0:e.components},o={...a,...e==null?void 0:e.nodeComponents};if(e!=null&&e.plugins)for(const g of e.plugins)d[g.info.name]=g.info,o[g.info.name]=g.nodeComponent;const u={...e==null?void 0:e.icons,...nn};return{...rn,readOnly:!!(t&&(t.isDisabled.value||t.isReadonly.value)),density:n==null?void 0:n.density,...e,onData:s,onUpdate:c,onAutofocus:l,context:e!=null&&e.context?JSON.parse(JSON.stringify(e.context)):{},width:Math.round(i??0),vjsfSlots:{...r},components:d,nodeComponents:o,icons:u}},D=Re("vjsf:use-vjsf");gi(!1);const mn={"update:modelValue":e=>!0,"update:state":e=>!0},pn=(e,t,i,n,r,a,s)=>{var x;const c=B(null);ni({},"Vjsf");const l=(x=ft(Symbol.for("vuetify:defaults")))==null?void 0:x.value;D("provided defaults",l);const{width:d}=tn(c),o=dt(null),u=dt(null),f=ft(Symbol.for("vuetify:form"),null),g=`vjsf-${Math.random().toString(36).substring(2,9)}`;f?f.register({id:g,validate:()=>{var h,A;return(h=o.value)==null||h.validate(),((A=o.value)==null?void 0:A.errors)||[]},reset:()=>{var h;return(h=o.value)==null?void 0:h.resetValidation()},resetValidation:()=>{var h;return(h=o.value)==null?void 0:h.resetValidation()},vm:je()}):console.warn("Vjsf should be wrapped in VForm");const m=ri(),w=h=>{D("onStatefulLayoutUpdate",h),h&&(u.value=h.stateTree,D("  -> emit update:state"),r("update:state",h),f&&(h.valid?f.update(g,!0,[]):h.hasHiddenError?f.update(g,null,[]):f.update(g,!1,[])))},T=h=>{D("onDataUpdate",h),D("  -> emit update:modelValue"),r("update:modelValue",h)},p=()=>{if(!c.value)return;const h=c.value.querySelector(".vjsf-input--autofocus");if(D("onAutofocus",h),h){const A=h.querySelector("input")??h.querySelector('textarea:not([style*="display: none"]');A&&A.focus()}},_=ie(()=>sn(i.value,f,d.value,l==null?void 0:l.global,m,{...n},T,w,p)),R=B({});L(_,h=>{if(s!=null&&s.value)return;const A=Si(R.value,h);A!==R.value&&(D("new compileOptions",A),R.value=A)},{immediate:!0});const v=ie(()=>{if(s!=null&&s.value)return s==null?void 0:s.value;if(!a)throw new Error("compile function is not available");return a(e.value,R.value)}),b=()=>{d.value&&(o.value=new Hi(G(v.value),G(v.value.skeletonTrees[v.value.mainTree]),G(_.value),G(t.value)))};return L(_,h=>{D("watch fullOptions",_),o.value?(D("  -> update statefulLayout options"),o.value.options=G(h)):(D("  -> init statefulLayout"),b())}),L(t,h=>{const A=G(h);o.value&&o.value.data!==A&&(D("modelValue changed from outside",A),D("  -> update statefulLayout data"),o.value.data=G(A))}),L(v,h=>{D("watch compiledLayout",h),D("  -> init statefulLayout"),b()}),{el:c,statefulLayout:o,stateTree:u}};export{rn as a,mn as b,pn as c,nn as d,yi as e,cn as f,Dt as g,fn as i,hn as u,dn as w};
