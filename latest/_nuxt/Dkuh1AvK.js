import{d as De,h as A,aO as we}from"./BD5tCmfc.js";import{d as Pe}from"./DP8LyDvu.js";import{v as se,a as le,i as Ce,b as fe,c as _e,d as $e,e as Se,g as Ke,f as xe,h as Ae,j as Le,k as Te,l as H,m as ue,o as Me,p as qe,q as Re,r as Be,s as Ve}from"./wCmIKGRh.js";import{a as He,c as Ye,d as Ge}from"./Dir275Eu.js";import{p as w,b as Ee}from"./QPeKqwTM.js";import{e as ze}from"./kY6r_Lxp.js";function B(){return B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},B.apply(this,arguments)}var We=13,Ue=9,Qe=8,Ze=89,Y=90,Xe=77,ae=57,ce=219,de=222,pe=192,Je=27,ye=100,Ne=3e3,Fe=typeof window<"u"&&navigator&&/Win/i.test(navigator.platform),z=typeof window<"u"&&navigator&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),$t=De({props:{lineNumbers:{type:Boolean,default:!1},autoStyleLineNumbers:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1},modelValue:{type:String,default:""},highlight:{type:Function,required:!0},tabSize:{type:Number,default:2},insertSpaces:{type:Boolean,default:!0},ignoreTabKey:{type:Boolean,default:!1},placeholder:{type:String,default:""}},data:function(){return{capture:!0,history:{stack:[],offset:-1},lineNumbersHeight:"20px",codeData:""}},watch:{modelValue:{immediate:!0,handler:function(t){t?this.codeData=t:this.codeData=""}},content:{immediate:!0,handler:function(){var t=this;this.lineNumbers&&this.$nextTick(function(){t.setLineNumbersHeight()})}},lineNumbers:function(){var t=this;this.$nextTick(function(){t.styleLineNumbers(),t.setLineNumbersHeight()})}},computed:{isEmpty:function(){return this.codeData.length===0},content:function(){var t=this.highlight(this.codeData)+"<br />";return t},lineNumbersCount:function(){var t=this.codeData.split(/\r\n|\n/).length;return t}},mounted:function(){this._recordCurrentState(),this.styleLineNumbers()},methods:{setLineNumbersHeight:function(){this.lineNumbersHeight=getComputedStyle(this.$refs.pre).height},styleLineNumbers:function(){if(!(!this.lineNumbers||!this.autoStyleLineNumbers)){var t=this.$refs.pre,i=this.$el.querySelector(".prism-editor__line-numbers"),n=window.getComputedStyle(t);this.$nextTick(function(){var o="border-top-left-radius",s="border-bottom-left-radius";if(i){i.style[o]=n[o],i.style[s]=n[s],t.style[o]="0",t.style[s]="0";var f=["background-color","margin-top","padding-top","font-family","font-size","line-height"];f.forEach(function(u){i.style[u]=n[u]}),i.style["margin-bottom"]="-"+n["padding-top"]}})}},_recordCurrentState:function(){var t=this.$refs.textarea;if(t){var i=t.value,n=t.selectionStart,o=t.selectionEnd;this._recordChange({value:i,selectionStart:n,selectionEnd:o})}},_getLines:function(t,i){return t.substring(0,i).split(`
`)},_applyEdits:function(t){var i=this.$refs.textarea,n=this.history.stack[this.history.offset];n&&i&&(this.history.stack[this.history.offset]=B({},n,{selectionStart:i.selectionStart,selectionEnd:i.selectionEnd})),this._recordChange(t),this._updateInput(t)},_recordChange:function(t,i){i===void 0&&(i=!1);var n=this.history,o=n.stack,s=n.offset;if(o.length&&s>-1){this.history.stack=o.slice(0,s+1);var f=this.history.stack.length;if(f>ye){var u=f-ye;this.history.stack=o.slice(u,f),this.history.offset=Math.max(this.history.offset-u,0)}}var a=Date.now();if(i){var c=this.history.stack[this.history.offset];if(c&&a-c.timestamp<Ne){var r,p,b=/[^a-z0-9]([a-z0-9]+)$/i,d=(r=this._getLines(c.value,c.selectionStart).pop())===null||r===void 0?void 0:r.match(b),O=(p=this._getLines(t.value,t.selectionStart).pop())===null||p===void 0?void 0:p.match(b);if(d&&O&&O[1].startsWith(d[1])){this.history.stack[this.history.offset]=B({},t,{timestamp:a});return}}}this.history.stack.push(B({},t,{timestamp:a})),this.history.offset++},_updateInput:function(t){var i=this.$refs.textarea;i&&(i.value=t.value,i.selectionStart=t.selectionStart,i.selectionEnd=t.selectionEnd,this.$emit("update:modelValue",t.value))},handleChange:function(t){var i=t.target,n=i.value,o=i.selectionStart,s=i.selectionEnd;this._recordChange({value:n,selectionStart:o,selectionEnd:s},!0),this.$emit("update:modelValue",n)},_undoEdit:function(){var t=this.history,i=t.stack,n=t.offset,o=i[n-1];o&&(this._updateInput(o),this.history.offset=Math.max(n-1,0))},_redoEdit:function(){var t=this.history,i=t.stack,n=t.offset,o=i[n+1];o&&(this._updateInput(o),this.history.offset=Math.min(n+1,i.length-1))},handleKeyDown:function(t){var i=this.tabSize,n=this.insertSpaces,o=this.ignoreTabKey;if(this.$emit("keydown",t),!t.defaultPrevented){t.keyCode===Je&&(t.target.blur(),this.$emit("blur",t));var s=t.target,f=s.value,u=s.selectionStart,a=s.selectionEnd,c=(n?" ":"	").repeat(i);if(t.keyCode===Ue&&!o&&this.capture)if(t.preventDefault(),t.shiftKey){var r=this._getLines(f,u),p=r.length-1,b=this._getLines(f,a).length-1,d=f.split(`
`).map(function(m,x){return x>=p&&x<=b&&m.startsWith(c)?m.substring(c.length):m}).join(`
`);if(f!==d){var O=r[p];this._applyEdits({value:d,selectionStart:O.startsWith(c)?u-c.length:u,selectionEnd:a-(f.length-d.length)})}}else if(u!==a){var v=this._getLines(f,u),j=v.length-1,y=this._getLines(f,a).length-1,$=v[j];this._applyEdits({value:f.split(`
`).map(function(m,x){return x>=j&&x<=y?c+m:m}).join(`
`),selectionStart:/\S/.test($)?u+c.length:u,selectionEnd:a+c.length*(y-j+1)})}else{var S=u+c.length;this._applyEdits({value:f.substring(0,u)+c+f.substring(a),selectionStart:S,selectionEnd:S})}else if(t.keyCode===Qe){var V=u!==a,P=f.substring(0,u);if(P.endsWith(c)&&!V){t.preventDefault();var _=u-c.length;this._applyEdits({value:f.substring(0,u-c.length)+f.substring(a),selectionStart:_,selectionEnd:_})}}else if(t.keyCode===We){if(u===a){var K=this._getLines(f,u).pop(),M=K==null?void 0:K.match(/^\s+/);if(M&&M[0]){t.preventDefault();var E=`
`+M[0],R=u+E.length;this._applyEdits({value:f.substring(0,u)+E+f.substring(a),selectionStart:R,selectionEnd:R})}}}else if(t.keyCode===ae||t.keyCode===ce||t.keyCode===de||t.keyCode===pe){var C;t.keyCode===ae&&t.shiftKey?C=["(",")"]:t.keyCode===ce?t.shiftKey?C=["{","}"]:C=["[","]"]:t.keyCode===de?t.shiftKey?C=['"','"']:C=["'","'"]:t.keyCode===pe&&!t.shiftKey&&(C=["`","`"]),u!==a&&C&&(t.preventDefault(),this._applyEdits({value:f.substring(0,u)+C[0]+f.substring(u,a)+C[1]+f.substring(a),selectionStart:u,selectionEnd:a+2}))}else(z?t.metaKey&&t.keyCode===Y:t.ctrlKey&&t.keyCode===Y)&&!t.shiftKey&&!t.altKey?(t.preventDefault(),this._undoEdit()):(z?t.metaKey&&t.keyCode===Y&&t.shiftKey:Fe?t.ctrlKey&&t.keyCode===Ze:t.ctrlKey&&t.keyCode===Y&&t.shiftKey)&&!t.altKey?(t.preventDefault(),this._redoEdit()):t.keyCode===Xe&&t.ctrlKey&&(!z||t.shiftKey)&&(t.preventDefault(),this.capture=!this.capture)}}},render:function(){var t=this,i=A("div",{class:"prism-editor__line-width-calc",style:"height: 0px; visibility: hidden; pointer-events: none;"},"999"),n=A("div",{class:"prism-editor__line-numbers",style:{"min-height":this.lineNumbersHeight},"aria-hidden":"true"},[i,Array.from(Array(this.lineNumbersCount).keys()).map(function(u,a){return A("div",{class:"prism-editor__line-number token comment"},""+ ++a)})]),o=A("textarea",{ref:"textarea",onInput:this.handleChange,onKeydown:this.handleKeyDown,onClick:function(a){t.$emit("click",a)},onKeyup:function(a){t.$emit("keyup",a)},onFocus:function(a){t.$emit("focus",a)},onBlur:function(a){t.$emit("blur",a)},class:{"prism-editor__textarea":!0,"prism-editor__textarea--empty":this.isEmpty},spellCheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off","data-gramm":"false",placeholder:this.placeholder,"data-testid":"textarea",readonly:this.readonly,value:this.codeData}),s=A("pre",{ref:"pre",class:"prism-editor__editor","data-testid":"preview",innerHTML:this.content}),f=A("div",{class:"prism-editor__container"},[o,s]);return A("div",{class:"prism-editor-wrapper"},[this.lineNumbers&&n,f])}});function me(e,t){var n,o;const i=[];if(t==="object")for(const s of Object.keys(e)){if(s==="properties")for(const f of Object.keys(e.properties??{}))i.push({key:f}),(n=e.dependencies)!=null&&n[f]&&!Array.isArray(e.dependencies[f])&&i.push({key:`$deps-${f}`}),e.dependentSchemas&&e.dependentSchemas[f]&&i.push({key:`$deps-${f}`});if(s==="patternProperties"&&i.push({key:"$patternProperties"}),s==="allOf"&&(o=e.allOf)!=null&&o.length)for(let f=0;f<e.allOf.length;f++)i.push({key:`$allOf-${f}`});s==="oneOf"&&i.push({key:"$oneOf"}),s==="then"&&e.if&&i.push({key:"$then"}),s==="else"&&e.if&&i.push({key:"$else"})}if(t==="array"&&Array.isArray(e.items))for(let s=0;s<e.items.length;s++)i.push({key:s});return i}function Z(e,t){if(!t)return e;let i=0;return t.map(n=>{if(typeof n=="string"){const o=e.find(s=>s.key===n);if(!o)throw new Error(`unknown child "${n}"`);return o}else if(n.if&&(n.if=D(n.if)),typeof n.cols=="number"&&(n.cols={sm:n.cols}),typeof n.cols=="object"&&n.cols.xs===void 0&&(n.cols.xs=12),n.key){if(!e.find(s=>s.key===n.key))throw new Error(`unknown child "${n.key}"`);return n}else{const o=n;return xe(o)&&(o.comp||(o.comp="section"),o.children=Z(e,o.children)),"key"in n||(o.key=`$comp-${i}`,i++),o}})}function et(e,t,i,n){const o=i&&["string","integer","number"].includes(i);if(n==="oneOf")return"one-of-select";if(n==="patternProperties")return"list";if(o&&t.enum)return t.enum.length>20?"autocomplete":"select";if(o&&t.oneOf)return t.oneOf.length>20?"autocomplete":"select";if(o&&t.examples||o&&t.anyOf&&t.anyOf.length&&Object.keys(t.anyOf[t.anyOf.length-1]).length===0)return i==="string"?"combobox":"number-combobox";if(i==="string"&&e.separator)return"combobox";if(e.items)return e.items.length>20?"autocomplete":"select";if(e.getItems)return $e(e.getItems)&&(e.getItems.qSearchParam||typeof e.getItems.url=="string"&&e.getItems.url.includes("{q}")||typeof e.getItems.url=="object"&&typeof e.getItems.url.expr=="string"&&e.getItems.url.expr.includes("{q}"))?"autocomplete":"select";if(i==="array"&&t.items){const s=["string","integer","number"].includes(t.items.type);if(s&&(t.items.enum||t.items.oneOf))return(t.items.enum||t.items.oneOf).length>20?"autocomplete":"select";if(s&&t.items.examples||s&&t.items.anyOf&&t.items.anyOf.length&&Object.keys(t.items.anyOf[t.items.anyOf.length-1]).length===0||s&&!t.items.layout&&!["date","date-time","time"].includes(t.items.format))return t.items.type==="string"?"combobox":"number-combobox"}if(i==="object")return"section";if(i==="array")return Array.isArray(t.items)?"section":"list";if(i==="string")return t.format==="date"?"date-picker":t.format==="date-time"?"date-time-picker":t.format==="time"?"time-picker":"text-field";if(i==="integer"||i==="number")return"number-field";if(i==="boolean")return"checkbox";throw new Error("failed to calculate default component for schema fragment")}function tt(e){return Ae(e)?{...e}:Le(e)?{comp:e}:Te(e)?{children:e}:{}}function it(e){const t=typeof e=="string"?e:e.expr;return!t.includes("rootData.")&&!t.includes("rootData[")&&!t.includes("parent.data")&&!t.includes("parent.parent")}function D(e,t="js-eval",i="value"){const n=it(e);return typeof e=="string"?{type:t,expr:e,pure:n,dataAlias:i}:{pure:n,type:t,dataAlias:i,...e}}function he(e){if(!e)return null;const{type:t}=T(e),i=t&&["string","integer","number"].includes(t);if(e.enum&&i)return e.enum.map(n=>({key:n+"",title:n+"",value:n}));if(e.examples&&i)return e.examples.map(n=>({key:n+"",title:n+"",value:n}));if(e.anyOf&&i&&e.anyOf.length&&Object.keys(e.anyOf[e.anyOf.length-1]).length===0){const n=e.anyOf.slice(0,-1);if(!n.find(o=>!("const"in o)))return n.map(o=>({...o,key:o.const+"",title:(o.title??o.const)+"",value:o.const}))}return e.oneOf&&i&&!e.oneOf.find(n=>!("const"in n))?e.oneOf.map(n=>({...n,key:n.const+"",title:(n.title??n.const)+"",value:n.const})):null}const T=e=>{if(Array.isArray(e.type)&&e.type.length===2&&e.type.includes("null"))return{type:e.type.find(i=>i!=="null"),nullable:!0};if(!e.type&&(e.properties||e.patternProperties))return{type:"object",nullable:!1};if(!e.type){const t=[];for(const i of["allOf","anyOf","oneOf"])if(e[i])for(const n of e[i]){const{type:o}=T(n);o&&!t.includes(o)&&t.push(o)}if(t.length===1)return{type:t[0],nullable:!1}}return{type:e.type,nullable:!1}};function ge(e,t,i,n,o,s,f,u,a,c){if("const"in i)return{comp:"none"};if(!n)return{comp:"none"};const r=tt(t);if(n==="array"&&!i.items&&r.comp!=="file-input")return{comp:"none"};r.comp||(r.comp=et(r,i,n,c));const p=f[r.comp];if(!p)throw new Error(`unknown component "${r.comp}"`);if(r.comp==="none")return{comp:"none"};if(o&&(r.nullable=o),p.composite){const d=Z(me(i,n),r.children);r.children=d,"title"in r||d.length===1&&d[0].key==="$patternProperties"||(r.title=i.title??null)}else if(r.comp==="list")if(c==="patternProperties"){if(!("title"in r)){const O=Z(me(i,n),r.children);O.length===1&&O[0].key==="$patternProperties"&&(r.title=i.title??null)}let d=!1;for(const O of Object.values(i.patternProperties??{})){const{type:v}=T(O);v==="object"&&(d=!0)}r.listEditMode=r.listEditMode??(d?"inline-single":"inline"),r.listActions=r.listActions??["add","edit","delete"],r.indexed=Object.keys(i.patternProperties??{})}else{"title"in r||(r.title=i.title??""+e);const{type:d}=T(i.items);r.listEditMode=r.listEditMode??(d==="object"?"inline-single":"inline"),r.listActions=r.listActions??["add","edit","delete","duplicate","sort"]}else!("label"in r)&&!c&&(r.label=i.title??""+e);if(p.itemsBased&&!r.items){let d;n==="array"?d=he(i.items):d=he(i),d&&(r.getItems&&fe(r.getItems)?(r.getItems.expr=JSON.stringify(d),r.getItems.immutable=!0):r.getItems={expr:JSON.stringify(d),immutable:!0})}p.multipleCompat&&(n==="array"||r.separator)&&(r.multiple=!0),r.comp==="date-picker"&&(i.format==="date"&&(r.format="date"),i.format==="date-time"&&(r.format="date-time")),["date-picker","date-time-picker","time-picker"].includes(r.comp)&&("formatMinimum"in i&&(r.min=r.min??i.formatMinimum),"formatMaximum"in i&&(r.max=r.max??i.formatMaximum)),["number-field","slider"].includes(r.comp)&&(n==="integer"&&(r.step=r.step??1),"minimum"in i&&(r.min=r.min??i.minimum),"maximum"in i&&(r.max=r.max??i.maximum)),r.if&&(r.if=D(r.if)),!r.defaultData&&i.type==="string"&&s.split("#").pop()===""&&(r.defaultData="");for(const d of a)d in r&&(r.options=r.options??{},r.options[d]=r[d],delete r[d]);if(i.readOnly&&(r.options=r.options??{},"readOnly"in r.options||(r.options.readOnly=!0)),r.getOptions!==void 0&&(r.getOptions=D(r.getOptions)),r.getDefaultData!==void 0&&(r.getDefaultData=D(r.getDefaultData)),r.getConstData!==void 0&&(r.getConstData=D(r.getConstData)),r.transformData!==void 0&&(r.transformData=D(r.transformData)),r.getProps!==void 0&&(r.getProps=D(r.getProps)),r.getItems&&_e(r.getItems)&&(r.getItems=D(r.getItems)),r.getItems&&fe(r.getItems)){if(n==="object"&&(r.getItems.returnObjects=!0),n==="array"){const{type:d}=T(i.items);d==="object"&&(r.getItems.returnObjects=!0)}r.getItems.itemTitle&&(r.getItems.itemTitle=D(r.getItems.itemTitle,"js-eval","item")),r.getItems.itemKey&&(r.getItems.itemKey=D(r.getItems.itemKey,"js-eval","item")),r.getItems.itemValue&&(r.getItems.itemValue=D(r.getItems.itemValue,"js-eval","item")),r.getItems.itemIcon&&(r.getItems.itemIcon=D(r.getItems.itemIcon,"js-eval","item")),r.getItems.itemsResults&&(r.getItems.itemsResults=D(r.getItems.itemsResults,"js-eval","body"))}if(r.getItems&&$e(r.getItems)&&(r.getItems.url=D(r.getItems.url,"js-tpl")),r.items&&(r.items=r.items.map(d=>{if(["string","integer","number"].includes(typeof d))return{title:d+"",key:d+"",value:d};if(typeof d=="object")return{key:(d.key??d.value)+"",title:(d.title??d.key??d.value)+"",value:d.value??d.key};throw new Error(`bad item for select: ${JSON.stringify(d)}`)})),!r.comp&&(r.items??r.getItems)&&(r.comp="select"),r.comp==="date-picker"&&i.format==="date-time"&&(r.format="date-time"),r.slots)for(const[d,O]of Object.entries(r.slots)){typeof O=="string"&&(["before","after"].includes(d)?r.slots[d]={markdown:O}:r.slots[d]={name:O});const v=r.slots[d];Se(v)&&(v.markdown=u(v.markdown).trim())}i.description&&(p.composite&&r.title?r.subtitle===void 0&&(r.subtitle=i.description):r.help===void 0&&c!=="oneOf"&&(r.help=i.description)),r.help&&(r.help=u(r.help).trim()),r.subtitle&&(r.subtitle=u(r.subtitle).trim()),typeof r.cols=="number"&&(r.cols={xs:r.cols}),typeof r.cols=="object"&&r.cols.xs===void 0&&(r.cols.xs=12);const b=Ke(p);if(!b(r)){const d=new Error(`component "${p.name}" validation errors`);throw d.cause=X(b.errors),d}return r}function nt(e,t,i,n,o,s,f,u,a,c){if(Ce(t)){const r=[],p=[...t.switch];p.find(b=>!b.if)||p.push({});for(let b=0;b<p.length;b++){const d=p[b],O=ge(e,d,i,n,o,s,f,u,a,c);r.push(O)}return{switch:r}}else return ge(e,t,i,n,o,s,f,u,a,c)}function W(e,t){return e.keyword==="errorMessage"&&(e=e.params.errors[0]),t(e)}function X(e){if(!e)return[];const t=e.filter(n=>W(n,o=>o.keyword==="anyOf"||o.keyword==="oneOf"));for(const n of t)e.find(s=>W(s,f=>f.instancePath===n.instancePath&&f.keyword!=="type"))&&(e=e.filter(s=>W(s,f=>f.instancePath!==n.instancePath||f.keyword!=="type")));const i=[];for(const n of e){let o=n.instancePath+" "+(n.message??n.keyword);n.params&&(o+=" "+JSON.stringify(n.params)),i.push(o)}return i}const be=["readOnly","summary","titleDepth","density","removeAdditional","validateOn","updateOne","debounceInputMs","initialValidation","defaultOn","readOnlyPropertiesMode"];function ve(e,t,i,n,o,s,f,u,a){u=u?u.concat(be):be;let c;if(a==="oneOf"?c=t.oneOfLayout??{}:a==="patternProperties"?c=t.patternPropertiesLayout??{}:c=t.layout??{},!se(c)){const p=new Error("layout keyword validation errors at path");throw p.cause=X(se.errors),p}const r=nt(e,c,t,i,n,o,s,f,u,a);if(!le(r)){const p=new Error("normalized layout validation errors at path");throw p.cause=X(le.errors),p}return r}function U(e,t,i,n,o=c=>c,s,f,u,a){const{type:c,nullable:r}=u?{type:u,nullable:a??!1}:T(t),p=[];try{return{layout:ve(e,t,c,r,i,n,o,s,f),errors:p}}catch(b){try{return p.push(b.message),b.cause&&Array.isArray(b.cause)&&p.push(...b.cause),p.push("failed to normalize layout, use default component"),{layout:ve(e,{...t,layout:{}},c,r,i,n,o,s,f),errors:p}}catch(d){return p.push(d.message),d.cause&&Array.isArray(d.cause)&&p.push(...d.cause),p.push("failed to produce default layout, hide this fragment"),{layout:{comp:"none"},errors:p}}}}function Oe(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}function rt(){return t;function e(i,n){const o=Object.keys(i),s=new Array(o.length);for(let f=0;f<o.length;f++){const u=o[f],a=i[u];typeof a!="object"||a===null?s[u]=a:a instanceof Date?s[u]=new Date(a):ArrayBuffer.isView(a)?s[u]=Oe(a):s[u]=n(a)}return s}function t(i){if(typeof i!="object"||i===null)return i;if(i instanceof Date)return new Date(i);if(Array.isArray(i))return e(i,t);if(i instanceof Map)return new Map(e(Array.from(i),t));if(i instanceof Set)return new Set(e(Array.from(i),t));const n={};for(const o in i){if(Object.hasOwnProperty.call(i,o)===!1)continue;const s=i[o];typeof s!="object"||s===null?n[o]=s:s instanceof Date?n[o]=new Date(s):s instanceof Map?n[o]=new Map(e(Array.from(s),t)):s instanceof Set?n[o]=new Set(e(Array.from(s),t)):ArrayBuffer.isView(s)?n[o]=Oe(s):n[o]=t(s)}return n}}const q=rt(),ot=(e,t)=>(i,n)=>{var c;const o=t.opts.uriResolver.resolve(i,n),[s,f]=o.split("#");if(e[s]=e[s]??((c=t.getSchema(s))==null?void 0:c.schema),!e[s])throw new Error(`reference not found ${s}`);if(!f)return[e[s],s,o];const u=f.split("/").filter(r=>!!r),{value:a}=u.reduce((r,p)=>{if(r.path.push(p),!(p in r.value))throw new Error(`reference not found ${s}#${r.path.join("/")}`);return r.value=r.value[p],r},{path:[],value:e[s]});return[a,s,o]};function st(e,t,i="en",n="en"){if(!e.$id)throw new Error("missing schema id");const o=ot({[e.$id]:e},t),s=[];return J(e,e.$id,o,i,n,s),o}const J=(e,t,i,n,o,s)=>{if(!s.includes(e)){s.push(e);for(const f of Object.keys(e))if(e[f]&&typeof e[f]=="object")if("$ref"in e[f]){const u=e[f].$ref.replace("~$locale~",n),a=e[f].$ref.replace("~$locale~",o);let c,r;try{[c,r]=i(t,u),e[f].$ref=u}catch{[c,r]=i(t,a),e[f].$ref=a}typeof c=="string"?e[f]=c:J(c,r,i,n,o,s)}else J(e[f],t,i,n,o,s)}};function lt(e,t,i){let n=null;if(e.items&&e.items.$ref){const[o]=i(t,e.items.$ref);n=n??q(e),n.items={...o,...e.items}}if(e.properties){for(const o in e.properties)if(e.properties[o].$ref){const[s]=i(t,e.properties[o].$ref);n=n??q(e),n.properties[o]={...s,...e.properties[o]}}}if(e.oneOf){for(let o=0;o<e.oneOf.length;o++)if(e.oneOf[o].$ref){const[s]=i(t,e.oneOf[o].$ref);n=n??q(e),n.oneOf[o]={...s,...e.oneOf[o]}}}if(e.anyOf){for(let o=0;o<e.anyOf.length;o++)if(e.anyOf[o].$ref){const[s]=i(t,e.anyOf[o].$ref);n=n??q(e),n.anyOf[o]={...s,...e.anyOf[o]}}}if(e.allOf){for(let o=0;o<e.allOf.length;o++)if(e.allOf[o].$ref){const[s]=i(t,e.allOf[o].$ref);n=n??q(e),n.allOf[o]={...s,...e.allOf[o]}}}return n??e}function L(e,t,i,n,o,s,f,u,a,c,r,p,b,d,O,v){var x,F,ee,te,ie,ne,re,oe;let j=t,y=e,$=p,S;e.__pointer=p,y.$ref&&([S,j,$]=n(t,y.$ref),S.__pointer=$,y={...e,...S},delete y.$ref);const V=lt(y,j,n);let{type:P,nullable:_}=T(V);if(v&&(P=v),e.errorMessage=e.errorMessage??{},!a[p]){const l=U(r,V,p,i.components,i.markdown,i.optionsKeys,void 0,P,_);a[p]=l.layout,l.errors.length&&(u[p.replace("_jl#","/")]=l.errors)}const K=a[p];let M=!O;const E=(l,g)=>{g.pure||(M=!1);const h=l.findIndex(k=>k.type===g.type&&k.expr===g.expr);h!==-1?g.ref=h:(g.ref=l.length,l.push(g))},R=l=>{if(l.if&&E(c,l.if),Be(l))for(const g of l.children)R(g)},C=H(K)?K.switch:[K];for(const l of C){if(l.if&&E(c,l.if),ue(l,i.components))for(const h of l.children)R(h);y.const!==void 0&&l.constData===void 0&&(l.constData=y.const),l.constData!==void 0&&!l.getConstData&&(l.getConstData={type:"js-eval",expr:"layout.constData",pure:!0,dataAlias:"value"}),l.getConstData&&E(c,l.getConstData);let g;"default"in y?g=y.default:b&&(_?g=null:P==="object"&&ue(l,i.components)?g={}:P==="array"&&(g=[])),g!==void 0&&l.defaultData===void 0&&(l.defaultData=g),l.defaultData!==void 0&&!l.getDefaultData&&(l.getDefaultData={type:"js-eval",expr:"layout.defaultData",pure:!0,dataAlias:"value"}),l.getDefaultData&&E(c,l.getDefaultData),l.options!==void 0&&!l.getOptions&&(l.getOptions={type:"js-eval",expr:"layout.options",pure:!0,dataAlias:"value"}),l.getOptions&&E(c,l.getOptions),l.props!==void 0&&!l.getProps&&(l.getProps={type:"js-eval",expr:"layout.props",pure:!0,dataAlias:"value"}),l.getProps&&E(c,l.getProps),l.transformData&&E(c,l.transformData),Me(l,i.components)&&l.getItems&&(qe(l.getItems)&&E(c,l.getItems),Re(l.getItems)&&E(c,l.getItems.url),l.getItems.itemTitle&&E(c,l.getItems.itemTitle),l.getItems.itemKey&&E(c,l.getItems.itemKey),l.getItems.itemValue&&E(c,l.getItems.itemValue),l.getItems.itemIcon&&E(c,l.getItems.itemIcon),l.getItems.itemsResults&&E(c,l.getItems.itemsResults))}const m={key:r??"",pointer:p,refPointer:$,pure:M,propertyKeys:[],roPropertyKeys:[],nullable:_,required:b&&!_};if(d){if(H(K))throw new Error("Switch struct not allowed in conditional schema");m.condition={type:"js-eval",expr:d,pure:!0,dataAlias:"value"},E(c,m.condition)}if(y.oneOf&&(e.errorMessage.oneOf=i.messages.errorOneOf),P==="object"){if(y.properties){m.children=m.children??[];for(const l of Object.keys(y.properties)){m.propertyKeys.push(l),y.properties[l].readOnly&&m.roPropertyKeys.push(l);const g=y.dependentRequired&&Object.values(y.dependentRequired).some(k=>k.includes(l)),h=`${$}/properties/${l}`;if(s[h]||(s[h]="recursing",s[h]=L(y.properties[l],j,i,n,o,s,f,u,a,c,l,h,(x=y.required)==null?void 0:x.includes(l),void 0,g)),m.children.push(h),(F=y.dependentSchemas)!=null&&F[l]||(ee=y.dependencies)!=null&&ee[l]&&!Array.isArray(y.dependencies[l])){const k=((te=y.dependentSchemas)==null?void 0:te[l])??y.dependencies[l],I=(ie=y.dependentSchemas)!=null&&ie[l]?`${$}/dependentSchemas/${l}`:`${$}/dependencies/${l}`;s[I]||(s[I]="recursing",s[I]=L(k,j,i,n,o,s,f,u,a,c,`$deps-${l}`,I,!1,`data["${l}"] !== undefined`,void 0,"object")),m.children.push(I)}}}if(y.allOf)for(let l=0;l<y.allOf.length;l++){const g=`${$}/allOf/${l}`;s[g]||(s[g]="recursing",s[g]=L(y.allOf[l],j,i,n,o,s,f,u,a,c,`$allOf-${l}`,g,!1,void 0,void 0,"object")),m.propertyKeys=m.propertyKeys.concat(s[g].propertyKeys),m.roPropertyKeys=m.roPropertyKeys.concat(s[g].roPropertyKeys),m.children=m.children??[],m.children.push(g)}if(y.oneOf){const l=`${p}/oneOf`;if(!a[l]){const h=U("",y,l,i.components,i.markdown,i.optionsKeys,"oneOf",P,_);a[l]=h.layout,h.errors.length&&(u[l.replace("_jl#","/")]=h.errors)}const g=[];for(let h=0;h<y.oneOf.length;h++){y.oneOf[h].type||(y.oneOf[h].type=P);const k=y.oneOf[h].title??`option ${h}`;delete y.oneOf[h].title;const I=`${l}/${h}`;o[I]||(o[I]="recursing",o[I]=G(y.oneOf[h],j,i,n,o,s,f,u,a,c,I,k)),g.push(I)}s[l]||(s[l]={key:"$oneOf",pointer:l,refPointer:l,childrenTrees:g,pure:!g.some(h=>{var k;return!s[(k=o[h])==null?void 0:k.root].pure}),propertyKeys:[],roPropertyKeys:[]}),m.children=m.children??[],m.children.push(l)}if(y.patternProperties){const l=`${p}/patternProperties`;if(!a[l]){const h=U("",y,l,i.components,i.markdown,i.optionsKeys,"patternProperties",P,_);a[l]=h.layout,h.errors.length&&(u[l.replace("_jl#","/")]=h.errors)}const g=[];for(const h of Object.keys(y.patternProperties)){const k=`${l}/${h}`;if(!o[k]){o[k]="recursing",o[k]=G(y.patternProperties[h],j,i,n,o,s,f,u,a,c,k,"pattern "+h);const I=a[s[o[k].root].pointer];if(H(I))for(const Ie of I.switch)Ie.nullable=!0;else I.nullable=!0}g.push(k)}s[l]||(s[l]={key:"$patternProperties",pointer:l,refPointer:l,childrenTrees:g,pure:!g.some(h=>{var k;return!s[(k=o[h])==null?void 0:k.root].pure}),propertyKeys:[],roPropertyKeys:[]}),m.children=m.children??[],m.children.push(l)}if(y.if){if(f.push(`${p}/if`),y.then){const l=`${$}/then`;s[l]||(s[l]="recursing",s[l]=L(y.then,j,i,n,o,s,f,u,a,c,"$then",l,!1,`validates["${p}/if"](data)`,void 0,"object")),m.children=m.children??[],m.children.push(l)}if(y.else){const l=`${$}/else`;s[l]||(s[l]="recursing",s[l]=L(y.else,j,i,n,o,s,f,u,a,c,"$else",l,!1,`!validates["${p}/if"](data)`,void 0,"object")),m.children=m.children??[],m.children.push(l)}}for(const l of m.propertyKeys)(ne=y==null?void 0:y.required)!=null&&ne.includes(l)&&(e.errorMessage.required=e.errorMessage.required??{},e.errorMessage.required[l]=i.messages.errorRequired),y.dependentRequired&&Object.keys(y.dependentRequired).includes(l)&&(e.errorMessage.dependentRequired=i.messages.errorRequired)}if(P==="array"&&y.items)if(Array.isArray(y.items)){m.children=m.children??[];for(let l=0;l<y.items.length;l++){const g=y.items[l],h=`${$}/items/${l}`;s[h]||(s[h]="recursing",s[h]=L(g,j,i,n,o,s,f,u,a,c,l,h,!0)),m.children.push(h)}}else{const l=`${p}/items`;o[l]||(o[l]="recursing",o[l]=G(y.items,j,i,n,o,s,f,u,a,c,l,y.items.title)),m.childrenTrees=[l];const g=a[s[o[l].root].pointer];if(H(g))for(const h of g.switch)h.nullable=!0;else g.nullable=!0}for(const l of m.children||[])s[l].pure||(m.pure=!1);for(const l of m.childrenTrees||[])(oe=s[(re=o[l])==null?void 0:re.root])!=null&&oe.pure||(m.pure=!1);return m}function G(e,t,i,n,o,s,f,u,a,c,r,p){return s[r]||(s[r]="recursing",s[r]=L(e,t,i,n,o,s,f,u,a,c,"",r,!0),f.push(s[r].refPointer)),{title:p,root:r,refPointer:s[r].refPointer}}const N=(e,t,i="en")=>{for(const[n,o]of Object.entries(e)){if(n.startsWith("x-i18n-")){typeof o!="object"&&console.error(`i18n property ${n} should be an object`);const s=n.replace("x-i18n-","");e[s]=o[t]??o[i]??e[s],delete e[n]}else if(Array.isArray(o))for(const s of o)N(s,t,i);typeof o=="object"&&N(o,t,i)}},ft={errorOneOf:"choisissez une valeur",errorRequired:"information obligatoire",addItem:"Ajouter un élément",delete:"Supprimer",edit:"Éditer",close:"Fermer",duplicate:"Dupliquer",sort:"Trier",up:"Décaler vers le haut",down:"Décaler vers le bas",showHelp:"Afficher un message d'aide",mdeLink1:"[titre du lien",mdeLink2:"](adresse du lien)",mdeImg1:"![](",mdeImg2:"adresse de l'image)",mdeTable1:"",mdeTable2:`

| Colonne 1 | Colonne 2 | Colonne 3 |
| -------- | -------- | -------- |
| Texte     | Texte     | Texte     |

`,bold:"Gras",italic:"Italique",heading:"Titre",quote:"Citation",unorderedList:"Liste à puce",orderedList:"Liste numérotée",createLink:"Créer un lien",insertImage:"Insérer une image",createTable:"Créer un tableau",preview:"Preview",mdeGuide:"Syntax documentation",undo:"Défaire",redo:"Refaire"},ut={errorOneOf:"Kies er een",errorRequired:"benodigde informatie",addItem:"Item toevoegen",delete:"Verwijderen",edit:"Bewerken",close:"Sluiten",duplicate:"Verveelvoudigen",sort:"Sorteren",up:"Omhoog verplaatsen",down:"Omlaag verplaatsen",showHelp:"Toon helpbericht",mdeLink1:"[Link titel",mdeLink2:"](link url)",mdeImg1:"![](",mdeImg2:"afbeelding url)",mdeTable1:"",mdeTable2:`

| Kolom 1  | Kolom 2  | Kolom 3  |
| -------- | -------- | -------- |
| Tekst    | Tekst    | Tekst    |

`,bold:"Vet",italic:"Cursief",heading:"Titel",quote:"Citaat",unorderedList:"Ongeordende lijst",orderedList:"Geordende lijst",createLink:"Maak een koppeling",insertImage:"Afbeelding invoegen",createTable:"Tabel aanmaken",preview:"Voorbeeld",mdeGuide:"Documentatie over syntaxis",undo:"Ongedaan maken",redo:"Opnieuw"},at={errorOneOf:"Wählen Sie eine Option",errorRequired:"Erforderliche Information",addItem:"Element hinzufügen",delete:"Löschen",edit:"Bearbeiten",close:"Schließen",duplicate:"Duplizieren",sort:"Sortieren",up:"Nach oben verschieben",down:"Nach unten verschieben",showHelp:"Hilfemeldung anzeigen",mdeLink1:"[Link-Titel",mdeLink2:"](Link-URL)",mdeImg1:"![](",mdeImg2:"Bild-URL)",mdeTable1:"",mdeTable2:`

| Spalte 1 | Spalte 2 | Spalte 3 |
| -------- | -------- | -------- |
| Text     | Text     | Text     |

`,bold:"Fett",italic:"Kursiv",heading:"Titel",quote:"Zitat",unorderedList:"Ungeordnete Liste",orderedList:"Geordnete Liste",createLink:"Link erstellen",insertImage:"Bild einfügen",createTable:"Tabelle erstellen",preview:"Vorschau",mdeGuide:"Syntax-Dokumentation",undo:"Rückgängig",redo:"Wiederholen"},je={en:ze,fr:ft,nl:ut,de:at};function ct(e=[],t=[]){if(!e||!t)return e===t;if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const dt=Ge,pt=e=>{let t=e.ajv;if(!t){const u={allErrors:!0,strict:!1,verbose:!0};e.ajvOptions&&Object.assign(u,e.ajvOptions),e.code&&(u.code={source:!0,esm:!0,lines:!0});const a=new dt(u);He.default(a),Ye.default(a),t=a}t.addKeyword("layout");let i=e.markdown;i||(i=a=>we.parse(a,e.markedOptions));const n=e.defaultLocale||"en",o=e.locale||n,s={...je[o]||je[n]};e.messages&&Object.assign(s,e.messages);const f=Ve.reduce((u,a)=>(u[a.name]=a,u),{});if(e.components){for(const u of Object.keys(e.components))f[u]={...e.components[u],name:u};Object.assign(f,e.components)}return{ajv:t,code:!1,markdown:i,optionsKeys:[],...e,locale:o,defaultLocale:n,messages:s,components:f,xI18n:!!e.xI18n}};w((e,t)=>{for(const i of["ajv","ajvOptions","code","markdown","markedOptions","xI18n","locale","defaultLocale","messages","optionsKeys","components"])if(i in t){if(i==="components"&&ct(Object.keys(e.components??[]),Object.keys(t.components??[])))continue;e[i]=t[i]}else delete e[i]});const ke=Pe;function Et(e,t={}){const i=pt(t),n=q(e);n.$id=n.$id??"_jl";const o=st(n,i.ajv,i.locale,i.defaultLocale);i.xI18n&&N(n,i.locale,i.defaultLocale);const s=[],f={},u=[],a={},c={},r={},p=`${n.$id}#`;c[p]="recursing",c[p]=G(n,n.$id,i,o,c,r,s,a,f,u,p,"main"),i.ajv.addSchema(n);const b=i.ajv.opts.uriResolver,d={};for(const v of s){const j=b.resolve(n.$id,v);d[v]=i.ajv.compile({$ref:j})}const O=[];for(const v of u){const j=v.pure?["data",v.dataAlias,"options","context","display","layout","readOnly","summary","validates"]:["data",v.dataAlias,"options","context","display","layout","readOnly","summary","validates","rootData","parent"];v.type==="js-fn"&&O.push(new Function(...j,v.expr)),v.type==="js-eval"&&O.push(new Function(...j,"return ("+v.expr+")")),v.type==="js-tpl"&&O.push(new Function(...j,"return `"+v.expr+"`"))}return Object.keys(a).length&&console.error("JSON layout encountered some validation errors:",a),{options:i,schema:n,mainTree:p,skeletonTrees:c,skeletonNodes:r,validates:d,validationErrors:a,normalizedLayouts:f,expressions:O,locale:i.locale,messages:i.messages,components:i.components,localizeErrors:ke[i.locale]||ke.en}}const Q={};function yt(e){return Q[e]=Q[e]??new RegExp(e),Q[e]}Ee("jl:state-node");w((e,t,i,n,o,s,f,u,a,c,r,p,b,d,O,v,j,y)=>{if(e.messages=u.messages?mt(e.messages||{},u.messages,d):d.messages,e.key=t,e.fullKey=i,e.parentFullKey=n,e.dataPath=o,e.parentDataPath=s,e.skeleton=f,e.layout=u,e.width=a,e.options=d,e.cols=c,e.data=r,e.error=p,e.itemsCacheKey=j,e.childError=y&&y.findIndex($=>$.error||$.childError)!==-1,e.validated=b,O)e.autofocus=!0,delete e.autofocusChild;else{delete e.autofocus;const $=y==null?void 0:y.find(S=>S.autofocus);$?e.autofocusChild=$.key:delete e.autofocusChild}e.props=v,e.children=y});const mt=w((e,t,i)=>{Object.assign(e,i.messages,t)});w((e,t)=>{for(const i of t){const n=i.key;i.data===void 0?delete e[n]:e[n]=i.data}for(;e.length&&e[e.length-1]===void 0;)e.pop()});w((e,t,i,n,o)=>{for(let s=0;s<e.length;s++)e[s]instanceof File||(e[s]=ht(e[s],t+"/"+s,void 0,i,n,o))});const ht=w((e,t,i,n,o,s)=>{if(o&&(o.length||i!=null&&i.length))for(const f of Object.keys(e))o.includes(f)||delete e[f];if(s)for(const f of s)delete e[f];if(i)for(const f of i)if(t===f.dataPath){if(f.data===void 0)continue;Object.assign(e,f.data)}else f.data===void 0?delete e[f.key]:e[f.key]=f.data;if(n)for(const f of n)f.instancePath===t&&(f.keyword==="additionalProperties"&&delete e[f.params.additionalProperty],f.keyword==="unevaluatedProperties"&&delete e[f.params.unevaluatedProperty])});w((e,t,i,n)=>{for(const o of Object.keys(t))i.includes(o)||n.some(s=>!!o.match(yt(s)))&&(e[o]=t[o]);for(const o of Object.keys(e))o in t||delete e[o]});w((e,t,i={})=>{for(const n in t)e[n]=i[n]??t[n];for(const n in i)e[n]=i[n];for(const n in e)!(n in t)&&!(n in i)&&delete e[n]});w(e=>{e.readOnly=!0,e.summary=!0});w((e,t)=>{t.title&&e.titleDepth<6&&(e.titleDepth+=1)});w((e,t,i)=>{if(t.dataPath===t.parentDataPath){if(Object.assign(e,i),t.data&&typeof i=="object"&&i!==null)for(const n of Object.keys(t.data))n in i||delete e[n]}else e[t.key]=i});w((e,t,i)=>{e.root=t,e.valid=i});Ee("jl:data-binding");export{$t as P,Et as c};
