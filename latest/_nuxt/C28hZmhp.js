var Zt=Object.defineProperty;var Jt=(e,t,r)=>t in e?Zt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var O=(e,t,r)=>Jt(e,typeof t!="symbol"?t+"":t,r);import{c as St,a as Qt,E as Yt,F as Xt,s as er,u as tr,G as rr,w as At,x as zt,y as $t,H as ir,t as nr,z as sr,I as ar}from"./DC8JFaVd.js";import{g as kt}from"./BosuxZz1.js";import{aa as or,o as Et,Y as Ot,a2 as ur,a3 as lr,a4 as Ze,j as ge,r as ye,V as ae,a7 as Pt,M as fr,a6 as mt,a8 as pt,bt as cr,aU as dr,ar as Y}from"./D_Mb9exR.js";var Ke={exports:{}},Dt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(y,b){return{validate:y,compare:b}}e.fullFormats={date:t(f,s),time:t(a(!0),c),"date-time":t(d(!0),p),"iso-time":t(a(),u),"iso-date-time":t(d(),h),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:g,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:we,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:A,int32:{type:"number",validate:T},int64:{type:"number",validate:M},float:{type:"number",validate:m},double:{type:"number",validate:m},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,s),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,c),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,p),"iso-time":t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,u),"iso-date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,h),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);function r(y){return y%4===0&&(y%100!==0||y%400===0)}const i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,n=[0,31,28,31,30,31,30,31,31,30,31,30,31];function f(y){const b=i.exec(y);if(!b)return!1;const $=+b[1],I=+b[2],j=+b[3];return I>=1&&I<=12&&j>=1&&j<=(I===2&&r($)?29:n[I])}function s(y,b){if(y&&b)return y>b?1:y<b?-1:0}const l=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function a(y){return function($){const I=l.exec($);if(!I)return!1;const j=+I[1],J=+I[2],Z=+I[3],be=I[4],fe=I[5]==="-"?-1:1,ce=+(I[6]||0),de=+(I[7]||0);if(ce>23||de>59||y&&!be)return!1;if(j<=23&&J<=59&&Z<60)return!0;const ie=J-de*fe,he=j-ce*fe-(ie<0?1:0);return(he===23||he===-1)&&(ie===59||ie===-1)&&Z<61}}function c(y,b){if(!(y&&b))return;const $=new Date("2020-01-01T"+y).valueOf(),I=new Date("2020-01-01T"+b).valueOf();if($&&I)return $-I}function u(y,b){if(!(y&&b))return;const $=l.exec(y),I=l.exec(b);if($&&I)return y=$[1]+$[2]+$[3],b=I[1]+I[2]+I[3],y>b?1:y<b?-1:0}const o=/t|\s/i;function d(y){const b=a(y);return function(I){const j=I.split(o);return j.length===2&&f(j[0])&&b(j[1])}}function p(y,b){if(!(y&&b))return;const $=new Date(y).valueOf(),I=new Date(b).valueOf();if($&&I)return $-I}function h(y,b){if(!(y&&b))return;const[$,I]=y.split(o),[j,J]=b.split(o),Z=s($,j);if(Z!==void 0)return Z||c(I,J)}const v=/\/|:/,z=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function g(y){return v.test(y)&&z.test(y)}const w=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function A(y){return w.lastIndex=0,w.test(y)}const S=-2147483648,C=2**31-1;function T(y){return Number.isInteger(y)&&y<=C&&y>=S}function M(y){return Number.isInteger(y)}function m(){return!0}const k=/[^\\]\\Z/;function we(y){if(k.test(y))return!1;try{return new RegExp(y),!0}catch{return!1}}})(Dt);var xt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=Qt,r=St,i=r.operators,n={formatMaximum:{okStr:"<=",ok:i.LTE,fail:i.GT},formatMinimum:{okStr:">=",ok:i.GTE,fail:i.LT},formatExclusiveMaximum:{okStr:"<",ok:i.LT,fail:i.GTE},formatExclusiveMinimum:{okStr:">",ok:i.GT,fail:i.LTE}},f={message:({keyword:l,schemaCode:a})=>(0,r.str)`should be ${n[l].okStr} ${a}`,params:({keyword:l,schemaCode:a})=>(0,r._)`{comparison: ${n[l].okStr}, limit: ${a}}`};e.formatLimitDefinition={keyword:Object.keys(n),type:"string",schemaType:"string",$data:!0,error:f,code(l){const{gen:a,data:c,schemaCode:u,keyword:o,it:d}=l,{opts:p,self:h}=d;if(!p.validateFormats)return;const v=new t.KeywordCxt(d,h.RULES.all.format.definition,"format");v.$data?z():g();function z(){const A=a.scopeValue("formats",{ref:h.formats,code:p.code.formats}),S=a.const("fmt",(0,r._)`${A}[${v.schemaCode}]`);l.fail$data((0,r.or)((0,r._)`typeof ${S} != "object"`,(0,r._)`${S} instanceof RegExp`,(0,r._)`typeof ${S}.compare != "function"`,w(S)))}function g(){const A=v.schema,S=h.formats[A];if(!S||S===!0)return;if(typeof S!="object"||S instanceof RegExp||typeof S.compare!="function")throw new Error(`"${o}": format "${A}" does not define "compare" function`);const C=a.scopeValue("formats",{key:A,ref:S,code:p.code.formats?(0,r._)`${p.code.formats}${(0,r.getProperty)(A)}`:void 0});l.fail$data(w(C))}function w(A){return(0,r._)`${A}.compare(${c}, ${u}) ${n[o].fail} 0`}},dependencies:["format"]};const s=l=>(l.addKeyword(e.formatLimitDefinition),l);e.default=s})(xt);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=Dt,i=xt,n=St,f=new n.Name("fullFormats"),s=new n.Name("fastFormats"),l=(c,u={keywords:!0})=>{if(Array.isArray(u))return a(c,u,r.fullFormats,f),c;const[o,d]=u.mode==="fast"?[r.fastFormats,s]:[r.fullFormats,f],p=u.formats||r.formatNames;return a(c,p,o,d),u.keywords&&(0,i.default)(c),c};l.get=(c,u="full")=>{const d=(u==="fast"?r.fastFormats:r.fullFormats)[c];if(!d)throw new Error(`Unknown format "${c}"`);return d};function a(c,u,o,d){var p,h;(p=(h=c.opts.code).formats)!==null&&p!==void 0||(h.formats=(0,n._)`require("ajv-formats/dist/formats").${d}`);for(const v of u)c.addFormat(v,o[v])}e.exports=t=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l})(Ke,Ke.exports);var hr=Ke.exports;const mr=kt(hr);var Mt=Symbol.for("immer-nothing"),gt=Symbol.for("immer-draftable"),L=Symbol.for("immer-state");function B(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ue=Object.getPrototypeOf;function le(e){return!!e&&!!e[L]}function ee(e){var t;return e?jt(e)||Array.isArray(e)||!!e[gt]||!!((t=e.constructor)!=null&&t[gt])||$e(e)||ke(e):!1}var pr=Object.prototype.constructor.toString();function jt(e){if(!e||typeof e!="object")return!1;const t=ue(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===pr}function ve(e,t){ze(e)===0?Object.entries(e).forEach(([r,i])=>{t(r,i,e)}):e.forEach((r,i)=>t(i,r,e))}function ze(e){const t=e[L];return t?t.type_:Array.isArray(e)?1:$e(e)?2:ke(e)?3:0}function Re(e,t){return ze(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Vt(e,t,r){const i=ze(e);i===2?e.set(t,r):i===3?e.add(r):e[t]=r}function gr(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function $e(e){return e instanceof Map}function ke(e){return e instanceof Set}function X(e){return e.copy_||e.base_}function He(e,t){if($e(e))return new Map(e);if(ke(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&jt(e))return ue(e)?{...e}:Object.assign(Object.create(null),e);const r=Object.getOwnPropertyDescriptors(e);delete r[L];let i=Reflect.ownKeys(r);for(let n=0;n<i.length;n++){const f=i[n],s=r[f];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[f]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[f]})}return Object.create(ue(e),r)}function Je(e,t=!1){return Ee(e)||le(e)||!ee(e)||(ze(e)>1&&(e.set=e.add=e.clear=e.delete=yr),Object.freeze(e),t&&ve(e,(r,i)=>Je(i,!0))),e}function yr(){B(2)}function Ee(e){return Object.isFrozen(e)}var vr={};function te(e){const t=vr[e];return t||B(0,e),t}var _e;function Kt(){return _e}function _r(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function yt(e,t){t&&(te("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Le(e){Ue(e),e.drafts_.forEach(Cr),e.drafts_=null}function Ue(e){e===_e&&(_e=e.parent_)}function vt(e){return _e=_r(_e,e)}function Cr(e){const t=e[L];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function _t(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[L].modified_&&(Le(t),B(4)),ee(e)&&(e=Se(t,e),t.parent_||Ae(t,e)),t.patches_&&te("Patches").generateReplacementPatches_(r[L].base_,e,t.patches_,t.inversePatches_)):e=Se(t,r,[]),Le(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Mt?e:void 0}function Se(e,t,r){if(Ee(t))return t;const i=t[L];if(!i)return ve(t,(n,f)=>Ct(e,i,t,n,f,r)),t;if(i.scope_!==e)return t;if(!i.modified_)return Ae(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const n=i.copy_;let f=n,s=!1;i.type_===3&&(f=new Set(n),n.clear(),s=!0),ve(f,(l,a)=>Ct(e,i,n,l,a,r,s)),Ae(e,n,!1),r&&e.patches_&&te("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function Ct(e,t,r,i,n,f,s){if(le(n)){const l=f&&t&&t.type_!==3&&!Re(t.assigned_,i)?f.concat(i):void 0,a=Se(e,n,l);if(Vt(r,i,a),le(a))e.canAutoFreeze_=!1;else return}else s&&r.add(n);if(ee(n)&&!Ee(n)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Se(e,n),(!t||!t.scope_.parent_)&&Ae(e,n)}}function Ae(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Je(t,r)}function wr(e,t){const r=Array.isArray(e),i={type_:r?1:0,scope_:t?t.scope_:Kt(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=i,f=Qe;r&&(n=[i],f=Ce);const{revoke:s,proxy:l}=Proxy.revocable(n,f);return i.draft_=l,i.revoke_=s,l}var Qe={get(e,t){if(t===L)return e;const r=X(e);if(!Re(r,t))return br(e,r,t);const i=r[t];return e.finalized_||!ee(i)?i:i===Pe(e.base_,t)?(De(e),e.copy_[t]=Be(i,e)):i},has(e,t){return t in X(e)},ownKeys(e){return Reflect.ownKeys(X(e))},set(e,t,r){const i=Rt(X(e),t);if(i!=null&&i.set)return i.set.call(e.draft_,r),!0;if(!e.modified_){const n=Pe(X(e),t),f=n==null?void 0:n[L];if(f&&f.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(gr(r,n)&&(r!==void 0||Re(e.base_,t)))return!0;De(e),We(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Pe(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,De(e),We(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=X(e),i=Reflect.getOwnPropertyDescriptor(r,t);return i&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:i.enumerable,value:r[t]}},defineProperty(){B(11)},getPrototypeOf(e){return ue(e.base_)},setPrototypeOf(){B(12)}},Ce={};ve(Qe,(e,t)=>{Ce[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ce.deleteProperty=function(e,t){return Ce.set.call(this,e,t,void 0)};Ce.set=function(e,t,r){return Qe.set.call(this,e[0],t,r,e[0])};function Pe(e,t){const r=e[L];return(r?X(r):e)[t]}function br(e,t,r){var n;const i=Rt(t,r);return i?"value"in i?i.value:(n=i.get)==null?void 0:n.call(e.draft_):void 0}function Rt(e,t){if(!(t in e))return;let r=ue(e);for(;r;){const i=Object.getOwnPropertyDescriptor(r,t);if(i)return i;r=ue(r)}}function We(e){e.modified_||(e.modified_=!0,e.parent_&&We(e.parent_))}function De(e){e.copy_||(e.copy_=He(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Ir=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,i)=>{if(typeof t=="function"&&typeof r!="function"){const f=r;r=t;const s=this;return function(a=f,...c){return s.produce(a,u=>r.call(this,u,...c))}}typeof r!="function"&&B(6),i!==void 0&&typeof i!="function"&&B(7);let n;if(ee(t)){const f=vt(this),s=Be(t,void 0);let l=!0;try{n=r(s),l=!1}finally{l?Le(f):Ue(f)}return yt(f,i),_t(n,f)}else if(!t||typeof t!="object"){if(n=r(t),n===void 0&&(n=t),n===Mt&&(n=void 0),this.autoFreeze_&&Je(n,!0),i){const f=[],s=[];te("Patches").generateReplacementPatches_(t,n,f,s),i(f,s)}return n}else B(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(s,...l)=>this.produceWithPatches(s,a=>t(a,...l));let i,n;return[this.produce(t,r,(s,l)=>{i=s,n=l}),i,n]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ee(e)||B(8),le(e)&&(e=Tr(e));const t=vt(this),r=Be(e,void 0);return r[L].isManual_=!0,Ue(t),r}finishDraft(e,t){const r=e&&e[L];(!r||!r.isManual_)&&B(9);const{scope_:i}=r;return yt(i,t),_t(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}r>-1&&(t=t.slice(r+1));const i=te("Patches").applyPatches_;return le(e)?i(e,t):this.produce(e,n=>i(n,t))}};function Be(e,t){const r=$e(e)?te("MapSet").proxyMap_(e,t):ke(e)?te("MapSet").proxySet_(e,t):wr(e,t);return(t?t.scope_:Kt()).drafts_.push(r),r}function Tr(e){return le(e)||B(10,e),Ht(e)}function Ht(e){if(!ee(e)||Ee(e))return e;const t=e[L];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=He(e,t.scope_.immer_.useStrictShallowCopy_)}else r=He(e,!0);return ve(r,(i,n)=>{Vt(r,i,Ht(n))}),t&&(t.finalized_=!1),r}var U=new Ir,x=U.produce;U.produceWithPatches.bind(U);var Fr=U.setAutoFreeze.bind(U);U.setUseStrictShallowCopy.bind(U);U.applyPatches.bind(U);U.createDraft.bind(U);U.finishDraft.bind(U);const Sr={errorOneOf:"chose one",errorRequired:"required information",addItem:"Add item",delete:"Delete",edit:"Edit",confirm:"Confirm",close:"Close",duplicate:"Duplicate",sort:"Sort",up:"Move up",down:"Move down",showHelp:"Show a help message",mdeLink1:"[Link title",mdeLink2:"](link url)",mdeImg1:"![](",mdeImg2:"image url)",mdeTable1:"",mdeTable2:`

| Column 1 | Column 2 | Column 3 |
| -------- | -------- | -------- |
| Text     | Text     | Text     |

`,bold:"Bold",italic:"Italic",heading:"Title",quote:"Quote",unorderedList:"Unordered list",orderedList:"Ordered list",createLink:"Create a link",insertImage:"Insert an image",createTable:"Create a table",preview:"Aperçu du rendu",mdeGuide:"Documentation de la syntaxe",undo:"Undo",redo:"Redo",default:"default: ",name:"name: ",examples:"Examples: ",deprecated:"Warning, this information is deprecated."},Ar={errorOneOf:"choisissez une valeur",errorRequired:"information obligatoire",addItem:"Ajouter un élément",delete:"Supprimer",edit:"Éditer",confirm:"Confirmer",close:"Fermer",duplicate:"Dupliquer",sort:"Trier",up:"Décaler vers le haut",down:"Décaler vers le bas",showHelp:"Afficher un message d'aide",mdeLink1:"[titre du lien",mdeLink2:"](adresse du lien)",mdeImg1:"![](",mdeImg2:"adresse de l'image)",mdeTable1:"",mdeTable2:`

| Colonne 1 | Colonne 2 | Colonne 3 |
| -------- | -------- | -------- |
| Texte     | Texte     | Texte     |

`,bold:"Gras",italic:"Italique",heading:"Titre",quote:"Citation",unorderedList:"Liste à puce",orderedList:"Liste numérotée",createLink:"Créer un lien",insertImage:"Insérer une image",createTable:"Créer un tableau",preview:"Preview",mdeGuide:"Syntax documentation",undo:"Défaire",redo:"Refaire",default:"défaut : ",name:"nom : ",examples:"Exemples : ",deprecated:"Attention, cette information est obsolète."},zr={errorOneOf:"Kies er een",errorRequired:"benodigde informatie",addItem:"Item toevoegen",delete:"Verwijderen",confirm:"Bevestigen",edit:"Bewerken",close:"Sluiten",duplicate:"Verveelvoudigen",sort:"Sorteren",up:"Omhoog verplaatsen",down:"Omlaag verplaatsen",showHelp:"Toon helpbericht",mdeLink1:"[Link titel",mdeLink2:"](link url)",mdeImg1:"![](",mdeImg2:"afbeelding url)",mdeTable1:"",mdeTable2:`

| Kolom 1  | Kolom 2  | Kolom 3  |
| -------- | -------- | -------- |
| Tekst    | Tekst    | Tekst    |

`,bold:"Vet",italic:"Cursief",heading:"Titel",quote:"Citaat",unorderedList:"Ongeordende lijst",orderedList:"Geordende lijst",createLink:"Maak een koppeling",insertImage:"Afbeelding invoegen",createTable:"Tabel aanmaken",preview:"Voorbeeld",mdeGuide:"Documentatie over syntaxis",undo:"Ongedaan maken",redo:"Opnieuw",default:"standaard: ",name:"naam: ",examples:"Voorbeelden: ",deprecated:"Waarschuwing, deze informatie is verouderd."},$r={errorOneOf:"Wählen Sie eine Option",errorRequired:"Erforderliche Information",addItem:"Element hinzufügen",delete:"Löschen",edit:"Bearbeiten",confirm:"Bestätigen",close:"Schließen",duplicate:"Duplizieren",sort:"Sortieren",up:"Nach oben verschieben",down:"Nach unten verschieben",showHelp:"Hilfemeldung anzeigen",mdeLink1:"[Link-Titel",mdeLink2:"](Link-URL)",mdeImg1:"![](",mdeImg2:"Bild-URL)",mdeTable1:"",mdeTable2:`

| Spalte 1 | Spalte 2 | Spalte 3 |
| -------- | -------- | -------- |
| Text     | Text     | Text     |

`,bold:"Fett",italic:"Kursiv",heading:"Titel",quote:"Zitat",unorderedList:"Ungeordnete Liste",orderedList:"Geordnete Liste",createLink:"Link erstellen",insertImage:"Bild einfügen",createTable:"Tabelle erstellen",preview:"Vorschau",mdeGuide:"Syntax-Dokumentation",undo:"Rückgängig",redo:"Wiederholen",default:"standard: ",name:"name: ",examples:"Beispiele: ",deprecated:"Achtung, diese Information ist veraltet."},wt={en:Sr,fr:Ar,nl:zr,de:$r};function Ge(e=[],t=[]){if(!e||!t||e.length!==t.length)return t;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return t;return e}function kr(e={},t={}){if(!e||!t)return t;const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return t;for(const n of r)if(e[n]!==t[n])return t;return e}function Lt(e=[],t=[]){if(!e||!t)return e===t;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const Er=Yt,gi=e=>{let t=e.ajv;if(!t){const l={allErrors:!0,strict:!1,verbose:!0};e.ajvOptions&&Object.assign(l,e.ajvOptions),e.code&&(l.code={source:!0,esm:!0,lines:!0});const a=new Er(l);mr.default(a),Xt.default(a),t=a}try{t.addKeyword("layout")}catch{}try{t.addKeyword("__pointer")}catch{}let r=e.markdown;r||(r=a=>or.parse(a,e.markedOptions));const i=e.defaultLocale||"en",n=e.locale||i,f={...wt[n]||wt[i]};e.messages&&Object.assign(f,e.messages);const s=er.reduce((l,a)=>(l[a.name]=a,l),{});if(e.components){for(const l of Object.keys(e.components))s[l]={...e.components[l],name:l};Object.assign(s,e.components)}return{ajv:t,code:!1,markdown:r,useDescription:["help","subtitle"],useDefault:"data",useName:!1,useExamples:"items",useDeprecated:!1,useTitle:"label",...e,locale:n,defaultLocale:i,messages:f,components:s,xI18n:!!e.xI18n}},Or=x((e,t)=>{for(const r of["ajv","ajvOptions","code","markdown","markedOptions","xI18n","locale","defaultLocale","messages","optionsKeys","components","useDescription","useDefault","useName","useExamples","useDeprecated","useTitle"])if(r in t){if(r==="components"&&Lt(Object.keys(e.components??[]),Object.keys(t.components??[])))continue;e[r]=t[r]}else delete e[r]});var Ne={exports:{}},xe,bt;function Pr(){if(bt)return xe;bt=1;var e=1e3,t=e*60,r=t*60,i=r*24,n=i*7,f=i*365.25;xe=function(u,o){o=o||{};var d=typeof u;if(d==="string"&&u.length>0)return s(u);if(d==="number"&&isFinite(u))return o.long?a(u):l(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function s(u){if(u=String(u),!(u.length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(o){var d=parseFloat(o[1]),p=(o[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return d*f;case"weeks":case"week":case"w":return d*n;case"days":case"day":case"d":return d*i;case"hours":case"hour":case"hrs":case"hr":case"h":return d*r;case"minutes":case"minute":case"mins":case"min":case"m":return d*t;case"seconds":case"second":case"secs":case"sec":case"s":return d*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function l(u){var o=Math.abs(u);return o>=i?Math.round(u/i)+"d":o>=r?Math.round(u/r)+"h":o>=t?Math.round(u/t)+"m":o>=e?Math.round(u/e)+"s":u+"ms"}function a(u){var o=Math.abs(u);return o>=i?c(u,o,i,"day"):o>=r?c(u,o,r,"hour"):o>=t?c(u,o,t,"minute"):o>=e?c(u,o,e,"second"):u+" ms"}function c(u,o,d,p){var h=o>=d*1.5;return Math.round(u/d)+" "+p+(h?"s":"")}return xe}function Dr(e){r.debug=r,r.default=r,r.coerce=a,r.disable=s,r.enable=n,r.enabled=l,r.humanize=Pr(),r.destroy=c,Object.keys(e).forEach(u=>{r[u]=e[u]}),r.names=[],r.skips=[],r.formatters={};function t(u){let o=0;for(let d=0;d<u.length;d++)o=(o<<5)-o+u.charCodeAt(d),o|=0;return r.colors[Math.abs(o)%r.colors.length]}r.selectColor=t;function r(u){let o,d=null,p,h;function v(...z){if(!v.enabled)return;const g=v,w=Number(new Date),A=w-(o||w);g.diff=A,g.prev=o,g.curr=w,o=w,z[0]=r.coerce(z[0]),typeof z[0]!="string"&&z.unshift("%O");let S=0;z[0]=z[0].replace(/%([a-zA-Z%])/g,(T,M)=>{if(T==="%%")return"%";S++;const m=r.formatters[M];if(typeof m=="function"){const k=z[S];T=m.call(g,k),z.splice(S,1),S--}return T}),r.formatArgs.call(g,z),(g.log||r.log).apply(g,z)}return v.namespace=u,v.useColors=r.useColors(),v.color=r.selectColor(u),v.extend=i,v.destroy=r.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(p!==r.namespaces&&(p=r.namespaces,h=r.enabled(u)),h),set:z=>{d=z}}),typeof r.init=="function"&&r.init(v),v}function i(u,o){const d=r(this.namespace+(typeof o>"u"?":":o)+u);return d.log=this.log,d}function n(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];const o=(typeof u=="string"?u:"").trim().replace(" ",",").split(",").filter(Boolean);for(const d of o)d[0]==="-"?r.skips.push(d.slice(1)):r.names.push(d)}function f(u,o){let d=0,p=0,h=-1,v=0;for(;d<u.length;)if(p<o.length&&(o[p]===u[d]||o[p]==="*"))o[p]==="*"?(h=p,v=d,p++):(d++,p++);else if(h!==-1)p=h+1,v++,d=v;else return!1;for(;p<o.length&&o[p]==="*";)p++;return p===o.length}function s(){const u=[...r.names,...r.skips.map(o=>"-"+o)].join(",");return r.enable(""),u}function l(u){for(const o of r.skips)if(f(u,o))return!1;for(const o of r.names)if(f(u,o))return!0;return!1}function a(u){return u instanceof Error?u.stack||u.message:u}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var xr=Dr;(function(e,t){var r={};t.formatArgs=n,t.save=f,t.load=s,t.useColors=i,t.storage=l(),t.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;c.splice(1,0,u,"color: inherit");let o=0,d=0;c[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(o++,p==="%c"&&(d=o))}),c.splice(d,0,u)}t.log=console.debug||console.log||(()=>{});function f(c){try{c?t.storage.setItem("debug",c):t.storage.removeItem("debug")}catch{}}function s(){let c;try{c=t.storage.getItem("debug")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=r.DEBUG),c}function l(){try{return localStorage}catch{}}e.exports=xr(t);const{formatters:a}=e.exports;a.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(Ne,Ne.exports);var Mr=Ne.exports;const re=kt(Mr),Ie=["xs","sm","md","lg","xl","xxl"],P={xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560};class qe{constructor(t){O(this,"width");this.width=t}get name(){for(let t=0;t<Ie.length;t++)if(Ie[t+1]&&this.width<P[Ie[t+1]])return Ie[t];return"xxl"}get xs(){return this.width<P.sm}get sm(){return this.width>=P.sm&&this.width<P.md}get smAndDown(){return this.width<P.md}get smAndUp(){return this.width>=P.sm}get md(){return this.width>=P.md&&this.width<P.lg}get mdAndDown(){return this.width<P.lg}get mobile(){return this.mdAndDown}get mdAndUp(){return this.width>=P.md}get lg(){return this.width>=P.lg&&this.width<P.xl}get lgAndDown(){return this.width<P.xl}get lgAndUp(){return this.width>=P.lg}get xl(){return this.width>=P.xl&&this.width<P.xxl}get xlAndDown(){return this.width<P.xxl}get xlAndUp(){return this.width>=P.xl}get xxl(){return this.width>=P.xxl}}function jr(e,t){if(!t)return[e,12];let r=t.xs;return e.smAndUp&&t.sm!==void 0&&(r=t.sm),e.mdAndUp&&t.md!==void 0&&(r=t.md),e.lgAndUp&&t.lg!==void 0&&(r=t.lg),e.xlAndUp&&t.xl!==void 0&&(r=t.xl),e.xxl&&t.xxl!==void 0&&(r=t.xxl),[r===12?e:new qe(Math.round(e.width*(r/12))),r]}const Me={};function Ut(e){return Me[e]=Me[e]??new RegExp(e),Me[e]}const Te=re("jl:state-node"),Vr=re("jl:validation"),Fe=e=>!!(e===""||e===void 0||Array.isArray(e)&&!e.length||typeof e=="object"&&!Array.isArray(e)&&e&&Object.values(e).findIndex(t=>t!==void 0)===-1),Wt=(e,t,r)=>!!(r.defaultOn==="missing"&&e===void 0||r.defaultOn==="empty"&&Fe(e)),Kr=x((e,t,r,i,n,f,s,l,a,c,u,o,d,p,h,v,z,g,w)=>{if(e.messages=l.messages?Rr(e.messages||{},l.messages,p):p.messages,e.key=t,e.fullKey=r,e.parentFullKey=i,e.dataPath=n,e.parentDataPath=f,e.skeleton=s,e.layout=l,e.width=a,e.options=p,e.cols=c,e.data=u,e.error=o,e.itemsCacheKey=g,e.childError=w&&w.findIndex(A=>A.error||A.childError)!==-1,e.validated=d,h)e.autofocus=!0,delete e.autofocusChild;else{delete e.autofocus;const A=w==null?void 0:w.find(S=>S.autofocus);A?e.autofocusChild=A.key:delete e.autofocusChild}e.props=v,e.slots=z,e.children=w}),Rr=x((e,t,r)=>{Object.assign(e,r.messages,t)}),Hr=x((e,t)=>{for(const r of t){const i=r.key;r.data===void 0?delete e[i]:e[i]=r.data}for(;e.length&&e[e.length-1]===void 0;)e.pop()}),Lr=x((e,t,r,i,n)=>{for(let f=0;f<e.length;f++)e[f]instanceof File||(e[f]=Bt(e[f],t+"/"+f,void 0,r,i,n))}),Bt=x((e,t,r,i,n,f)=>{if(n&&(n.length||r!=null&&r.length))for(const s of Object.keys(e))n.includes(s)||delete e[s];if(f)for(const s of f)delete e[s];if(r)for(const s of r)if(t===s.dataPath){if(s.data===void 0)continue;Object.assign(e,s.data)}else s.data===void 0?delete e[s.key]:e[s.key]=s.data;if(i)for(const s of i)s.instancePath===t&&(s.keyword==="additionalProperties"&&delete e[s.params.additionalProperty],s.keyword==="unevaluatedProperties"&&delete e[s.params.unevaluatedProperty])}),Ur=x((e,t,r,i)=>{for(const n of Object.keys(t))r.includes(n)||i.some(f=>!!n.match(Ut(f)))&&(e[n]=t[n]);for(const n of Object.keys(e))n in t||delete e[n]}),Wr=x((e,t,r={})=>{for(const i in t)e[i]=r[i]??t[i];for(const i in r)e[i]=r[i];for(const i in e)!(i in t)&&!(i in r)&&delete e[i]}),It=x(e=>{e.readOnly=!0,e.summary=!0}),Br=x((e,t)=>{t.title&&e.titleDepth<6&&(e.titleDepth+=1)}),Tt=(e,t,r,i)=>{var f,s,l,a;const n=((s=(f=e.params)==null?void 0:f.errors)==null?void 0:s[0])??e;return i===n.instancePath&&((l=n.params)==null?void 0:l.missingProperty)===t.key||n.instancePath===r&&(n.schemaPath===t.pointer||n.schemaPath===t.refPointer)&&!((a=n.params)!=null&&a.missingProperty)},je=(e,t,r,i)=>{var f,s;const n=((s=(f=e.params)==null?void 0:f.errors)==null?void 0:s[0])??e;return!(n.schemaPath===t.pointer||n.schemaPath.startsWith(t.pointer+"/"))&&!(n.schemaPath===t.refPointer||n.schemaPath.startsWith(t.refPointer+"/"))?!1:!!n.instancePath.startsWith(r)};function W(e,t,r,i,n,f,s,l,a){if(t.ref===void 0)throw new Error("expression was not compiled : "+JSON.stringify(t));const c=e[t.ref];try{return t.pure?c(r,r,i,i.context,n,f,i.readOnly,i.summary,s):c(r,r,i,i.context,n,f,i.readOnly,i.summary,s,l,a)}catch(u){const o={expression:t,data:r,context:i.context,display:n};throw o[t.dataAlias]=r,t.pure||(o.rootData=l,o.parent=a),console.warn("json-layout: failed to evaluate expression",u,o),new Error("json-layout: failed to evaluate expression")}}const Ve={comp:"none"},Gr=(e,t,r,i,n,f,s,l)=>{if(nr(e)){for(const a of e.switch)if(!a.if||W(i.expressions,a.if,f,r,n,a,i.validates,s,l))return a}else return t!=null&&t.if&&!W(i.expressions,t.if,f,r,n,e,i.validates,s,l)||e.if&&!W(i.expressions,e.if,f,r,n,e,i.validates,s,l)?Ve:e;return Ve};function pe(e,t,r,i,n,f,s,l,a,c,u,o,d,p,h){var I,j,J,Z,be,fe,ce,de,ie,he,Ye,Xe,et,tt,rt,it,nt,st,at,ot,ut,lt,ft,ct,dt,ht;Te("createStateNode",n);let v=null;if(a.pure&&!(h!=null&&h.error)&&!(h!=null&&h.childError)){const _=p.validatedForm||p.validatedChildren.includes(n);if(v=[h,t,r,n,e.currentInput!==null&&e.currentInput.startsWith(n),a,c,u.width,_,e.activatedItems,e.initial,((I=e.rehydrateErrors)==null?void 0:I.length)??0,o],h&&e.cacheKeys[n]&&Lt(e.cacheKeys[n],v))return Te("createStateNode cache hit",n),e._debugCache&&(e._debugCache[n]=(e._debugCache[n]??[]).concat(["hit"])),h;Te("createStateNode cache miss",n),e._debugCache&&(e._debugCache[n]=(e._debugCache[n]??[]).concat(["miss"]))}else Te("createStateNode cache skip",n),e._debugCache&&(e._debugCache[n]=(e._debugCache[n]??[]).concat(["skip"]));const z=c&&(sr(c)||ar(c))?c:r.normalizedLayouts[a.pointer],g=Gr(z,c,t,r,u,o,e.rootData,d),[w,A]=jr(u,(c==null?void 0:c.cols)??g.cols),S=(c==null?void 0:c.slots)??g.slots,C=g.getOptions?Wr((h==null?void 0:h.options)??{},t,W(r.expressions,g.getOptions,o,t,w,g,r.validates,e.rootData,d)):t;e.initial&&t.autofocus&&g.autofocus&&g.comp!=="none"&&(e.autofocusTarget=n);let T;if(tr(g,r.components)){const _=o??{},E=Br(C,g);T=[];let N=e.autofocusTarget===n;for(let V=0;V<g.children.length;V++){const F=g.children[V];if(["remove","hide"].includes(C.readOnlyPropertiesMode)&&((j=a.roPropertyKeys)!=null&&j.includes(F.key)))continue;let D=a;const H=(J=a.children)==null?void 0:J.find(me=>r.skeletonNodes[me].key===F.key);if(H!==void 0&&(D=r.skeletonNodes[H]),D.condition&&!W(r.expressions,D.condition,_,t,w,g,r.validates,e.rootData,d))continue;const K=typeof F.key=="string"&&F.key.startsWith("$"),G=`${n}/${F.key}`;N&&(e.autofocusTarget=G);let Q=K?_:_[F.key];if(F.key==="$patternProperties"){const me=r.normalizedLayouts[D.pointer];Q=Ur(((be=(Z=h==null?void 0:h.children)==null?void 0:Z.find(qt=>qt.key==="$patternProperties"))==null?void 0:be.data)??{},_,a.propertyKeys,me.indexed??[])}const Oe=pe(e,E,r,F.key,G,n,K?s:`${s}/${F.key}`,s,D,F,w,Q,{parent:d,data:_},p,(fe=h==null?void 0:h.children)==null?void 0:fe.find(me=>me.fullKey===G));(Oe.autofocus||Oe.autofocusChild!==void 0)&&(N=!1),T.push(Oe)}}if(i==="$oneOf"&&a.childrenTrees){const _=n in e.activatedItems?e.activatedItems[n]:(ce=a.childrenTrees)==null?void 0:ce.findIndex(E=>r.validates[r.skeletonTrees[E].refPointer](o));if(_!==-1){n in e.activatedItems||(e.autoActivatedItems[n]=_),e.errors=(de=e.errors)==null?void 0:de.filter(V=>{var D,H;const F=((H=(D=V.params)==null?void 0:D.errors)==null?void 0:H[0])??V;return!(Tt(V,a,s,l)||je(V,a,s)&&(F.schemaPath.startsWith(a.pointer)&&!F.schemaPath.startsWith(a.pointer+"/"+_)||F.schemaPath.startsWith(a.refPointer)&&!F.schemaPath.startsWith(a.refPointer+"/"+_)))});const E=`${n}/${_}`;e.autofocusTarget===n&&(e.autofocusTarget=E);const N=r.skeletonTrees[a.childrenTrees[_]];T=[pe(e,C,r,_,E,n,s,s,r.skeletonNodes[N.root],null,w,o,{parent:d,data:o},p,(ie=h==null?void 0:h.children)==null?void 0:ie[0])]}}if(rr(g))if(g.indexed){const _=o??[],E=g.listEditMode==="inline"?C:It(C);T=[];let N=e.autofocusTarget===n;const V=Object.keys(_);for(let F=0;F<V.length;F++){const D=V[F];let H=null;if(((he=a==null?void 0:a.childrenTrees)==null?void 0:he.length)===1)H=r.skeletonNodes[(Ye=r.skeletonTrees[a==null?void 0:a.childrenTrees[0]])==null?void 0:Ye.root];else for(let K=0;K<g.indexed.length;K++){const G=g.indexed[K],Q=(Xe=a==null?void 0:a.childrenTrees)==null?void 0:Xe[K];if(!Q)throw new Error(`missing skeleton tree for pattern ${G}`);D.match(Ut(G))&&(H=r.skeletonNodes[(et=r.skeletonTrees[Q])==null?void 0:et.root])}if(H){const K=`${n}/${D}`;N&&(e.autofocusTarget=K);const G=pe(e,g.listEditMode==="inline-single"&&e.activatedItems[n]===F?C:E,r,D,K,n,`${s}/${D}`,s,H,null,w,_[D],{parent:d,data:_},p,(tt=h==null?void 0:h.children)==null?void 0:tt.find(Q=>Q.key===D));(G.autofocus||G.autofocusChild!==void 0)&&(N=!1),T.push(G)}}}else{const _=o??[],E=((rt=a==null?void 0:a.childrenTrees)==null?void 0:rt[0])&&r.skeletonNodes[(nt=r.skeletonTrees[(it=a==null?void 0:a.childrenTrees)==null?void 0:it[0]])==null?void 0:nt.root],N=g.listEditMode==="inline"?C:It(C);T=[];let V=e.autofocusTarget===n;for(let F=0;F<_.length;F++){const D=_[F],H=`${n}/${F}`;V&&(e.autofocusTarget=H);const K=pe(e,g.listEditMode==="inline-single"&&e.activatedItems[n]===F?C:N,r,F,H,n,`${s}/${F}`,s,E,null,w,D,{parent:d,data:_},p,(st=h==null?void 0:h.children)==null?void 0:st[F]);(K.autofocus||K.autofocusChild!==void 0)&&(V=!1),T.push(K)}}let M=(at=e.errors)==null?void 0:at.find(_=>Tt(_,a,s,l));!M&&e.rehydrate&&e.rehydrateErrors&&(M=(ot=e.rehydrateErrors)==null?void 0:ot.findLast(_=>je(_,a,s))),g.comp!=="none"&&M&&(Vr(`${n} capture validation error on node`,M),e.errors=(ut=e.errors)==null?void 0:ut.filter(_=>M!==_),e.rehydrate&&e.rehydrateErrors&&(e.rehydrateErrors=(lt=e.rehydrateErrors)==null?void 0:lt.filter(_=>!je(_,a,s))));let m=o;m===null&&!g.nullable&&(m=void 0);const k=p.validatedForm||p.validatedChildren.includes(n)||p.initialized===!1&&C.initialValidation==="always"||p.initialized===!1&&C.initialValidation==="withData"&&!Fe(m);if(typeof((ft=T==null?void 0:T[0])==null?void 0:ft.key)=="number"&&g.comp!=="one-of-select"&&!g.indexed)m=Hr(m??[],T);else if(Array.isArray(m)){const _=((ct=a.childrenTrees)==null?void 0:ct[0])&&r.skeletonTrees[(dt=a.childrenTrees)==null?void 0:dt[0]],E=_&&r.skeletonNodes[_.root]||null;m=Lr(m??[],s,e.additionalPropertiesErrors,[!0,"unknown"].includes(C.removeAdditional)?E==null?void 0:E.propertyKeys:void 0,C.readOnlyPropertiesMode==="remove"?E==null?void 0:E.roPropertyKeys:void 0)}else if((typeof m=="object"||m===void 0&&(T!=null&&T.length))&&!(m instanceof File)){const _=[!0,"unknown"].includes(C.removeAdditional)||(T==null?void 0:T.some(E=>E.key==="$patternProperties"));m=Bt(m??{},s,T,e.additionalPropertiesErrors,_?a.propertyKeys:void 0,C.readOnlyPropertiesMode==="remove"?a.roPropertyKeys:void 0)}if(m!==o&&(Array.isArray(o)&&Array.isArray(m)?m=Ge(o,m):typeof o=="object"&&typeof m=="object"&&(m=kr(o,m))),g.getConstData)e.rehydrate||(m=W(r.expressions,g.getConstData,m,C,w,g,r.validates,e.rootData,d));else if(g.getDefaultData&&Wt(m,g,C)&&e.currentInput!==n){if(!e.rehydrate){const _=W(r.expressions,g.getDefaultData,m,C,w,g,r.validates,e.rootData,d);(m===void 0||!Fe(_))&&(m=_)}}else Fe(m)&&(g.nullable?(C.defaultOn!=="missing"||m!==void 0)&&(m=null):C.defaultOn!=="missing"&&(m=void 0));let we;g.getProps&&(we=W(r.expressions,g.getProps,m,C,w,g,r.validates,e.rootData,d));let y;if(At(g,r.components)){if(g.items)y=g.items;else if((ht=g.getItems)!=null&&ht.immutable&&(h!=null&&h.itemsCacheKey))y=h.itemsCacheKey;else if(g.getItems&&zt(g.getItems))if(g.getItems.immutable&&(h!=null&&h.itemsCacheKey))y=h.itemsCacheKey;else try{y=W(r.expressions,g.getItems,m,C,w,g,r.validates,e.rootData,d)}catch{y=null}else if(g.getItems&&$t(g.getItems))try{y=W(r.expressions,g.getItems.url,null,C,w,g,r.validates,e.rootData,d)}catch{y=null}}const b=ir(g,r.components)&&!C.readOnly&&!C.summary&&e.autofocusTarget===n,$=Kr(h??{},i,n,f,s,l,a,g,w.width,A,m,M==null?void 0:M.message,k,C,b,we,S,y,T&&Ge(h==null?void 0:h.children,T));return v&&(v[0]=$,e.cacheKeys[n]=v),$}const Nr=x((e,t,r)=>{if(t.dataPath===t.parentDataPath){if(Object.assign(e,r),t.data&&typeof r=="object"&&r!==null)for(const i of Object.keys(t.data))i in r||delete e[i]}else e[t.key]=r}),Ft=re("jl:validation"),qr=x((e,t,r)=>{e.root=t,e.valid=r});function*Gt(e){if(yield e,e.children)for(const t of e.children)yield*Gt(t)}function Zr(e,t,r,i,n,f,s,l){var o,d,p;const a=r.validates[i.refPointer],c=a(f);if(a.errors){Ft(`${i.root} validation errors`,a.errors);for(const h of a.errors)h.keyword!=="errorMessage"&&r.localizeErrors([h]);if(e.errors=e.allErrors=a.errors,e.errors.length)for(const h of e.errors){const v=((d=(o=h.params)==null?void 0:o.errors)==null?void 0:d[0])??h;v!=null&&v.parentSchema.__pointer&&(v.schemaPath=v==null?void 0:v.parentSchema.__pointer,v.keyword==="oneOf"&&(v.schemaPath+="/oneOf"))}[!0,"error"].includes(t.removeAdditional)&&(e.additionalPropertiesErrors=a.errors.filter(h=>h.keyword==="additionalProperties"||h.keyword==="unevaluatedProperties"))}e.rehydrate&&((p=e.rehydrateErrors)!=null&&p.length)&&Ft(`${i.root} some validation errors were not captured by a leaf property, try to capture on a parent`,e.rehydrateErrors);const u=pe(e,t,r,"","",null,"",null,r.skeletonNodes[i.root],null,n,f,null,s,l==null?void 0:l.root);e.nodes=[],e.files=[];for(const h of Gt(u))e.nodes.push(h),h.data instanceof File&&e.files.push({dataPath:h.dataPath,file:h.data});return qr(l??{},u,c)}function Jr(e,t){const r={...t.messages};return e.messages&&Object.assign(r,e.messages),{context:{},width:1e3,readOnly:!1,summary:!1,density:"default",indent:!1,titleDepth:2,validateOn:"input",initialValidation:"withData",updateOn:"input",debounceInputMs:300,defaultOn:"empty",removeAdditional:"error",autofocus:!1,readOnlyPropertiesMode:"show",fetchOptions:{},onAutofocus:()=>{},onUpdate:()=>{},onData:()=>{},...e,messages:r}}const yi=e=>!!e&&e.layout.comp==="section",Qr=(e,t)=>!!e&&At(e.layout,t),q=re("jl:data-binding"),ne=re("jl:select-items"),se=re("jl:activated-items"),Yr=e=>new URL(e.startsWith("/")?window.location.origin+e:e);class Xr{constructor(t,r,i,n){O(this,"_compiledLayout");O(this,"_stateTree");O(this,"skeletonTree");O(this,"_display");O(this,"_validationState");O(this,"_options");O(this,"_data");O(this,"_previousData");O(this,"_dataWaitingForBlur",!1);O(this,"_currentInput",null);O(this,"_lastCreateStateTreeContext");O(this,"_autofocusTarget");O(this,"_previousAutofocusTarget");O(this,"files",[]);O(this,"debouncedInput",null);O(this,"_itemsCache",{});O(this,"activatedItems");q("create stateful layout",t,r,i,n),this._compiledLayout=t,this.skeletonTree=r,this.prepareOptions(i),this._autofocusTarget=this.options.autofocus?"":null,this._previousAutofocusTarget=null,this._data=n,this._previousData=n,this.initValidationState(),this.activatedItems={},this.updateState(),this.handleAutofocus()}get compiledLayout(){return this._compiledLayout}get stateTree(){return this._stateTree}get display(){return this._display}get validationState(){return this._validationState}set validationState(t){this._validationState={initialized:t.initialized??this._validationState.initialized??!1,validatedForm:t.validatedForm??this._validationState.validatedForm??!1,validatedChildren:t.validatedChildren??this._validationState.validatedChildren??[]},this.updateState()}get options(){return this._options}set options(t){q("apply main options setter",t),this.prepareOptions(t),this.updateState()}get data(){return this._data}set data(t){q("apply main data setter",t),this._data=t,this.updateState()}prepareOptions(t){this._options=Jr(t,this.compiledLayout),this._display=this._display&&this._display.width===this._options.width?this._display:new qe(this._options.width)}initValidationState(){const t=this.options.initialValidation==="always";this._validationState={initialized:t,validatedForm:t,validatedChildren:[]}}updateState(){var r;this.createStateTree();let t=0;for(;this._data!==(this._stateTree.root.data??null)||this._autofocusTarget!==this._lastCreateStateTreeContext.autofocusTarget||t===0&&((r=this._lastCreateStateTreeContext.errors)!=null&&r.length);){if(t+=1,t>100)throw console.error("too many iterations in updateState, the data is probably not stable",this._data,this._stateTree.root.data),new Error("too many iterations in updateState, the data is probably not stable");q("hydrating state tree changed the data, do it again",this._data,this._stateTree.root.data),this._data=this._stateTree.root.data??null,this._autofocusTarget=this._lastCreateStateTreeContext.autofocusTarget,this.createStateTree(!0)}!this._stateTree.valid&&!this._stateTree.root.error&&!this._stateTree.root.childError&&console.error("JSON layout failed to assign validation error to a node",this._lastCreateStateTreeContext.allErrors),q("emit update event",this._data,this._stateTree),this.options.onUpdate(this),this.emitData()}emitData(){!this._dataWaitingForBlur&&this._data!==this._previousData&&(q("emit data event",this._data),this.options.onData(this._data),this._previousData=this._data)}createStateTree(t=!1){var i,n,f;const r={activatedItems:this.activatedItems,autoActivatedItems:{},autofocusTarget:this._autofocusTarget,currentInput:this._currentInput,initial:!this._lastCreateStateTreeContext,rehydrate:t,cacheKeys:((i=this._lastCreateStateTreeContext)==null?void 0:i.cacheKeys)??{},rootData:this._data,files:[],nodes:[],rehydrateErrors:t?(n=this._lastCreateStateTreeContext)==null?void 0:n.errors:void 0};this._options._debugCache&&(r._debugCache=((f=this._lastCreateStateTreeContext)==null?void 0:f._debugCache)??{}),this._stateTree=Zr(r,this._options,this._compiledLayout,this.skeletonTree,this._display,this._data,this._validationState,this._stateTree),this._lastCreateStateTreeContext=r,this.validationState.initialized||(this._validationState={initialized:!0,validatedForm:this._validationState.validatedForm,validatedChildren:r.nodes.filter(s=>s.validated).map(s=>s.fullKey)}),this.files=Ge(this.files,r.files);for(const s in r.autoActivatedItems)se("auto-activated item",s,r.autoActivatedItems[s]),this.activatedItems=x(this.activatedItems,l=>{l[s]=r.autoActivatedItems[s]})}validate(){this.validationState={validatedForm:!0}}resetValidation(){this.initValidationState(),this.updateState()}get valid(){return this.stateTree.valid}get errors(){return this._lastCreateStateTreeContext.nodes.filter(t=>!!t.error).map(t=>t.error)}get hasHiddenError(){return this._lastCreateStateTreeContext.nodes.findIndex(t=>t.error&&!t.validated)!==-1}getParentContextExpression(t){const r=this._lastCreateStateTreeContext.nodes.find(i=>i.fullKey===t.parentFullKey);return r?{parent:this.getParentContextExpression(r),data:r.data}:null}evalNodeExpression(t,r,i){return W(this.compiledLayout.expressions,r,i,t.options,new qe(t.width),t.layout,this.compiledLayout.validates,this._data,this.getParentContextExpression(t))}applyInput(t,r,i,n){var a;q("received input event from node",t,r);const f=t.layout.transformData&&this.evalNodeExpression(t,t.layout.transformData,r);if((a=this.compiledLayout.components[t.layout.comp])!=null&&a.isFileInput){if(f)r.toJSON=()=>f;else if(r instanceof File){const c={name:r.name,size:r.size,type:r.type};r.toJSON=()=>c}else if(Array.isArray(r))for(const c of r){const u={name:c.name,size:c.size,type:c.type};c.toJSON=()=>u}}else f&&(r=f);if(i&&!this.validationState.validatedChildren.includes(t.fullKey)&&(this.validationState={validatedChildren:this.validationState.validatedChildren.concat([t.fullKey])}),n!==void 0&&(se("activated item on input",t.fullKey,n),this.activatedItems=x(this.activatedItems,c=>{c[t.fullKey]=n}),this._autofocusTarget=t.fullKey+"/"+n),t.parentFullKey===null){this._data=r,this.updateState();return}const s=this._lastCreateStateTreeContext.nodes.find(c=>c.fullKey===t.parentFullKey);if(!s)throw new Error(`parent with key "${t.parentFullKey}" not found`);const l=Nr(s.data??(typeof t.key=="number"?[]:{}),t,r??(t.skeleton.nullable?null:void 0));this.applyInput(s,l,i),n!==void 0&&this.handleAutofocus()}applyDebouncedInput(){this.debouncedInput&&(clearTimeout(this.debouncedInput[4]),this.applyInput(this.debouncedInput[0],this.debouncedInput[1],this.debouncedInput[2],this.debouncedInput[3]),this.debouncedInput=null)}input(t,r,i){var l,a;this.debouncedInput&&(this.debouncedInput[0]===t?clearTimeout(this.debouncedInput[4]):this.applyDebouncedInput());const n=(l=this.compiledLayout.components[t.layout.comp])==null?void 0:l.emitsBlur;n&&(this._currentInput=t.fullKey),t.options.updateOn==="blur"&&n&&(this._dataWaitingForBlur=!0);const f=t.options.validateOn==="input"||t.options.validateOn==="blur"&&!n;((a=this.compiledLayout.components[t.layout.comp])==null?void 0:a.shouldDebounce)&&t.options.debounceInputMs?this.debouncedInput=[t,r,f,i,setTimeout(()=>this.applyDebouncedInput(),t.options.debounceInputMs)]:this.applyInput(t,r,f,i)}blur(t){this._currentInput===t.fullKey&&(this._currentInput=null),this.debouncedInput?this.applyDebouncedInput():t.layout.getDefaultData&&Wt(t.data,t.layout,t.options)&&this.applyInput(t,t.data,!0),q("received blur event from node",t),(t.options.validateOn==="input"||t.options.validateOn==="blur")&&!this.validationState.validatedChildren.includes(t.fullKey)&&(this.validationState={validatedChildren:this.validationState.validatedChildren.concat([t.fullKey])}),this._dataWaitingForBlur&&(this._dataWaitingForBlur=!1,this.emitData())}validateNodeRecurse(t){if(this.validationState={validatedChildren:this.validationState.validatedChildren.concat([t.fullKey])},t.children)for(const r of t.children)this.validateNodeRecurse(r)}async getItemsWithoutCache(t,r=""){var s;if(!Qr(t,this._compiledLayout.components))throw new Error("node is not a component with an items list");if(t.itemsCacheKey===null)return{appliedQ:!1,items:[]};let i=!1,n;if((t.layout.items||t.layout.getItems&&zt(t.layout.getItems))&&(n=t.itemsCacheKey,ne(`${t.fullKey} - raw items from context or schema or getItems expression`,n)),t.layout.getItems&&$t(t.layout.getItems)){ne(`${t.fullKey} - will fetch raw items from URL`,t.itemsCacheKey);const l=Yr(t.itemsCacheKey);let a=t.layout.getItems.qSearchParam;if(!a)for(const u of l.searchParams.entries())u[1]==="{q}"&&(a=u[0]);a&&(ne(`${t.fullKey} - apply search params`,a),i=!0,r?l.searchParams.set(a,r):l.searchParams.delete(a));const c=typeof t.options.fetchOptions=="function"?t.options.fetchOptions(l):t.options.fetchOptions;n=await(await fetch(l,c)).json(),ne(`${t.fullKey} - raw items URL`,n)}if(!n)throw new Error(`node ${t.fullKey} is missing items or getItems parameters`);if((s=t.layout.getItems)!=null&&s.itemsResults&&(n=this.evalNodeExpression(t,t.layout.getItems.itemsResults,n),ne(`${t.fullKey} - items passed through the getItems.itemsResults expression`,n)),!Array.isArray(n))throw new Error(`getItems didn't return an array for node ${t.fullKey}, you can define itemsResults to extract the array`);const f=n.map(l=>this.prepareSelectItem(t,l));return{appliedQ:i,items:f}}async getItems(t,r=""){let i;return this._itemsCache[t.fullKey]&&this._itemsCache[t.fullKey].key===t.itemsCacheKey&&(!r||!this._itemsCache[t.fullKey].appliedQ)?i=this._itemsCache[t.fullKey]:(i=await this.getItemsWithoutCache(t,r),(!r||!i.appliedQ)&&(this._itemsCache[t.fullKey]={key:t.itemsCacheKey,...i})),r&&!i.appliedQ?i.items.filter(n=>n.title.toLowerCase().includes(r.toLowerCase())):i.items}prepareSelectItem(t,r){var f,s,l,a,c,u,o,d,p;const i={},n=t.layout;return typeof r=="object"?(i.value=(f=n.getItems)!=null&&f.itemValue?this.evalNodeExpression(t,n.getItems.itemValue,r):(s=n.getItems)!=null&&s.returnObjects?r:r.value,i.key=(l=n.getItems)!=null&&l.itemKey?this.evalNodeExpression(t,n.getItems.itemKey,r):r.key,i.title=(a=n.getItems)!=null&&a.itemTitle?this.evalNodeExpression(t,n.getItems.itemTitle,r):r.title,i.value=i.value??i.key,i.key=i.key??i.value+"",i.title=i.title??i.key,!i.icon&&r.icon&&(i.icon=r.icon)):(i.value=(c=n.getItems)!=null&&c.itemValue?this.evalNodeExpression(t,n.getItems.itemValue,r):r,i.key=(u=n.getItems)!=null&&u.itemKey?this.evalNodeExpression(t,n.getItems.itemKey,r):i.value,i.title=(o=n.getItems)!=null&&o.itemTitle?this.evalNodeExpression(t,n.getItems.itemTitle,r):i.value),(d=n.getItems)!=null&&d.itemIcon&&(i.icon=this.evalNodeExpression(t,(p=n.getItems)==null?void 0:p.itemIcon,r)),ne(`${t.fullKey} - select item after applying itemValue/itemKey/itemTitle/itemIcon expressions`,i),i}activateItem(t,r){var i,n,f;if(se("activate item explicitly",t.fullKey,r),this.activatedItems=x(this.activatedItems,s=>{s[t.fullKey]=r}),this._autofocusTarget=t.fullKey+"/"+r,t.key==="$oneOf")if(t.layout.emptyData&&t.data&&typeof t.data=="object"&&((i=t.children)!=null&&i[0])){const s=this._lastCreateStateTreeContext.nodes.find(a=>a.fullKey===t.parentFullKey);if(!s)throw new Error(`parent with key "${t.parentFullKey}" not found`);if(!s.data||typeof s.data!="object")throw new Error(`parent with key "${t.parentFullKey}" is missing data object`);const l={...s.data};se("remove properties of previous oneOf activated item",t.fullKey,(n=t.children)==null?void 0:n[0].fullKey);for(const a of(f=t.children)==null?void 0:f[0].skeleton.propertyKeys)delete l[a];this.input(s,l)}else this.input(t,void 0);else this.updateState();this.handleAutofocus()}deactivateItem(t){se("deactivate item explicitly",t.fullKey),this.activatedItems=x(this.activatedItems,r=>{for(const i in r)i.startsWith(t.fullKey)&&(se("item deactivation deletes a key",i),delete r[i])}),this.updateState()}handleAutofocus(){const t=this._autofocusTarget;t!==null&&this._autofocusTarget!==this._previousAutofocusTarget&&(this._previousAutofocusTarget=t,setTimeout(()=>{q("emit autofocus event",t),this.options.onAutofocus(t)}))}}function ei(e){return ur()?(lr(e),!0):!1}const ti=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function ri(e){return Ze()}function ii(e){return Array.isArray(e)?e:[e]}function ni(e,t=!0,r){ri()?Et(e,r):t?e():Ot(e)}const Nt=ti?window:void 0;function oe(e){var t;const r=Pt(e);return(t=r==null?void 0:r.$el)!=null?t:r}function si(){const e=ye(!1),t=Ze();return t&&Et(()=>{e.value=!0},t),e}function ai(e){const t=si();return ge(()=>(t.value,!!e()))}function oi(e,t,r={}){const{window:i=Nt,...n}=r;let f;const s=ai(()=>i&&"ResizeObserver"in i),l=()=>{f&&(f.disconnect(),f=void 0)},a=ge(()=>{const o=Pt(e);return Array.isArray(o)?o.map(d=>oe(d)):[oe(o)]}),c=ae(a,o=>{if(l(),s.value&&i){f=new ResizeObserver(t);for(const d of o)d&&f.observe(d,n)}},{immediate:!0,flush:"post"}),u=()=>{l(),c()};return ei(u),{isSupported:s,stop:u}}function ui(e,t={width:0,height:0},r={}){const{window:i=Nt,box:n="content-box"}=r,f=ge(()=>{var o,d;return(d=(o=oe(e))==null?void 0:o.namespaceURI)==null?void 0:d.includes("svg")}),s=ye(t.width),l=ye(t.height),{stop:a}=oi(e,([o])=>{const d=n==="border-box"?o.borderBoxSize:n==="content-box"?o.contentBoxSize:o.devicePixelContentBoxSize;if(i&&f.value){const p=oe(e);if(p){const h=p.getBoundingClientRect();s.value=h.width,l.value=h.height}}else if(d){const p=ii(d);s.value=p.reduce((h,{inlineSize:v})=>h+v,0),l.value=p.reduce((h,{blockSize:v})=>h+v,0)}else s.value=o.contentRect.width,l.value=o.contentRect.height},r);ni(()=>{const o=oe(e);o&&(s.value="offsetWidth"in o?o.offsetWidth:t.width,l.value="offsetHeight"in o?o.offsetHeight:t.height)});const c=ae(()=>oe(e),o=>{s.value=o?t.width:0,l.value=o?t.height:0});function u(){a(),c()}return{width:s,height:l,stop:u}}const li={add:"$plus",calendar:"$calendar",close:"$close",edit:"$edit",sortDown:"$sortDesc",sortUp:"$sortAsc",alert:"svg:M13 14H11V9H13M13 18H11V16H13M1 21H23L12 2L1 21Z",clock:"svg:M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z",delete:"svg:M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",duplicate:"svg:M11,17H4A2,2 0 0,1 2,15V3A2,2 0 0,1 4,1H16V3H4V15H11V13L15,16L11,19V17M19,21V7H8V13H6V7A2,2 0 0,1 8,5H19A2,2 0 0,1 21,7V21A2,2 0 0,1 19,23H8A2,2 0 0,1 6,21V19H8V21H19Z",infoSymbol:"svg:M11 9H13V7H11V9M11 17H13V11H11V17Z",menu:"svg:M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",sort:"svg:M17.45,17.55L12,23L6.55,17.55L7.96,16.14L11,19.17V4.83L7.96,7.86L6.55,6.45L12,1L17.45,6.45L16.04,7.86L13,4.83V19.17L16.04,16.14L17.45,17.55Z"},fi={nodeComponents:{},plugins:[],pluginsOptions:{}},ci=(e,t,r,i,n,f,s,l,a,c)=>{const u={...e==null?void 0:e.components},o={...s,...e==null?void 0:e.nodeComponents};if(e!=null&&e.plugins)for(const h of e.plugins)u[h.info.name]=h.info,o[h.info.name]=h.nodeComponent;const d={...e==null?void 0:e.icons,...li};return{...fi,readOnly:!!(t&&(t.isDisabled.value||t.isReadonly.value)),density:n==null?void 0:n.density,locale:i,...e,onData:l,onUpdate:a,onAutofocus:c,context:e!=null&&e.context?JSON.parse(JSON.stringify(e.context)):{},width:Math.round(r??0),vjsfSlots:{...f},components:u,nodeComponents:o,icons:d}},R=re("vjsf:use-vjsf");Fr(!1);const vi={"update:modelValue":e=>!0,"update:state":e=>!0},_i=(e,t,r,i,n,f,s)=>{var M;const l=ye(null);fr({},"Vjsf");const a=(M=mt(Symbol.for("vuetify:defaults")))==null?void 0:M.value;R("provided defaults",a);const{width:c}=ui(l),u=pt(null),o=pt(null),d=mt(Symbol.for("vuetify:form"),null),p=`vjsf-${Math.random().toString(36).substring(2,9)}`;d?d.register({id:p,validate:()=>{var m,k;return(m=u.value)==null||m.validate(),((k=u.value)==null?void 0:k.errors)||[]},reset:()=>{var m;return(m=u.value)==null?void 0:m.resetValidation()},resetValidation:()=>{var m;return(m=u.value)==null?void 0:m.resetValidation()},vm:Ze()}):console.warn("Vjsf should be wrapped in VForm");const h=cr(),v=m=>{R("onStatefulLayoutUpdate",m),m&&(o.value=m.stateTree,R("  -> emit update:state"),n("update:state",m),d&&(m.valid?d.update(p,!0,[]):m.hasHiddenError?d.update(p,null,[]):d.update(p,!1,[])))},z=async m=>{R("onDataUpdate",m),R("  -> emit update:modelValue"),await Ot(),n("update:modelValue",m)},g=()=>{if(!l.value)return;const m=l.value.querySelector(".vjsf-input--autofocus");if(R("onAutofocus",m),m){const k=m.querySelector("input")??m.querySelector('textarea:not([style*="display: none"]');k&&k.focus()}},w=dr(),A=ge(()=>ci(r.value,d,c.value,w.current.value,a==null?void 0:a.global,h,{...i},z,v,g)),S=ye({});ae(A,m=>{if(s!=null&&s.value)return;const k=Or(S.value,m);k!==S.value&&(R("new compileOptions",k),S.value=k)},{immediate:!0});const C=ge(()=>{if(s!=null&&s.value)return s==null?void 0:s.value;if(!f)throw new Error("compile function is not available");return f(e.value,S.value)}),T=()=>{c.value&&(u.value=new Xr(Y(C.value),Y(C.value.skeletonTrees[C.value.mainTree]),Y(A.value),Y(t.value)))};return ae(A,m=>{R("watch fullOptions",A),u.value?(R("  -> update statefulLayout options"),u.value.options=Y(m)):(R("  -> init statefulLayout"),T())}),ae(t,m=>{const k=Y(m);u.value&&u.value.data!==k&&(R("modelValue changed from outside",k),R("  -> update statefulLayout data"),u.value.data=Y(k))}),ae(C,m=>{R("watch compiledLayout",m),R("  -> init statefulLayout"),T()}),{el:l,statefulLayout:u,stateTree:o}};export{re as D,fi as a,vi as b,li as d,Sr as e,gi as f,Ut as g,yi as i,_i as u};
