import{_ as M,t as $,v as V,d as H,M as G,N as Q,r as J,h as T,O as X,g as f,D as x,A as r,z as a,F as D,I as A,J as I,B as _,y as v,x as O,K as Y,Q as Z}from"./CGS-rA66.js";import{_ as R}from"./DXxcMbhf.js";import{V as ee,a as te,c as le,r as oe,i as ae,b as ie,d as ne,e as re,f as se,g as de,h as pe,j as ue,_ as fe}from"./DnUeETfT.js";import{V as me}from"./BUENdFxj.js";import{u as ve,V as ye,a as Ve}from"./EcWsCH7n.js";import{a as ge}from"./f7UZSzEA.js";import{a as Oe}from"./1aZepjVE.js";import{V as be}from"./CyGtQr9O.js";import{V as we,a as ce}from"./ib8tEWrs.js";import{V as xe,a as ke}from"./CDCySm2L.js";import{d as je}from"./CC6Jarrp.js";import{V as _e}from"./DeBS6Q3F.js";import{V as $e}from"./BDbydhmL.js";const De={props:{content:{type:String,required:!0}}},Ce=["innerHTML"];function Ue(e,t,i,s,d,p){return V(),$("div",{class:"markdown-block",innerHTML:e.$markdown(i.content)},null,8,Ce)}const Re=M(De,[["render",Ue]]),he={name:"img-cropper",focusable:!0,isFileInput:!0,schema:{properties:{accept:{type:"string",default:"image/*"},placeholder:{type:"string"}}}},L=H({props:{modelValue:{type:Object,required:!0},statefulLayout:{type:Object,required:!0}},setup(e){G({},"VjsfImgCropper");const{inputProps:t,localData:i,compSlots:s}=ve(Q(e,"modelValue"),e.statefulLayout,{layoutPropsMap:["placeholder","accept"]}),d=J(!1);return()=>{const p=T(ee,{accept:"image/*",...t.value,modelValue:i.value},s.value);if(d.value){const y=T(te,{});return[p,y]}else return[p]}}});X(L);const Se={info:he,nodeComponent:L},Te=ge,Ae={modelRoot:"rootData",root:"rootData",model:"data",value:"data"},P=e=>(e.match(/^[a-z.0-9]*$/i)&&!["data","context","rootData","parent"].some(t=>e.startsWith(t+"."))&&(e="rootData."+e),e=e.replace(/(.*)\.(\d+)(.*)/,"$1[$2]$3"),e),C=(e,t="js-eval")=>{let i=e,s=!0;i.includes("parent.value")&&(s=!1,i=i.replace(/parent\.value/g,"parent.data"));for(const[d,p]of Object.entries(Ae))i=i.replace(new RegExp(`${d}\\.`,"g"),p+".");if(t==="js-eval"&&(i=P(i)),t==="js-tpl")for(const d of i.matchAll(/\{(.*?)\}/g))d[1]!=="q"&&(i=i.replace(d[0],"${"+P(d[1])+"}"));return i.includes("rootData")&&(s=!1),{type:t,expr:i,pure:s}},g=(e,t,i,s)=>{var d,p,y,w,b,k;if(!s.includes(e)){if(s.push(e),e.$ref){const[o,n]=t(i,e.$ref);g(o,t,n,s)}if(!e.layout){const o={};if((e.separator||e["x-separator"])&&(o.separator=e.separator||e["x-separator"],delete e.separator,delete e["x-separator"]),e["x-display"]==="icon"&&(e.enum||(d=e.items)!=null&&d.enum)&&(o.getItems={itemIcon:e["x-itemIcon"]||"data.value"},delete e["x-display"]),e["x-display"]){let n=e["x-display"];if(n==="radio"&&(n="radio-group"),n==="checkbox"&&e.type!=="boolean"&&(n="checkbox-group"),n==="switch"&&e.type!=="boolean"&&(n="switch-group"),n==="hidden"&&(n="none"),e.allOf&&e.properties){const u=[];for(const m of Object.keys(e.properties))u.push(m);const c={comp:n,children:[]};for(let m=0;m<e.allOf.length;m++)c.children.push("$allOf-"+m);u.push(c),o.children=u}else o.comp=n;delete e["x-display"]}if(e.format==="hexcolor"&&(o.comp="color-picker",delete e.format),e["x-props"]&&(o.props=e["x-props"],delete e["x-props"]),e["x-fromData"]&&(o.getItems=C(e["x-fromData"]),delete e["x-fromData"]),e["x-if"]&&(o.if=C(e["x-if"]),delete e["x-if"]),e["x-fromUrl"]){const n=e["x-fromUrl"];o.getItems={url:C(n,"js-tpl")},delete e["x-fromUrl"]}o.getItems&&ae(o.getItems)&&(e["x-itemKey"]&&(o.getItems.itemKey=`data["${e["x-itemKey"]}"]`),e["x-itemTitle"]&&(o.getItems.itemTitle=`data["${e["x-itemTitle"]}"]`),e["x-itemValue"]&&(o.getItems.itemValue=`data["${e["x-itemValue"]}"]`),e["x-itemIcon"]&&(o.getItems.itemIcon=`data["${e["x-itemIcon"]}"]`),e["x-itemsProp"]&&(o.getItems.itemsResults=`data["${e["x-itemsProp"]}"]`),delete e["x-itemKey"],delete e["x-itemTitle"],delete e["x-itemValue"],delete e["x-itemsProp"]),e["x-cols"]&&(o.cols=e["x-cols"]),(p=e["x-options"])!=null&&p.hideInArrayItem&&!o.if&&(o.if="!summary"),e.type==="array"&&e.items&&!o.getItems&&(Array.isArray(e.items)||(o.comp=o.comp??"list",e["x-itemTitle"]?o.itemTitle=`data["${e["x-itemTitle"]}"]`:((y=e.items.properties)!=null&&y.title||(w=e.items.allOf)!=null&&w.some(n=>{var u;return(u=n.properties)==null?void 0:u.title}))&&(o.itemTitle="data.title"))),Object.keys(o).length===1&&"comp"in o?e.layout=o.comp:Object.keys(o).length>0&&(e.layout=o)}if(e.properties)for(const o of Object.keys(e.properties))g(e.properties[o],t,i,s);if(e.allOf)for(const o of e.allOf)g(o,t,i,s);if(e.oneOf){if(!e.oneOfLayout){const o=Object.keys(((b=e.oneOf[0])==null?void 0:b.properties)||{}).find(n=>{var u;return!!((u=e.oneOf[0])!=null&&u.properties[n].const)});if(o){const n=(k=e.oneOf[0])==null?void 0:k.properties[o];n!=null&&n.title&&(e.oneOfLayout={label:n.title}),e.required&&Array.isArray(e.required)&&(e.required=e.required.filter(u=>u!==o))}}for(const o of e.oneOf)g(o,t,i,s)}if(e.anyOf)for(const o of e.anyOf)g(o,t,i,s);if(e.type==="array"&&e.items)if(Array.isArray(e.items))for(const o of e.items)g(o,t,i,s);else g(e.items,t,i,s);if(e.dependencies)for(const o of Object.keys(e.dependencies))g(e.dependencies[o],t,i,s);e.if&&(e.then&&g(e.then,t,i,s),e.else&&g(e.else,t,i,s))}};function Ie(e,t,i="en"){let s=t;if(!s){const w={strict:!1,allErrors:!0},b=new Te(w);Oe.default(b),s=b}const d=le(e);d.$id=d.$id??"_jl";const p=oe(d,s,i),y=[];return g(d,p,d.$id,y),d}const Pe={"custom-textarea":`
  <template #custom-textarea="{node, statefulLayout}">
    <textarea
      :value="node.data"
      style="border: 1px solid red;"
      placeholder="A custom textarea"
      @input="event => statefulLayout.input(node, event.target.value)"
    />
  </template>`,"custom-message":`
  <template #custom-message="{node, statefulLayout}">
    This message is defined in a slot (key={{ node.key }}, data={{ node.data }}, additional prop={{ prop1 }})
  </template>`},Me={components:{Vjsf:fe,VIcon:ce,VContainer:$e,VRow:Ve,VCol:ye,VSpacer:ke,VForm:ue,VBtn:_e,VDivider:je,VSelect:pe,VSwitch:de,VToolbar:xe,VSheet:se,VWindow:re,VSlider:ne,VWindowItem:ie,VDefaultsProvider:we,VThemeProvider:be},props:{example:{type:Object,required:!0},v2:{type:Boolean,default:!1}},data:()=>({data:null,tab:null,stateTree:null,display:null,options:{readOnly:!1,summary:!1,density:"comfortable",indent:!1,titleDepth:2,validateOn:"input",initialValidation:"withData",updateOn:"input",debounceInputMs:300,defaultOn:"empty",removeAdditional:"error",autofocus:!1,readOnlyPropertiesMode:"show",locale:"en",plugins:[me,Se]},filledOptions:null,wrapperWidth:100,slotCodes:Pe,valid:null,theme:"light"}),computed:{tabs(){var t;const e=[];return this.v2&&e.push({value:"schemaV2",title:"Schema V2"}),e.push({value:"schema",title:"Schema"}),e.push({value:"model",title:"Data"}),(t=this.example.codeSlots)!=null&&t.length&&e.push({value:"slots",title:"Slots"}),this.example.defaultProps&&e.push({value:"defaultProps",title:"Default props"}),e.push({value:"options",title:"Options"}),e},schema(){return this.v2?Ie(this.example.schema):this.example.schema},changeOption(e){return t=>{this.options={...this.options,[e]:t}}},validateColor(){return this.valid===!1?"error":this.valid===!0?"success":"default"}},created(){this.example.options&&Object.assign(this.options,this.example.options),this.example.data&&(this.data=JSON.parse(JSON.stringify(this.example.data)))},methods:{updateState(e){this.stateTree=e.stateTree,this.display=e.display,this.filledOptions={...e.options},delete this.filledOptions.vjsfSlots,delete this.filledOptions.nodeComponents,delete this.filledOptions.components,delete this.filledOptions.plugins},editExample(){const e={...this.options};delete e.plugins,localStorage.setItem("vjsf-editor-state",JSON.stringify({schema:this.schema,options:e,data:this.data})),this.$router.push("/editor")},toggleTheme(){this.theme=this.theme==="light"?"dark":"light"}}},Le={key:0,class:"text-caption ml-2"},qe=["value","onInput"];function Fe(e,t,i,s,d,p){const y=f("v-btn"),w=f("v-spacer"),b=f("v-icon"),k=f("v-toolbar"),o=f("v-divider"),n=R,u=f("v-window-item"),c=f("v-switch"),m=f("v-select"),q=f("v-slider"),U=f("v-defaults-provider"),h=f("v-col"),S=f("v-row"),F=f("v-window"),K=f("vjsf"),W=f("v-form"),B=f("v-container"),E=f("v-theme-provider"),N=f("v-sheet");return V(),x(N,{class:"my-6",border:"sm",rounded:"",color:"transparent"},{default:r(()=>[a(k,{density:"compact",color:"surface",rounded:""},{default:r(()=>[(V(!0),$(A,null,I(p.tabs,l=>(V(),x(y,{key:l.value,class:"text-none font-weight-bold ml-2",variant:e.tab===l.value?"flat":"text",active:e.tab===l.value,color:e.tab===l.value?"primary":"",onClick:j=>e.tab=e.tab===l.value?null:l.value},{default:r(()=>[_(v(l.title),1)]),_:2},1032,["variant","active","color","onClick"]))),128)),a(w),a(y,{icon:"",color:"primary",class:"mr-2",onClick:p.toggleTheme},{default:r(()=>[e.theme==="light"?(V(),x(b,{key:0,icon:"mdi-weather-night"})):(V(),x(b,{key:1,icon:"mdi-weather-sunny"}))]),_:1},8,["onClick"]),a(y,{color:"primary",icon:"mdi-pencil",onClick:p.editExample},null,8,["onClick"])]),_:1}),a(o),e.tab?(V(),x(F,{key:0,modelValue:e.tab,"onUpdate:modelValue":t[14]||(t[14]=l=>e.tab=l),style:{height:"600px","overflow-y":"auto"}},{default:r(()=>[a(u,{value:"schemaV2",class:"ma-3"},{default:r(()=>[a(n,null,{default:r(()=>[O("pre",null,v(JSON.stringify(i.example.schema,null,2)),1)]),_:1})]),_:1}),a(u,{value:"schema",class:"ma-3"},{default:r(()=>[a(n,null,{default:r(()=>[O("pre",null,v(JSON.stringify(p.schema,null,2)),1)]),_:1})]),_:1}),a(u,{value:"model",class:"ma-3 fill-height"},{default:r(()=>[e.data!==null&&e.data!==void 0?(V(),x(n,{key:0},{default:r(()=>[O("pre",null,v(JSON.stringify(e.data,null,2)),1)]),_:1})):D("",!0)]),_:1}),a(u,{value:"slots",class:"ma-3"},{default:r(()=>[(V(!0),$(A,null,I(i.example.codeSlots,l=>(V(),x(n,{key:l},{default:r(()=>[O("pre",null,v(e.slotCodes[l]),1)]),_:2},1024))),128))]),_:1}),a(u,{value:"defaultProps",class:"ma-3"},{default:r(()=>[a(n,null,{default:r(()=>[O("pre",null,v(JSON.stringify(i.example.defaultProps,null,2)),1)]),_:1})]),_:1}),a(u,{value:"options",class:"ma-3",style:{height:"600px"}},{default:r(()=>[a(S,{style:{height:"600px"}},{default:r(()=>[a(h,null,{default:r(()=>[a(U,{defaults:{global:{density:"compact",color:"primary",hideDetails:!0}}},{default:r(()=>[a(c,{modelValue:e.options.readOnly,"onUpdate:modelValue":t[0]||(t[0]=l=>e.options.readOnly=l),label:"readOnly"},null,8,["modelValue"]),a(c,{modelValue:e.options.summary,"onUpdate:modelValue":t[1]||(t[1]=l=>e.options.summary=l),label:"summary"},null,8,["modelValue"]),a(c,{modelValue:e.options.autofocus,"onUpdate:modelValue":t[2]||(t[2]=l=>e.options.autofocus=l),label:"autofocus"},null,8,["modelValue"]),a(m,{modelValue:e.options.density,"onUpdate:modelValue":t[3]||(t[3]=l=>e.options.density=l),style:{"max-width":"300px"},items:["default","comfortable","compact"]},null,8,["modelValue"]),a(c,{modelValue:e.options.indent,"onUpdate:modelValue":t[4]||(t[4]=l=>e.options.indent=l),label:"indent"},null,8,["modelValue"]),a(m,{modelValue:e.options.titleDepth,"onUpdate:modelValue":t[5]||(t[5]=l=>e.options.titleDepth=l),label:"titleDepth",style:{"max-width":"300px"},items:[1,2,3,4,5,6]},null,8,["modelValue"]),a(m,{modelValue:e.options.validateOn,"onUpdate:modelValue":t[6]||(t[6]=l=>e.options.validateOn=l),label:"validateOn",style:{"max-width":"300px"},items:["input","blur","submit"]},null,8,["modelValue"]),a(m,{modelValue:e.options.initialValidation,"onUpdate:modelValue":t[7]||(t[7]=l=>e.options.initialValidation=l),label:"initialValidation",style:{"max-width":"300px"},items:["never","withData","always"]},null,8,["modelValue"]),a(m,{modelValue:e.options.updateOn,"onUpdate:modelValue":t[8]||(t[8]=l=>e.options.updateOn=l),label:"updateOn",style:{"max-width":"300px"},items:["input","blur"]},null,8,["modelValue"]),a(m,{modelValue:e.options.defaultOn,"onUpdate:modelValue":t[9]||(t[9]=l=>e.options.defaultOn=l),label:"defaultOn",style:{"max-width":"300px"},items:["never","missing","empty"]},null,8,["modelValue"]),a(m,{modelValue:e.options.removeAdditional,"onUpdate:modelValue":t[10]||(t[10]=l=>e.options.removeAdditional=l),label:"removeAdditional",style:{"max-width":"300px"},items:["unknown","error","none"]},null,8,["modelValue"]),a(m,{modelValue:e.options.readOnlyPropertiesMode,"onUpdate:modelValue":t[11]||(t[11]=l=>e.options.readOnlyPropertiesMode=l),label:"readOnlyPropertiesMode",style:{"max-width":"300px"},items:["remove","hide","show"]},null,8,["modelValue"]),a(m,{modelValue:e.options.locale,"onUpdate:modelValue":t[12]||(t[12]=l=>e.options.locale=l),label:"locale",style:{"max-width":"300px"},items:["en","fr","nl"]},null,8,["modelValue"]),a(q,{modelValue:e.wrapperWidth,"onUpdate:modelValue":t[13]||(t[13]=l=>e.wrapperWidth=l),min:0,max:100,step:1,label:"container width",style:{"max-width":"600px"}},{append:r(()=>[_(v(e.wrapperWidth)+" % ",1)]),_:1},8,["modelValue"])]),_:1}),e.display?(V(),$("div",Le," width="+v(e.display.width)+"px, display="+v(e.display.name),1)):D("",!0)]),_:1}),a(o,{vertical:""}),a(h,{style:{height:"600px","overflow-y":"auto"}},{default:r(()=>[t[18]||(t[18]=O("div",{class:"text-subtitle"}," Options filled with default values: ",-1)),a(n,null,{default:r(()=>[O("pre",null,v(JSON.stringify(e.filledOptions,null,2)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):D("",!0),a(E,{theme:e.theme,"with-background":"",class:"rounded-b"},{default:r(()=>[a(B,{fluid:""},{default:r(()=>[O("div",{style:Y(`width: ${e.wrapperWidth}%`)},[a(W,{ref:"form",modelValue:e.valid,"onUpdate:modelValue":t[17]||(t[17]=l=>e.valid=l)},{default:r(()=>[a(U,{defaults:i.example.defaultProps||{}},{default:r(()=>[Z(e.$slots,"vjsf",{modelValue:e.data,options:e.options,updateState:p.updateState,updateModelValue:l=>e.data=l},()=>[a(K,{modelValue:e.data,"onUpdate:modelValue":t[15]||(t[15]=l=>e.data=l),schema:p.schema,options:e.options,"onUpdate:state":p.updateState},{"custom-textarea":r(({node:l,statefulLayout:j})=>[O("textarea",{value:l.data,style:{border:"1px solid red"},placeholder:"A custom textarea",onInput:z=>j.input(l,z.target.value)},null,40,qe)]),"custom-message":r(({node:l,prop1:j})=>[_(" This message is defined in a slot (key="+v(l.key)+", data="+v(l.data)+", additional prop="+v(j)+") ",1)]),_:1},8,["modelValue","schema","options","onUpdate:state"])])]),_:3},8,["defaults"]),a(S,{class:"ma-0"},{default:r(()=>[a(w),a(y,{color:p.validateColor,flat:"",class:"mt-2",onClick:t[16]||(t[16]=l=>e.$refs.form.validate())},{default:r(()=>t[19]||(t[19]=[_(" Validate ")])),_:1},8,["color"])]),_:1})]),_:3},8,["modelValue"])],4)]),_:3})]),_:3},8,["theme"])]),_:3})}const et=M(Me,[["render",Fe]]);export{Re as _,et as a};
