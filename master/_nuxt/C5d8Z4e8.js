import{_ as I,x as j,y as m,d as H,W as G,X,h as P,c as Y,Y as Q,g as d,E as O,C as r,B as a,H as _,O as S,P as T,D as k,A as u,z as V,I as Z,K as J}from"./D-LOyt65.js";import{_ as R}from"./DkrBmQfw.js";import{f as ee,g as te,h as le,r as oe,i as ae,b as ie,j as ne,a as re,V as se,k as de,l as pe,c as ue,_ as fe}from"./80AYKpEd.js";import{V as me}from"./rYM7HAXk.js";import{u as ve,a as ye,V as Ve}from"./DjyHCzcn.js";import{g as ge}from"./CE1G-McA.js";import{r as Oe,a as be}from"./C8p7oPRP.js";import"./C0Cj8P3V.js";import{a as ce,V as we}from"./BP9y2Ut4.js";import{V as xe}from"./CslT80_N.js";import{V as ke,a as je}from"./CS3W5DWp.js";import{V as _e}from"./C8eLy1kI.js";import{a as $e}from"./Mj5DCpFE.js";import{V as Ce}from"./BQIHqewH.js";const De={props:{content:{type:String,required:!0}}},Ue=["innerHTML"];function he(e,t,n,s,l,i){return m(),j("div",{class:"markdown-block",innerHTML:e.$markdown(n.content)},null,8,Ue)}const ot=Object.assign(I(De,[["render",he]]),{__name:"MarkdownBlock"}),Pe={name:"img-cropper",focusable:!0,isFileInput:!0,schema:{properties:{accept:{type:"string",default:"image/*"},placeholder:{type:"string"}}}},M=H({props:{modelValue:{type:Object,required:!0},statefulLayout:{type:Object,required:!0}},setup(e){G({},"VjsfImgCropper");const{inputProps:t,localData:n,compSlots:s}=ve(X(e,"modelValue"),e.statefulLayout,{layoutPropsMap:["placeholder","accept"]}),l=Y(!1);return()=>{const i=P(ee,{accept:"image/*",...t.value,modelValue:n.value},s.value);if(l.value){const p=P(te,{});return[i,p]}else return[i]}}});Q(M);const Se={info:Pe,nodeComponent:M};var Te=Oe();const Ae=ge(Te),Ie=Ae,Me={modelRoot:"rootData",root:"rootData",model:"data",value:"data"},A=e=>(e.match(/^[a-z.0-9]*$/i)&&!["data","context","rootData","parent"].some(t=>e.startsWith(t+"."))&&(e="rootData."+e),e=e.replace(/(.*)\.(\d+)(.*)/,"$1[$2]$3"),e),$=(e,t="js-eval")=>{let n=e,s=!0;n.includes("parent.value")&&(s=!1,n=n.replace(/parent\.value/g,"parent.data"));for(const[l,i]of Object.entries(Me))n=n.replace(new RegExp(`${l}\\.`,"g"),i+".");if(t==="js-eval"&&(n=A(n)),t==="js-tpl")for(const l of n.matchAll(/\{(.*?)\}/g))l[1]!=="q"&&(n=n.replace(l[0],"${"+A(l[1])+"}"));return n.includes("rootData")&&(s=!1),{type:t,expr:n,pure:s}},v=(e,t,n,s)=>{if(!s.includes(e)){if(s.push(e),e.$ref){const[l,i]=t(n,e.$ref);v(l,t,i,s)}if(!e.layout){const l={};if((e.separator||e["x-separator"])&&(l.separator=e.separator||e["x-separator"],delete e.separator,delete e["x-separator"]),e["x-display"]==="icon"&&(e.enum||e.items?.enum)&&(l.getItems={itemIcon:e["x-itemIcon"]||"data.value"},delete e["x-display"]),e["x-display"]){let i=e["x-display"];if(i==="radio"&&(i="radio-group"),i==="checkbox"&&e.type!=="boolean"&&(i="checkbox-group"),i==="switch"&&e.type!=="boolean"&&(i="switch-group"),i==="hidden"&&(i="none"),e.allOf&&e.properties){const p=[];for(const f of Object.keys(e.properties))p.push(f);const g={comp:i,children:[]};for(let f=0;f<e.allOf.length;f++)g.children.push("$allOf-"+f);p.push(g),l.children=p}else l.comp=i;delete e["x-display"]}if(e.format==="hexcolor"&&(l.comp="color-picker",delete e.format),e["x-props"]&&(l.props=e["x-props"],delete e["x-props"]),e["x-fromData"]&&(l.getItems=$(e["x-fromData"]),delete e["x-fromData"]),e["x-if"]&&(l.if=$(e["x-if"]),delete e["x-if"]),e["x-fromUrl"]){const i=e["x-fromUrl"];l.getItems={url:$(i,"js-tpl")},delete e["x-fromUrl"]}l.getItems&&ae(l.getItems)&&(e["x-itemKey"]&&(l.getItems.itemKey=`data["${e["x-itemKey"]}"]`),e["x-itemTitle"]&&(l.getItems.itemTitle=`data["${e["x-itemTitle"]}"]`),e["x-itemValue"]&&(l.getItems.itemValue=`data["${e["x-itemValue"]}"]`),e["x-itemIcon"]&&(l.getItems.itemIcon=`data["${e["x-itemIcon"]}"]`),e["x-itemsProp"]&&(l.getItems.itemsResults=`data["${e["x-itemsProp"]}"]`),delete e["x-itemKey"],delete e["x-itemTitle"],delete e["x-itemValue"],delete e["x-itemsProp"]),e["x-cols"]&&(l.cols=e["x-cols"]),e["x-options"]?.hideInArrayItem&&!l.if&&(l.if="!summary"),e.type==="array"&&e.items&&!l.getItems&&!Array.isArray(e.items)&&(!l.comp||l.comp==="list")&&(e["x-itemTitle"]?l.itemTitle=`data["${e["x-itemTitle"]}"]`:(e.items.properties?.title||e.items.allOf?.some(i=>i.properties?.title))&&(l.itemTitle="data.title")),Object.keys(l).length===1&&"comp"in l?e.layout=l.comp:Object.keys(l).length>0&&(e.layout=l)}if(e.properties)for(const l of Object.keys(e.properties))v(e.properties[l],t,n,s);if(e.allOf)for(const l of e.allOf)v(l,t,n,s);if(e.oneOf){if(!e.oneOfLayout){const l=Object.keys(e.oneOf[0]?.properties||{}).find(i=>!!e.oneOf[0]?.properties[i].const);if(l){const i=e.oneOf[0]?.properties[l];i?.title&&(e.oneOfLayout={label:i.title}),e.required&&Array.isArray(e.required)&&(e.required=e.required.filter(p=>p!==l))}}for(const l of e.oneOf)v(l,t,n,s)}if(e.anyOf)for(const l of e.anyOf)v(l,t,n,s);if(e.type==="array"&&e.items)if(Array.isArray(e.items))for(const l of e.items)v(l,t,n,s);else v(e.items,t,n,s);if(e.dependencies)for(const l of Object.keys(e.dependencies))v(e.dependencies[l],t,n,s);e.if&&(e.then&&v(e.then,t,n,s),e.else&&v(e.else,t,n,s))}};function Ee(e,t,n="en"){let s=t;if(!s){const g={strict:!1,allErrors:!0},f=new Ie(g);be.default(f),s=f}const l=le(e);l.$id=l.$id??"_jl";const i=oe(l,s,n),p=[];return v(l,i,l.$id,p),l}const Le={"custom-textarea":`
  <template #custom-textarea="{node, statefulLayout}">
    <textarea
      :value="node.data"
      style="border: 1px solid red;"
      placeholder="A custom textarea"
      @input="event => statefulLayout.input(node, event.target.value)"
    />
  </template>`,"custom-message":`
  <template #custom-message="{node, statefulLayout}">
    This message is defined in a slot (key={{ node.key }}, data={{ node.data }}, additional prop={{ prop1 }})
  </template>`},qe={components:{Vjsf:fe,VIcon:we,VContainer:Ce,VRow:Ve,VCol:ye,VSpacer:je,VForm:ue,VBtn:$e,VDivider:_e,VSelect:pe,VSwitch:de,VToolbar:ke,VSheet:se,VWindow:re,VSlider:ne,VWindowItem:ie,VDefaultsProvider:ce,VThemeProvider:xe},props:{example:{type:Object,required:!0},v2:{type:Boolean,default:!1}},data:()=>({data:null,tab:null,stateTree:null,display:null,options:{readOnly:!1,summary:!1,density:"comfortable",indent:!1,titleDepth:2,validateOn:"input",initialValidation:"withData",updateOn:"input",debounceInputMs:300,defaultOn:"empty",removeAdditional:"error",autofocus:!1,readOnlyPropertiesMode:"show",locale:"en",plugins:[me,Se]},filledOptions:null,wrapperWidth:100,slotCodes:Le,valid:null,theme:"light"}),computed:{tabs(){const e=[];return this.v2&&e.push({value:"schemaV2",title:"Schema V2"}),e.push({value:"schema",title:"Schema"}),e.push({value:"model",title:"Data"}),this.example.codeSlots?.length&&e.push({value:"slots",title:"Slots"}),this.example.defaultProps&&e.push({value:"defaultProps",title:"Default props"}),e.push({value:"options",title:"Options"}),e},schema(){return this.v2?Ee(this.example.schema):this.example.schema},changeOption(e){return t=>{this.options={...this.options,[e]:t}}},validateColor(){return this.valid===!1?"error":this.valid===!0?"success":"default"}},created(){this.example.options&&Object.assign(this.options,this.example.options),this.example.data&&(this.data=JSON.parse(JSON.stringify(this.example.data)))},methods:{updateState(e){this.stateTree=e.stateTree,this.display=e.display,this.filledOptions={...e.options},delete this.filledOptions.vjsfSlots,delete this.filledOptions.nodeComponents,delete this.filledOptions.components,delete this.filledOptions.plugins},editExample(){const e={...this.options};delete e.plugins,localStorage.setItem("vjsf-editor-state",JSON.stringify({schema:this.schema,options:e,data:this.data})),this.$router.push("/editor")},toggleTheme(){this.theme=this.theme==="light"?"dark":"light"}}},We={key:0,class:"text-caption ml-2"},Be=["value","onInput"];function Fe(e,t,n,s,l,i){const p=d("v-btn"),g=d("v-spacer"),f=d("v-icon"),E=d("v-toolbar"),C=d("v-divider"),b=R,c=d("v-window-item"),w=d("v-switch"),y=d("v-select"),L=d("v-slider"),D=d("v-defaults-provider"),U=d("v-col"),h=d("v-row"),q=d("v-window"),W=d("vjsf"),B=d("v-form"),F=d("v-container"),K=d("v-theme-provider"),N=d("v-sheet");return m(),O(N,{class:"my-6",border:"sm",rounded:"",color:"transparent"},{default:r(()=>[a(E,{density:"compact",color:"surface",rounded:""},{default:r(()=>[(m(!0),j(S,null,T(i.tabs,o=>(m(),O(p,{key:o.value,class:"text-none font-weight-bold ml-2",variant:e.tab===o.value?"flat":"text",active:e.tab===o.value,color:e.tab===o.value?"primary":"",onClick:x=>e.tab=e.tab===o.value?null:o.value},{default:r(()=>[k(u(o.title),1)]),_:2},1032,["variant","active","color","onClick"]))),128)),a(g),a(p,{icon:"",color:"primary",class:"mr-2",onClick:i.toggleTheme},{default:r(()=>[e.theme==="light"?(m(),O(f,{key:0,icon:"mdi-weather-night"})):(m(),O(f,{key:1,icon:"mdi-weather-sunny"}))]),_:1},8,["onClick"]),a(p,{color:"primary",icon:"mdi-pencil",onClick:i.editExample},null,8,["onClick"])]),_:1}),a(C),e.tab?(m(),O(q,{key:0,modelValue:e.tab,"onUpdate:modelValue":t[14]||(t[14]=o=>e.tab=o),style:{height:"600px","overflow-y":"auto"}},{default:r(()=>[a(c,{value:"schemaV2",class:"ma-3"},{default:r(()=>[a(b,null,{default:r(()=>[V("pre",null,u(JSON.stringify(n.example.schema,null,2)),1)]),_:1})]),_:1}),a(c,{value:"schema",class:"ma-3"},{default:r(()=>[a(b,null,{default:r(()=>[V("pre",null,u(JSON.stringify(i.schema,null,2)),1)]),_:1})]),_:1}),a(c,{value:"model",class:"ma-3 fill-height"},{default:r(()=>[e.data!==null&&e.data!==void 0?(m(),O(b,{key:0},{default:r(()=>[V("pre",null,u(JSON.stringify(e.data,null,2)),1)]),_:1})):_("",!0)]),_:1}),a(c,{value:"slots",class:"ma-3"},{default:r(()=>[(m(!0),j(S,null,T(n.example.codeSlots,o=>(m(),O(b,{key:o},{default:r(()=>[V("pre",null,u(e.slotCodes[o]),1)]),_:2},1024))),128))]),_:1}),a(c,{value:"defaultProps",class:"ma-3"},{default:r(()=>[a(b,null,{default:r(()=>[V("pre",null,u(JSON.stringify(n.example.defaultProps,null,2)),1)]),_:1})]),_:1}),a(c,{value:"options",class:"ma-3",style:{height:"600px"}},{default:r(()=>[a(h,{style:{height:"600px"}},{default:r(()=>[a(U,null,{default:r(()=>[a(D,{defaults:{global:{density:"compact",color:"primary",hideDetails:!0}}},{default:r(()=>[a(w,{modelValue:e.options.readOnly,"onUpdate:modelValue":t[0]||(t[0]=o=>e.options.readOnly=o),label:"readOnly"},null,8,["modelValue"]),a(w,{modelValue:e.options.summary,"onUpdate:modelValue":t[1]||(t[1]=o=>e.options.summary=o),label:"summary"},null,8,["modelValue"]),a(w,{modelValue:e.options.autofocus,"onUpdate:modelValue":t[2]||(t[2]=o=>e.options.autofocus=o),label:"autofocus"},null,8,["modelValue"]),a(y,{modelValue:e.options.density,"onUpdate:modelValue":t[3]||(t[3]=o=>e.options.density=o),style:{"max-width":"300px"},items:["default","comfortable","compact"]},null,8,["modelValue"]),a(w,{modelValue:e.options.indent,"onUpdate:modelValue":t[4]||(t[4]=o=>e.options.indent=o),label:"indent"},null,8,["modelValue"]),a(y,{modelValue:e.options.titleDepth,"onUpdate:modelValue":t[5]||(t[5]=o=>e.options.titleDepth=o),label:"titleDepth",style:{"max-width":"300px"},items:[1,2,3,4,5,6]},null,8,["modelValue"]),a(y,{modelValue:e.options.validateOn,"onUpdate:modelValue":t[6]||(t[6]=o=>e.options.validateOn=o),label:"validateOn",style:{"max-width":"300px"},items:["input","blur","submit"]},null,8,["modelValue"]),a(y,{modelValue:e.options.initialValidation,"onUpdate:modelValue":t[7]||(t[7]=o=>e.options.initialValidation=o),label:"initialValidation",style:{"max-width":"300px"},items:["never","withData","always"]},null,8,["modelValue"]),a(y,{modelValue:e.options.updateOn,"onUpdate:modelValue":t[8]||(t[8]=o=>e.options.updateOn=o),label:"updateOn",style:{"max-width":"300px"},items:["input","blur"]},null,8,["modelValue"]),a(y,{modelValue:e.options.defaultOn,"onUpdate:modelValue":t[9]||(t[9]=o=>e.options.defaultOn=o),label:"defaultOn",style:{"max-width":"300px"},items:["never","missing","empty"]},null,8,["modelValue"]),a(y,{modelValue:e.options.removeAdditional,"onUpdate:modelValue":t[10]||(t[10]=o=>e.options.removeAdditional=o),label:"removeAdditional",style:{"max-width":"300px"},items:["unknown","error","none"]},null,8,["modelValue"]),a(y,{modelValue:e.options.readOnlyPropertiesMode,"onUpdate:modelValue":t[11]||(t[11]=o=>e.options.readOnlyPropertiesMode=o),label:"readOnlyPropertiesMode",style:{"max-width":"300px"},items:["remove","hide","show"]},null,8,["modelValue"]),a(y,{modelValue:e.options.locale,"onUpdate:modelValue":t[12]||(t[12]=o=>e.options.locale=o),label:"locale",style:{"max-width":"300px"},items:["en","fr","nl"]},null,8,["modelValue"]),a(L,{modelValue:e.wrapperWidth,"onUpdate:modelValue":t[13]||(t[13]=o=>e.wrapperWidth=o),min:0,max:100,step:1,label:"container width",style:{"max-width":"600px"}},{append:r(()=>[k(u(e.wrapperWidth)+" % ",1)]),_:1},8,["modelValue"])]),_:1}),e.display?(m(),j("div",We," width="+u(e.display.width)+"px, display="+u(e.display.name),1)):_("",!0)]),_:1}),a(C,{vertical:""}),a(U,{style:{height:"600px","overflow-y":"auto"}},{default:r(()=>[t[18]||(t[18]=V("div",{class:"text-subtitle"}," Options filled with default values: ",-1)),a(b,null,{default:r(()=>[V("pre",null,u(JSON.stringify(e.filledOptions,null,2)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):_("",!0),a(K,{theme:e.theme,"with-background":"",class:"rounded-b"},{default:r(()=>[a(F,{fluid:""},{default:r(()=>[V("div",{style:Z(`width: ${e.wrapperWidth}%`)},[a(B,{ref:"form",modelValue:e.valid,"onUpdate:modelValue":t[17]||(t[17]=o=>e.valid=o)},{default:r(()=>[a(D,{defaults:n.example.defaultProps||{}},{default:r(()=>[J(e.$slots,"vjsf",{modelValue:e.data,options:e.options,updateState:i.updateState,updateModelValue:o=>e.data=o},()=>[a(W,{modelValue:e.data,"onUpdate:modelValue":t[15]||(t[15]=o=>e.data=o),schema:i.schema,options:e.options,"onUpdate:state":i.updateState},{"custom-textarea":r(({node:o,statefulLayout:x})=>[V("textarea",{value:o.data,style:{border:"1px solid red"},placeholder:"A custom textarea",onInput:z=>x.input(o,z.target.value)},null,40,Be)]),"custom-message":r(({node:o,prop1:x})=>[k(" This message is defined in a slot (key="+u(o.key)+", data="+u(o.data)+", additional prop="+u(x)+") ",1)]),_:1},8,["modelValue","schema","options","onUpdate:state"])])]),_:3},8,["defaults"]),a(h,{class:"ma-0"},{default:r(()=>[a(g),a(p,{color:i.validateColor,flat:"",class:"mt-2",onClick:t[16]||(t[16]=o=>e.$refs.form.validate())},{default:r(()=>[...t[19]||(t[19]=[k(" Validate ",-1)])]),_:1},8,["color"])]),_:1})]),_:3},8,["modelValue"])],4)]),_:3})]),_:3},8,["theme"])]),_:3})}const at=Object.assign(I(qe,[["render",Fe]]),{__name:"VjsfExample"});export{ot as _,at as a};
