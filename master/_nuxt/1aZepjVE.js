var gr=Object.defineProperty;var yr=(e,t,r)=>t in e?gr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var $=(e,t,r)=>yr(e,typeof t!="symbol"?t+"":t,r);import{p as Bt,q as vr,r as _r,t as Cr,s as wr,c as Oe,d as br,e as Jt,f as Yt,h as Gt,u as Ir,i as Tr,j as Sr,w as Fr}from"./f7UZSzEA.js";import{g as qt}from"./BosuxZz1.js";import{a0 as Ar,S as q,o as Zt,ab as Nt,bv as kr,aa as Er,bw as ke,bx as Qt,ai as pe,an as Z,r as N,j as ee,al as ge,af as Pr,E as zr,ap as Dr,M as $r,by as Or,aL as Mr,aq as ie}from"./CGS-rA66.js";var We={exports:{}},Xt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatNames=e.fastFormats=e.fullFormats=void 0;function t(_,g){return{validate:_,compare:g}}e.fullFormats={date:t(c,s),time:t(a,f),"date-time":t(l,h),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:v,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:b,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:p,int32:{type:"number",validate:F},int64:{type:"number",validate:w},float:{type:"number",validate:T},double:{type:"number",validate:T},password:!0,binary:!0},e.fastFormats={...e.fullFormats,date:t(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,s),time:t(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,f),"date-time":t(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,h),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},e.formatNames=Object.keys(e.fullFormats);function r(_){return _%4===0&&(_%100!==0||_%400===0)}const i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,n=[0,31,28,31,30,31,30,31,31,30,31,30,31];function c(_){const g=i.exec(_);if(!g)return!1;const C=+g[1],M=+g[2],U=+g[3];return M>=1&&M<=12&&U>=1&&U<=(M===2&&r(C)?29:n[M])}function s(_,g){if(_&&g)return _>g?1:_<g?-1:0}const o=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function a(_,g){const C=o.exec(_);if(!C)return!1;const M=+C[1],U=+C[2],Q=+C[3],te=C[5];return(M<=23&&U<=59&&Q<=59||M===23&&U===59&&Q===60)&&(!g||te!=="")}function f(_,g){if(!(_&&g))return;const C=o.exec(_),M=o.exec(g);if(C&&M)return _=C[1]+C[2]+C[3]+(C[4]||""),g=M[1]+M[2]+M[3]+(M[4]||""),_>g?1:_<g?-1:0}const u=/t|\s/i;function l(_){const g=_.split(u);return g.length===2&&c(g[0])&&a(g[1],!0)}function h(_,g){if(!(_&&g))return;const[C,M]=_.split(u),[U,Q]=g.split(u),te=s(C,U);if(te!==void 0)return te||f(M,Q)}const m=/\/|:/,d=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function v(_){return m.test(_)&&d.test(_)}const A=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function p(_){return A.lastIndex=0,A.test(_)}const S=-2147483648,E=2**31-1;function F(_){return Number.isInteger(_)&&_<=E&&_>=S}function w(_){return Number.isInteger(_)}function T(){return!0}const D=/[^\\]\\Z/;function b(_){if(D.test(_))return!1;try{return new RegExp(_),!0}catch{return!1}}})(Xt);var er={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLimitDefinition=void 0;const t=vr,r=Bt,i=r.operators,n={formatMaximum:{okStr:"<=",ok:i.LTE,fail:i.GT},formatMinimum:{okStr:">=",ok:i.GTE,fail:i.LT},formatExclusiveMaximum:{okStr:"<",ok:i.LT,fail:i.GTE},formatExclusiveMinimum:{okStr:">",ok:i.GT,fail:i.LTE}},c={message:({keyword:o,schemaCode:a})=>r.str`should be ${n[o].okStr} ${a}`,params:({keyword:o,schemaCode:a})=>r._`{comparison: ${n[o].okStr}, limit: ${a}}`};e.formatLimitDefinition={keyword:Object.keys(n),type:"string",schemaType:"string",$data:!0,error:c,code(o){const{gen:a,data:f,schemaCode:u,keyword:l,it:h}=o,{opts:m,self:d}=h;if(!m.validateFormats)return;const v=new t.KeywordCxt(h,d.RULES.all.format.definition,"format");v.$data?A():p();function A(){const E=a.scopeValue("formats",{ref:d.formats,code:m.code.formats}),F=a.const("fmt",r._`${E}[${v.schemaCode}]`);o.fail$data(r.or(r._`typeof ${F} != "object"`,r._`${F} instanceof RegExp`,r._`typeof ${F}.compare != "function"`,S(F)))}function p(){const E=v.schema,F=d.formats[E];if(!F||F===!0)return;if(typeof F!="object"||F instanceof RegExp||typeof F.compare!="function")throw new Error(`"${l}": format "${E}" does not define "compare" function`);const w=a.scopeValue("formats",{key:E,ref:F,code:m.code.formats?r._`${m.code.formats}${r.getProperty(E)}`:void 0});o.fail$data(S(w))}function S(E){return r._`${E}.compare(${f}, ${u}) ${n[l].fail} 0`}},dependencies:["format"]};const s=o=>(o.addKeyword(e.formatLimitDefinition),o);e.default=s})(er);(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});const r=Xt,i=er,n=Bt,c=new n.Name("fullFormats"),s=new n.Name("fastFormats"),o=(f,u={keywords:!0})=>{if(Array.isArray(u))return a(f,u,r.fullFormats,c),f;const[l,h]=u.mode==="fast"?[r.fastFormats,s]:[r.fullFormats,c],m=u.formats||r.formatNames;return a(f,m,l,h),u.keywords&&i.default(f),f};o.get=(f,u="full")=>{const h=(u==="fast"?r.fastFormats:r.fullFormats)[f];if(!h)throw new Error(`Unknown format "${f}"`);return h};function a(f,u,l,h){var m,d;(m=(d=f.opts.code).formats)!==null&&m!==void 0||(d.formats=n._`require("ajv-formats/dist/formats").${h}`);for(const v of u)f.addFormat(v,l[v])}e.exports=t=o,Object.defineProperty(t,"__esModule",{value:!0}),t.default=o})(We,We.exports);var jr=We.exports;const xr=qt(jr);var tr=Symbol.for("immer-nothing"),Dt=Symbol.for("immer-draftable"),W=Symbol.for("immer-state");function B(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var fe=Object.getPrototypeOf;function de(e){return!!e&&!!e[W]}function ae(e){var t;return e?rr(e)||Array.isArray(e)||!!e[Dt]||!!((t=e.constructor)!=null&&t[Dt])||Pe(e)||ze(e):!1}var Vr=Object.prototype.constructor.toString();function rr(e){if(!e||typeof e!="object")return!1;const t=fe(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Vr}function ye(e,t){Ee(e)===0?Object.entries(e).forEach(([r,i])=>{t(r,i,e)}):e.forEach((r,i)=>t(i,r,e))}function Ee(e){const t=e[W];return t?t.type_:Array.isArray(e)?1:Pe(e)?2:ze(e)?3:0}function Le(e,t){return Ee(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ir(e,t,r){const i=Ee(e);i===2?e.set(t,r):i===3?e.add(r):e[t]=r}function Rr(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Pe(e){return e instanceof Map}function ze(e){return e instanceof Set}function ne(e){return e.copy_||e.base_}function Ue(e,t){if(Pe(e))return new Map(e);if(ze(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&rr(e))return fe(e)?{...e}:Object.assign(Object.create(null),e);const r=Object.getOwnPropertyDescriptors(e);delete r[W];let i=Reflect.ownKeys(r);for(let n=0;n<i.length;n++){const c=i[n],s=r[c];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[c]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[c]})}return Object.create(fe(e),r)}function Xe(e,t=!1){return De(e)||de(e)||!ae(e)||(Ee(e)>1&&(e.set=e.add=e.clear=e.delete=Hr),Object.freeze(e),t&&ye(e,(r,i)=>Xe(i,!0))),e}function Hr(){B(2)}function De(e){return Object.isFrozen(e)}var Kr={};function oe(e){const t=Kr[e];return t||B(0,e),t}var ve;function nr(){return ve}function Wr(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function $t(e,t){t&&(oe("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Be(e){Je(e),e.drafts_.forEach(Lr),e.drafts_=null}function Je(e){e===ve&&(ve=e.parent_)}function Ot(e){return ve=Wr(ve,e)}function Lr(e){const t=e[W];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Mt(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[W].modified_&&(Be(t),B(4)),ae(e)&&(e=Se(t,e),t.parent_||Fe(t,e)),t.patches_&&oe("Patches").generateReplacementPatches_(r[W].base_,e,t.patches_,t.inversePatches_)):e=Se(t,r,[]),Be(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==tr?e:void 0}function Se(e,t,r){if(De(t))return t;const i=t[W];if(!i)return ye(t,(n,c)=>jt(e,i,t,n,c,r)),t;if(i.scope_!==e)return t;if(!i.modified_)return Fe(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const n=i.copy_;let c=n,s=!1;i.type_===3&&(c=new Set(n),n.clear(),s=!0),ye(c,(o,a)=>jt(e,i,n,o,a,r,s)),Fe(e,n,!1),r&&e.patches_&&oe("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function jt(e,t,r,i,n,c,s){if(de(n)){const o=c&&t&&t.type_!==3&&!Le(t.assigned_,i)?c.concat(i):void 0,a=Se(e,n,o);if(ir(r,i,a),de(a))e.canAutoFreeze_=!1;else return}else s&&r.add(n);if(ae(n)&&!De(n)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Se(e,n),(!t||!t.scope_.parent_)&&Fe(e,n)}}function Fe(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Xe(t,r)}function Ur(e,t){const r=Array.isArray(e),i={type_:r?1:0,scope_:t?t.scope_:nr(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let n=i,c=et;r&&(n=[i],c=_e);const{revoke:s,proxy:o}=Proxy.revocable(n,c);return i.draft_=o,i.revoke_=s,o}var et={get(e,t){if(t===W)return e;const r=ne(e);if(!Le(r,t))return Br(e,r,t);const i=r[t];return e.finalized_||!ae(i)?i:i===Me(e.base_,t)?(je(e),e.copy_[t]=Ge(i,e)):i},has(e,t){return t in ne(e)},ownKeys(e){return Reflect.ownKeys(ne(e))},set(e,t,r){const i=sr(ne(e),t);if(i!=null&&i.set)return i.set.call(e.draft_,r),!0;if(!e.modified_){const n=Me(ne(e),t),c=n==null?void 0:n[W];if(c&&c.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(Rr(r,n)&&(r!==void 0||Le(e.base_,t)))return!0;je(e),Ye(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Me(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,je(e),Ye(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=ne(e),i=Reflect.getOwnPropertyDescriptor(r,t);return i&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:i.enumerable,value:r[t]}},defineProperty(){B(11)},getPrototypeOf(e){return fe(e.base_)},setPrototypeOf(){B(12)}},_e={};ye(et,(e,t)=>{_e[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});_e.deleteProperty=function(e,t){return _e.set.call(this,e,t,void 0)};_e.set=function(e,t,r){return et.set.call(this,e[0],t,r,e[0])};function Me(e,t){const r=e[W];return(r?ne(r):e)[t]}function Br(e,t,r){var n;const i=sr(t,r);return i?"value"in i?i.value:(n=i.get)==null?void 0:n.call(e.draft_):void 0}function sr(e,t){if(!(t in e))return;let r=fe(e);for(;r;){const i=Object.getOwnPropertyDescriptor(r,t);if(i)return i;r=fe(r)}}function Ye(e){e.modified_||(e.modified_=!0,e.parent_&&Ye(e.parent_))}function je(e){e.copy_||(e.copy_=Ue(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Jr=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,i)=>{if(typeof t=="function"&&typeof r!="function"){const c=r;r=t;const s=this;return function(a=c,...f){return s.produce(a,u=>r.call(this,u,...f))}}typeof r!="function"&&B(6),i!==void 0&&typeof i!="function"&&B(7);let n;if(ae(t)){const c=Ot(this),s=Ge(t,void 0);let o=!0;try{n=r(s),o=!1}finally{o?Be(c):Je(c)}return $t(c,i),Mt(n,c)}else if(!t||typeof t!="object"){if(n=r(t),n===void 0&&(n=t),n===tr&&(n=void 0),this.autoFreeze_&&Xe(n,!0),i){const c=[],s=[];oe("Patches").generateReplacementPatches_(t,n,c,s),i(c,s)}return n}else B(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(s,...o)=>this.produceWithPatches(s,a=>t(a,...o));let i,n;return[this.produce(t,r,(s,o)=>{i=s,n=o}),i,n]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){ae(e)||B(8),de(e)&&(e=Yr(e));const t=Ot(this),r=Ge(e,void 0);return r[W].isManual_=!0,Je(t),r}finishDraft(e,t){const r=e&&e[W];(!r||!r.isManual_)&&B(9);const{scope_:i}=r;return $t(i,t),Mt(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(n.path.length===0&&n.op==="replace"){e=n.value;break}}r>-1&&(t=t.slice(r+1));const i=oe("Patches").applyPatches_;return de(e)?i(e,t):this.produce(e,n=>i(n,t))}};function Ge(e,t){const r=Pe(e)?oe("MapSet").proxyMap_(e,t):ze(e)?oe("MapSet").proxySet_(e,t):Ur(e,t);return(t?t.scope_:nr()).drafts_.push(r),r}function Yr(e){return de(e)||B(10,e),ar(e)}function ar(e){if(!ae(e)||De(e))return e;const t=e[W];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Ue(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Ue(e,!0);return ye(r,(i,n)=>{ir(r,i,ar(n))}),t&&(t.finalized_=!1),r}var L=new Jr,x=L.produce;L.produceWithPatches.bind(L);var Gr=L.setAutoFreeze.bind(L);L.setUseStrictShallowCopy.bind(L);L.applyPatches.bind(L);L.createDraft.bind(L);L.finishDraft.bind(L);const qr={errorOneOf:"chose one",errorRequired:"required information",addItem:"Add item",delete:"Delete",edit:"Edit",confirm:"Confirm",close:"Close",duplicate:"Duplicate",copy:"Copy",paste:"Paste",sort:"Sort",up:"Move up",down:"Move down",showHelp:"Show a help message",mdeLink1:"[Link title",mdeLink2:"](link url)",mdeImg1:"![](",mdeImg2:"image url)",mdeTable1:"",mdeTable2:`

| Column 1 | Column 2 | Column 3 |
| -------- | -------- | -------- |
| Text     | Text     | Text     |

`,bold:"Bold",italic:"Italic",heading:"Title",quote:"Quote",unorderedList:"Unordered list",orderedList:"Ordered list",createLink:"Create a link",insertImage:"Insert an image",createTable:"Create a table",preview:"Aperçu du rendu",mdeGuide:"Documentation de la syntaxe",undo:"Undo",redo:"Redo",default:"default: ",name:"name: ",examples:"Examples: ",deprecated:"Warning, this information is deprecated.",keyboardDate:"MM/DD/YYYY",keyboardDateTime:"MM/DD/YYYY HH:mm"},Zr={errorOneOf:"choisissez une valeur",errorRequired:"information obligatoire",addItem:"Ajouter un élément",delete:"Supprimer",edit:"Éditer",confirm:"Confirmer",close:"Fermer",duplicate:"Dupliquer",copy:"Copier",paste:"Coller",sort:"Trier",up:"Décaler vers le haut",down:"Décaler vers le bas",showHelp:"Afficher un message d'aide",mdeLink1:"[titre du lien",mdeLink2:"](adresse du lien)",mdeImg1:"![](",mdeImg2:"adresse de l'image)",mdeTable1:"",mdeTable2:`

| Colonne 1 | Colonne 2 | Colonne 3 |
| -------- | -------- | -------- |
| Texte     | Texte     | Texte     |

`,bold:"Gras",italic:"Italique",heading:"Titre",quote:"Citation",unorderedList:"Liste à puce",orderedList:"Liste numérotée",createLink:"Créer un lien",insertImage:"Insérer une image",createTable:"Créer un tableau",preview:"Preview",mdeGuide:"Syntax documentation",undo:"Défaire",redo:"Refaire",default:"défaut : ",name:"nom : ",examples:"Exemples : ",deprecated:"Attention, cette information est obsolète.",keyboardDate:"JJ/MM/AAAA",keyboardDateTime:"JJ/MM/AAAA HH:mm"},Nr={errorOneOf:"Kies er een",errorRequired:"benodigde informatie",addItem:"Item toevoegen",delete:"Verwijderen",confirm:"Bevestigen",edit:"Bewerken",close:"Sluiten",duplicate:"Verveelvoudigen",copy:"Kopiëren",paste:"Plakken",sort:"Sorteren",up:"Omhoog verplaatsen",down:"Omlaag verplaatsen",showHelp:"Toon helpbericht",mdeLink1:"[Link titel",mdeLink2:"](link url)",mdeImg1:"![](",mdeImg2:"afbeelding url)",mdeTable1:"",mdeTable2:`

| Kolom 1  | Kolom 2  | Kolom 3  |
| -------- | -------- | -------- |
| Tekst    | Tekst    | Tekst    |

`,bold:"Vet",italic:"Cursief",heading:"Titel",quote:"Citaat",unorderedList:"Ongeordende lijst",orderedList:"Geordende lijst",createLink:"Maak een koppeling",insertImage:"Afbeelding invoegen",createTable:"Tabel aanmaken",preview:"Voorbeeld",mdeGuide:"Documentatie over syntaxis",undo:"Ongedaan maken",redo:"Opnieuw",default:"standaard: ",name:"naam: ",examples:"Voorbeelden: ",deprecated:"Waarschuwing, deze informatie is verouderd.",keyboardDate:"DD-MM-YYYY",keyboardDateTime:"DD-MM-YYYY HH:mm"},Qr={errorOneOf:"Wählen Sie eine Option",errorRequired:"Erforderliche Information",addItem:"Element hinzufügen",delete:"Löschen",edit:"Bearbeiten",confirm:"Bestätigen",close:"Schließen",duplicate:"Duplizieren",copy:"Kopie",paste:"Paste",sort:"Sortieren",up:"Nach oben verschieben",down:"Nach unten verschieben",showHelp:"Hilfemeldung anzeigen",mdeLink1:"[Link-Titel",mdeLink2:"](Link-URL)",mdeImg1:"![](",mdeImg2:"Bild-URL)",mdeTable1:"",mdeTable2:`

| Spalte 1 | Spalte 2 | Spalte 3 |
| -------- | -------- | -------- |
| Text     | Text     | Text     |

`,bold:"Fett",italic:"Kursiv",heading:"Titel",quote:"Zitat",unorderedList:"Ungeordnete Liste",orderedList:"Geordnete Liste",createLink:"Link erstellen",insertImage:"Bild einfügen",createTable:"Tabelle erstellen",preview:"Vorschau",mdeGuide:"Syntax-Dokumentation",undo:"Rückgängig",redo:"Wiederholen",default:"standard: ",name:"name: ",examples:"Beispiele: ",deprecated:"Achtung, diese Information ist veraltet.",keyboardDate:"TT.MM.JJJJ",keyboardDateTime:"TT.MM.JJJJ HH:mm"},xt={en:qr,fr:Zr,nl:Nr,de:Qr};function Ae(e=[],t=[]){if(!e||!t||e.length!==t.length)return t;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return t;return e}function Xr(e={},t={}){if(!e||!t)return t;const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return t;for(const n of r)if(e[n]!==t[n])return t;return e}function or(e=[],t=[]){if(!e||!t)return e===t;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}const ei=_r,Zi=e=>{let t=e.ajv;if(!t){const o={allErrors:!0,strict:!1,verbose:!0,...e.ajvOptions},a=new ei(o);xr.default(a),Cr.default(a),t=a}try{t.addKeyword("layout")}catch{}try{t.addKeyword("__pointer")}catch{}let r=e.markdown;r||(r=a=>Ar.parse(a,e.markedOptions));const i=e.defaultLocale||"en",n=e.locale||i,c={...xt[n]||xt[i]};e.messages&&Object.assign(c,e.messages);const s=wr.reduce((o,a)=>(o[a.name]=a,o),{});if(e.components){for(const o of Object.keys(e.components))s[o]={...e.components[o],name:o};Object.assign(s,e.components)}return{ajv:t,markdown:r,useDescription:["help","subtitle"],useDefault:"data",useName:!1,useExamples:"items",useDeprecated:!1,useTitle:"label",...e,locale:n,defaultLocale:i,messages:c,components:s,xI18n:!!e.xI18n}},Ni=x((e,t)=>{for(const r of["ajv","ajvOptions","code","markdown","markedOptions","xI18n","locale","defaultLocale","messages","optionsKeys","components","useDescription","useDefault","useName","useExamples","useDeprecated","useTitle"])if(r in t){if(r==="components"&&or(Object.keys(e.components??[]),Object.keys(t.components??[])))continue;e[r]=t[r]}else delete e[r]});var qe={exports:{}},xe,Vt;function ti(){if(Vt)return xe;Vt=1;var e=1e3,t=e*60,r=t*60,i=r*24,n=i*7,c=i*365.25;xe=function(u,l){l=l||{};var h=typeof u;if(h==="string"&&u.length>0)return s(u);if(h==="number"&&isFinite(u))return l.long?a(u):o(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function s(u){if(u=String(u),!(u.length>100)){var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(l){var h=parseFloat(l[1]),m=(l[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return h*c;case"weeks":case"week":case"w":return h*n;case"days":case"day":case"d":return h*i;case"hours":case"hour":case"hrs":case"hr":case"h":return h*r;case"minutes":case"minute":case"mins":case"min":case"m":return h*t;case"seconds":case"second":case"secs":case"sec":case"s":return h*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return h;default:return}}}}function o(u){var l=Math.abs(u);return l>=i?Math.round(u/i)+"d":l>=r?Math.round(u/r)+"h":l>=t?Math.round(u/t)+"m":l>=e?Math.round(u/e)+"s":u+"ms"}function a(u){var l=Math.abs(u);return l>=i?f(u,l,i,"day"):l>=r?f(u,l,r,"hour"):l>=t?f(u,l,t,"minute"):l>=e?f(u,l,e,"second"):u+" ms"}function f(u,l,h,m){var d=l>=h*1.5;return Math.round(u/h)+" "+m+(d?"s":"")}return xe}function ri(e){r.debug=r,r.default=r,r.coerce=a,r.disable=s,r.enable=n,r.enabled=o,r.humanize=ti(),r.destroy=f,Object.keys(e).forEach(u=>{r[u]=e[u]}),r.names=[],r.skips=[],r.formatters={};function t(u){let l=0;for(let h=0;h<u.length;h++)l=(l<<5)-l+u.charCodeAt(h),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=t;function r(u){let l,h=null,m,d;function v(...A){if(!v.enabled)return;const p=v,S=Number(new Date),E=S-(l||S);p.diff=E,p.prev=l,p.curr=S,l=S,A[0]=r.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let F=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(T,D)=>{if(T==="%%")return"%";F++;const b=r.formatters[D];if(typeof b=="function"){const _=A[F];T=b.call(p,_),A.splice(F,1),F--}return T}),r.formatArgs.call(p,A),(p.log||r.log).apply(p,A)}return v.namespace=u,v.useColors=r.useColors(),v.color=r.selectColor(u),v.extend=i,v.destroy=r.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(m!==r.namespaces&&(m=r.namespaces,d=r.enabled(u)),d),set:A=>{h=A}}),typeof r.init=="function"&&r.init(v),v}function i(u,l){const h=r(this.namespace+(typeof l>"u"?":":l)+u);return h.log=this.log,h}function n(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];const l=(typeof u=="string"?u:"").trim().replace(" ",",").split(",").filter(Boolean);for(const h of l)h[0]==="-"?r.skips.push(h.slice(1)):r.names.push(h)}function c(u,l){let h=0,m=0,d=-1,v=0;for(;h<u.length;)if(m<l.length&&(l[m]===u[h]||l[m]==="*"))l[m]==="*"?(d=m,v=h,m++):(h++,m++);else if(d!==-1)m=d+1,v++,h=v;else return!1;for(;m<l.length&&l[m]==="*";)m++;return m===l.length}function s(){const u=[...r.names,...r.skips.map(l=>"-"+l)].join(",");return r.enable(""),u}function o(u){for(const l of r.skips)if(c(u,l))return!1;for(const l of r.names)if(c(u,l))return!0;return!1}function a(u){return u instanceof Error?u.stack||u.message:u}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var ii=ri;(function(e,t){var r={};t.formatArgs=n,t.save=c,t.load=s,t.useColors=i,t.storage=o(),t.destroy=(()=>{let f=!1;return()=>{f||(f=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function i(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let f;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(f=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(f[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(f){if(f[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+f[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;f.splice(1,0,u,"color: inherit");let l=0,h=0;f[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(l++,m==="%c"&&(h=l))}),f.splice(h,0,u)}t.log=console.debug||console.log||(()=>{});function c(f){try{f?t.storage.setItem("debug",f):t.storage.removeItem("debug")}catch{}}function s(){let f;try{f=t.storage.getItem("debug")}catch{}return!f&&typeof process<"u"&&"env"in process&&(f=r.DEBUG),f}function o(){try{return localStorage}catch{}}e.exports=ii(t);const{formatters:a}=e.exports;a.j=function(f){try{return JSON.stringify(f)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(qe,qe.exports);var ni=qe.exports;const G=qt(ni),we=["xs","sm","md","lg","xl","xxl"],O={xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560};class Ze{constructor(t){$(this,"width");this.width=t}get name(){for(let t=0;t<we.length;t++)if(we[t+1]&&this.width<O[we[t+1]])return we[t];return"xxl"}get xs(){return this.width<O.sm}get sm(){return this.width>=O.sm&&this.width<O.md}get smAndDown(){return this.width<O.md}get smAndUp(){return this.width>=O.sm}get md(){return this.width>=O.md&&this.width<O.lg}get mdAndDown(){return this.width<O.lg}get mobile(){return this.mdAndDown}get mdAndUp(){return this.width>=O.md}get lg(){return this.width>=O.lg&&this.width<O.xl}get lgAndDown(){return this.width<O.xl}get lgAndUp(){return this.width>=O.lg}get xl(){return this.width>=O.xl&&this.width<O.xxl}get xlAndDown(){return this.width<O.xxl}get xlAndUp(){return this.width>=O.xl}get xxl(){return this.width>=O.xxl}}function si(e,t){if(!t)return[e,12];let r=t.xs;return e.smAndUp&&t.sm!==void 0&&(r=t.sm),e.mdAndUp&&t.md!==void 0&&(r=t.md),e.lgAndUp&&t.lg!==void 0&&(r=t.lg),e.xlAndUp&&t.xl!==void 0&&(r=t.xl),e.xxl&&t.xxl!==void 0&&(r=t.xxl),[r===12?e:new Ze(Math.round(e.width*(r/12))),r]}const Ve={};function lr(e){return Ve[e]=Ve[e]??new RegExp(e),Ve[e]}const Rt=typeof window>"u"?"http://test.com":window.location.origin,ai=(e,t)=>e.startsWith("http://")||e.startsWith("https://")?new URL(e):e.startsWith("/")?new URL(Rt+e):new URL(Rt+t+e),be=G("jl:state-node"),oi=G("jl:validation"),Re=G("jl:get-items"),Ie=e=>!!(e===""||e===void 0||Array.isArray(e)&&!e.length||typeof e=="object"&&!Array.isArray(e)&&e&&Object.values(e).findIndex(t=>t!==void 0)===-1),ur=(e,t,r)=>!!(r.defaultOn==="missing"&&e===void 0||r.defaultOn==="empty"&&Ie(e)),li=x((e,t,r,i,n,c,s,o,a,f,u,l,h,m,d,v,A,p,S,E)=>{if(e.messages=o.messages?ui(e.messages||{},o.messages,m):m.messages,e.key=t,e.fullKey=r,e.parentFullKey=i,e.dataPath=n,e.parentDataPath=c,e.skeleton=s,e.layout=o,e.width=a,e.options=m,e.cols=f,v||e.loading&&e.data===u?e.loading=!0:delete e.loading,e.data=u,e.error=l,e.itemsCacheKey=S,e.childError=E&&E.findIndex(F=>F.error||F.childError)!==-1,e.validated=h,d)e.autofocus=!0,delete e.autofocusChild;else{delete e.autofocus;const F=E==null?void 0:E.find(w=>w.autofocus);F?e.autofocusChild=F.key:delete e.autofocusChild}e.props=A,e.slots=p,e.children=E}),ui=x((e,t,r)=>{Object.assign(e,r.messages,t)}),ci=x((e,t)=>{for(const r of t){const i=r.key;r.data===void 0?delete e[i]:e[i]=r.data}for(;e.length&&e[e.length-1]===void 0;)e.pop()}),fi=x((e,t,r,i,n)=>{for(let c=0;c<e.length;c++)e[c]instanceof File||(e[c]=cr(e[c],t+"/"+c,void 0,r,i,n))}),cr=x((e,t,r,i,n,c)=>{if(n&&(n.length||r!=null&&r.length))for(const s of Object.keys(e))n.includes(s)||delete e[s];if(c)for(const s of c)delete e[s];if(r)for(const s of r)if(t===s.dataPath){if(s.data===void 0||s.data===null)continue;if(r.length>1)for(const o of Object.keys(s.data))r.some(a=>a.key===o)||!s.skeleton.propertyKeys.includes(o)&&r.some(a=>a.key!==s.key&&a.skeleton.propertyKeys.includes(o))||(e[o]=s.data[o]);else Object.assign(e,s.data)}else s.data===void 0?delete e[s.key]:e[s.key]=s.data;if(i!=null&&i.length)for(const s of i)s.instancePath===t&&(s.keyword==="additionalProperties"&&delete e[s.params.additionalProperty],s.keyword==="unevaluatedProperties"&&delete e[s.params.unevaluatedProperty])}),di=x((e,t,r,i)=>{for(const n of Object.keys(t))r.includes(n)||i.some(c=>!!n.match(lr(c)))&&(e[n]=t[n]);for(const n of Object.keys(e))n in t||delete e[n]}),hi=x((e,t,r={})=>{for(const i in t)e[i]=r[i]??t[i];for(const i in r)e[i]=r[i];for(const i in e)!(i in t)&&!(i in r)&&delete e[i]}),Ht=x(e=>{e.readOnly=!0,e.summary=!0}),mi=x((e,t)=>{t.title&&e.titleDepth<6&&(e.titleDepth+=1)}),Kt=(e,t,r,i)=>{var c,s,o,a;const n=((s=(c=e.params)==null?void 0:c.errors)==null?void 0:s[0])??e;return i===n.instancePath&&((o=n.params)==null?void 0:o.missingProperty)===t.key||n.instancePath===r&&(n.schemaPath===t.pointer||n.schemaPath===t.refPointer)&&!((a=n.params)!=null&&a.missingProperty)},le=(e,t,r,i,n)=>{var s,o;const c=((o=(s=t.params)==null?void 0:s.errors)==null?void 0:o[0])??t;if(!c.instancePath.startsWith(i))return!1;if(c.schemaPath===r.pointer||c.schemaPath.startsWith(r.pointer+"/")||c.schemaPath===r.refPointer||c.schemaPath.startsWith(r.refPointer+"/"))return!0;if(r.children)for(const a of r.children){const f=e.skeletonNodes[a];if(f&&me(t,f.pointer,f.refPointer,i))return!0}if(r.childrenTrees)for(const a of r.childrenTrees){const f=e.skeletonTrees[a];if(f&&me(t,f.root,f.refPointer,i))return!0}return!1},pi=(e,t)=>{var i,n;return(((n=(i=e.params)==null?void 0:i.errors)==null?void 0:n[0])??e).instancePath.startsWith(t)},me=(e,t,r,i,n)=>{var s,o;const c=((o=(s=e.params)==null?void 0:s.errors)==null?void 0:o[0])??e;return c.instancePath.startsWith(i)?!!(c.schemaPath===t||c.schemaPath.startsWith(t+"/")||c.schemaPath===r||c.schemaPath.startsWith(r+"/")):!1};function K(e,t,r,i,n,c,s,o,a){if(t.ref===void 0)throw new Error("expression was not compiled : "+JSON.stringify(t));const f=e[t.ref];try{return t.pure?f(r,r,i,i.context,n,c,i.readOnly,i.summary,s):f(r,r,i,i.context,n,c,i.readOnly,i.summary,s,o,a)}catch(u){const l={expression:t,data:r,context:i.context,display:n};throw l[t.dataAlias]=r,t.pure||(l.rootData=o,l.parent=a),console.warn("json-layout: failed to evaluate expression",u,l),new Error("json-layout: failed to evaluate expression")}}const He={comp:"none"},gi=(e,t,r,i,n,c,s,o)=>{if(Tr(e)){for(const a of e.switch)if(!a.if||K(i.expressions,a.if,c,r,n,a,i.validates,s,o))return a}else return t!=null&&t.if&&!K(i.expressions,t.if,c,r,n,e,i.validates,s,o)||e.if&&!K(i.expressions,e.if,c,r,n,e,i.validates,s,o)?He:e;return He};function ce(e,t,r,i,n,c,s,o,a,f,u,l,h,m,d){var te,tt,rt,it,nt,st,at,ot,lt,ut,ct,ft,dt,ht,mt,pt,gt,yt,vt,_t,Ct,wt,bt,It,Tt,St,Ft,At,kt,Et,Pt,zt;be("createStateNode",n);let v=null;if(a.pure&&!(d!=null&&d.error)&&!(d!=null&&d.childError)&&!t.noStateCache){const y=m.validatedForm||m.validatedChildren.includes(n);if(v=[d,t,r,n,e.currentInput!==null&&e.currentInput.startsWith(n),a,f,u.width,y,e.activatedItems,e.initial,((te=e.rehydrateErrors)==null?void 0:te.length)??0,l],d&&e.cacheKeys[n]&&or(e.cacheKeys[n],v))return be("createStateNode cache hit",n),e._debugCache&&(e._debugCache[n]=(e._debugCache[n]??[]).concat(["hit"])),d.layout.comp==="list"&&d.layout.getItems&&Re(n,"list component node is fully reused from cache, no fetch will be triggered"),d;be("createStateNode cache miss",n),e._debugCache&&(e._debugCache[n]=(e._debugCache[n]??[]).concat(["miss"]))}else be("createStateNode cache skip",n),e._debugCache&&(e._debugCache[n]=(e._debugCache[n]??[]).concat(["skip"]));const A=f&&(Sr(f)||Fr(f))?f:r.normalizedLayouts[a.pointer],p=gi(A,f,t,r,u,l,e.rootData,h),[S,E]=si(u,(f==null?void 0:f.cols)??p.cols),F=(f==null?void 0:f.slots)??p.slots,w=p.getOptions?hi((d==null?void 0:d.options)??{},t,K(r.expressions,p.getOptions,l,t,S,p,r.validates,e.rootData,h)):t;e.initial&&t.autofocus&&p.autofocus&&p.comp!=="none"&&(e.autofocusTarget=n);let T;if(Oe(p,r.components)){const y=l??{},P=mi(w,p);T=[];let j=e.autofocusTarget===n;for(let z=0;z<p.children.length;z++){const I=p.children[z];if(["remove","hide"].includes(w.readOnlyPropertiesMode)&&((tt=a.roPropertyKeys)!=null&&tt.includes(I.key)))continue;let k=a;const J=(rt=a.children)==null?void 0:rt.find(he=>r.skeletonNodes[he].key===I.key);if(J!==void 0&&(k=r.skeletonNodes[J]),k.condition&&!K(r.expressions,k.condition,y,t,S,p,r.validates,e.rootData,h))continue;const R=typeof I.key=="string"&&I.key.startsWith("$"),Y=`${n}/${I.key}`;j&&(e.autofocusTarget=Y);let re=R?y:y[I.key];if(I.key==="$patternProperties"){const he=r.normalizedLayouts[k.pointer];re=di(((nt=(it=d==null?void 0:d.children)==null?void 0:it.find(pr=>pr.key==="$patternProperties"))==null?void 0:nt.data)??{},y,a.propertyKeys,he.indexed??[])}const $e=ce(e,P,r,I.key,Y,n,R?s:`${s}/${I.key}`,s,k,I,S,re,{parent:h,data:y},m,(st=d==null?void 0:d.children)==null?void 0:st.find(he=>he.fullKey===Y));($e.autofocus||$e.autofocusChild!==void 0)&&(j=!1),T.push($e)}}if(i==="$oneOf"&&a.childrenTrees){let y=e.activatedItems[n];const P=(at=a.childrenTrees)==null?void 0:at.findIndex(j=>r.validates[r.skeletonTrees[j].refPointer](l));if(y===void 0&&(console.log("detect active child"),a.discriminator!==void 0&&P===-1?(console.log("desciminator"),y=(ot=a.childrenTrees)==null?void 0:ot.findIndex(j=>a.discriminator!==void 0&&(l==null?void 0:l[a.discriminator])!==void 0&&l[a.discriminator]===r.skeletonTrees[j].discriminatorValue)):(console.log("other"),y=P),console.log(y)),y!==-1){const j=r.skeletonTrees[a.childrenTrees[y]],z=r.skeletonNodes[j.root];n in e.activatedItems||(e.autoActivatedItems[n]=y),e.errors=(lt=e.errors)==null?void 0:lt.filter(k=>!(Kt(k,a,s,o)||le(r,k,a,s)&&!me(k,z.pointer,z.refPointer,s))),(ut=e.additionalPropertiesErrors)!=null&&ut.length&&(e.additionalPropertiesErrors=(ct=e.additionalPropertiesErrors)==null?void 0:ct.filter(k=>!pi(k,s)||me(k,z.pointer,z.refPointer,s)?!0:!(le(r,k,a,s)&&!me(k,z.pointer,z.refPointer,s)||P===-1)));const I=`${n}/${y}`;e.autofocusTarget===n&&(e.autofocusTarget=I),T=[ce(e,w,r,y,I,n,s,s,z,null,S,l,{parent:h,data:l},m,(ft=d==null?void 0:d.children)==null?void 0:ft[0])]}}if(br(p))if(p.indexed){const y=l??[],P=p.listEditMode==="inline"?w:Ht(w);T=[];let j=e.autofocusTarget===n;const z=Object.keys(y);for(let I=0;I<z.length;I++){const k=z[I];let J=null;if(((dt=a==null?void 0:a.childrenTrees)==null?void 0:dt.length)===1)J=r.skeletonNodes[(ht=r.skeletonTrees[a==null?void 0:a.childrenTrees[0]])==null?void 0:ht.root];else for(let R=0;R<p.indexed.length;R++){const Y=p.indexed[R],re=(mt=a==null?void 0:a.childrenTrees)==null?void 0:mt[R];if(!re)throw new Error(`missing skeleton tree for pattern ${Y}`);k.match(lr(Y))&&(J=r.skeletonNodes[(pt=r.skeletonTrees[re])==null?void 0:pt.root])}if(J){const R=`${n}/${k}`;j&&(e.autofocusTarget=R);const Y=ce(e,p.listEditMode==="inline-single"&&e.activatedItems[n]===I?w:P,r,k,R,n,`${s}/${k}`,s,J,null,S,y[k],{parent:h,data:y},m,(gt=d==null?void 0:d.children)==null?void 0:gt.find(re=>re.key===k));(Y.autofocus||Y.autofocusChild!==void 0)&&(j=!1),T.push(Y)}}}else{const y=l??[],P=((yt=a==null?void 0:a.childrenTrees)==null?void 0:yt[0])&&r.skeletonNodes[(_t=r.skeletonTrees[(vt=a==null?void 0:a.childrenTrees)==null?void 0:vt[0]])==null?void 0:_t.root],j=p.listEditMode==="inline"?w:Ht(w);T=[];let z=e.autofocusTarget===n;for(let I=0;I<y.length;I++){const k=y[I],J=`${n}/${I}`;z&&(e.autofocusTarget=J);const R=ce(e,p.listEditMode==="inline-single"&&e.activatedItems[n]===I?w:j,r,I,J,n,`${s}/${I}`,s,P,null,S,k,{parent:h,data:y},m,(Ct=d==null?void 0:d.children)==null?void 0:Ct[I]);(R.autofocus||R.autofocusChild!==void 0)&&(z=!1),T.push(R)}if(e.activatedItems[n]!==void 0&&(p.listEditMode==="menu"||p.listEditMode==="dialog")){const I=e.activatedItems[n],k=ce(e,w,r,I,`${n}/${I}`,n,`${s}/${I}`,s,P,null,S,y[I],{parent:h,data:y},m,(wt=d==null?void 0:d.children)==null?void 0:wt[I]);T.push(k)}}let D=(bt=e.errors)==null?void 0:bt.find(y=>Kt(y,a,s,o));!D&&!Oe(p,r.components)&&p.comp!=="slot"&&(D=(It=e.errors)==null?void 0:It.findLast(y=>le(r,y,a,s))),!D&&e.rehydrate&&e.rehydrateErrors&&(D=(Tt=e.rehydrateErrors)==null?void 0:Tt.findLast(y=>le(r,y,a,s))),p.comp!=="none"&&D&&(oi(`${n} capture validation error on node`,D),e.errors=(St=e.errors)==null?void 0:St.filter(y=>D!==y),!Oe(p,r.components)&&p.comp!=="slot"&&(e.errors=(Ft=e.errors)==null?void 0:Ft.filter(y=>!le(r,y,a,s))),e.rehydrate&&e.rehydrateErrors&&(e.rehydrateErrors=(At=e.rehydrateErrors)==null?void 0:At.filter(y=>!le(r,y,a,s))));let b=l;b===null&&!p.nullable&&(b=void 0);const _=m.validatedForm||m.validatedChildren.includes(n)||m.initialized===!1&&w.initialValidation==="always"||m.initialized===!1&&w.initialValidation==="withData"&&!Ie(b);if(typeof((kt=T==null?void 0:T[0])==null?void 0:kt.key)=="number"&&p.comp!=="one-of-select"&&!p.indexed)b=ci(b??[],T);else if(Array.isArray(b)){const y=((Et=a.childrenTrees)==null?void 0:Et[0])&&r.skeletonTrees[(Pt=a.childrenTrees)==null?void 0:Pt[0]],P=y&&r.skeletonNodes[y.root]||null;b=fi(b??[],s,e.additionalPropertiesErrors,[!0,"unknown"].includes(w.removeAdditional)?P==null?void 0:P.propertyKeys:void 0,w.readOnlyPropertiesMode==="remove"?P==null?void 0:P.roPropertyKeys:void 0)}else if((typeof b=="object"||b===void 0&&(T!=null&&T.length))&&!(b instanceof File)){const y=[!0,"unknown"].includes(w.removeAdditional)||(T==null?void 0:T.some(P=>P.key==="$patternProperties"));b=cr(b??{},s,T,e.additionalPropertiesErrors,y?a.propertyKeys:void 0,w.readOnlyPropertiesMode==="remove"?a.roPropertyKeys:void 0)}if(b!==l&&(Array.isArray(l)&&Array.isArray(b)?b=Ae(l,b):typeof l=="object"&&typeof b=="object"&&(b=Xr(l,b))),p.getConstData)e.rehydrate||(b=K(r.expressions,p.getConstData,b,w,S,p,r.validates,e.rootData,h));else if(p.getDefaultData&&ur(b,p,w)&&e.currentInput!==n){if(!e.rehydrate){const y=K(r.expressions,p.getDefaultData,b,w,S,p,r.validates,e.rootData,h);(b===void 0||!Ie(y))&&(b=y)}}else Ie(b)&&(p.nullable?(w.defaultOn!=="missing"||b!==void 0)&&(b=null):w.defaultOn!=="missing"&&(b=void 0));let g;p.getProps&&(g=K(r.expressions,p.getProps,b,w,S,p,r.validates,e.rootData,h));let C;if(Jt(p,r.components)){if(p.items)C=p.items;else if((zt=p.getItems)!=null&&zt.immutable&&(d!=null&&d.itemsCacheKey))C=d.itemsCacheKey;else if(p.getItems&&Yt(p.getItems))if(p.getItems.immutable&&(d!=null&&d.itemsCacheKey))C=d.itemsCacheKey;else try{C=K(r.expressions,p.getItems,b,w,S,p,r.validates,e.rootData,h)}catch{C=null}else if(p.getItems&&Gt(p.getItems))try{const y=K(r.expressions,p.getItems.url,null,w,S,p,r.validates,e.rootData,h),P=ai(y,w.fetchBaseURL);if(p.getItems.searchParams)for(const[j,z]of Object.entries(p.getItems.searchParams)){let I;try{I=K(r.expressions,z,null,w,S,p,r.validates,e.rootData,h),I&&P.searchParams.set(j,I)}catch{}}if(p.getItems.headers)for(const[j,z]of Object.entries(p.getItems.headers)){let I;try{I=K(r.expressions,z,null,w,S,p,r.validates,e.rootData,h),I&&P.searchParams.set("__jl__header__"+j,I)}catch{}}C=P.href}catch(y){console.warn("failed to process URL for getItems",y),C=null}}const M=Ir(p,r.components)&&!w.readOnly&&!w.summary&&e.autofocusTarget===n,U=p.comp==="list"&&C&&(d==null?void 0:d.itemsCacheKey)!==C;U?Re(n,"list component with getItems expression registered for fetch",C):p.comp==="list"&&C&&Re(n,"list component with unchanged getItems cache key, no fetch will be triggered",C);const Q=li(d??{},i,n,c,s,o,a,p,S.width,E,b,D==null?void 0:D.message,_,w,M,U,g,F,C,T&&Ae(d==null?void 0:d.children,T));return v&&(v[0]=Q,e.cacheKeys[n]=v),U&&e.getItemsDataRequests.push(Q),Q}const yi=x((e,t,r)=>{if(t.dataPath===t.parentDataPath){if(Object.assign(e,r),t.data&&typeof r=="object"&&r!==null)for(const i of Object.keys(t.data))i in r||delete e[i]}else e[t.key]=r}),vi=(e,t,r)=>{const i=[];for(const n of r){const c=t.find(s=>s.key===n.key);c?i.push(e[t.indexOf(c)]):i.push(n.value)}return Ae(e,i)},Wt=G("jl:validation"),_i=G("jl:state-tree"),Ci=x((e,t,r)=>{e.root=t,e.valid=r});function*fr(e){if(yield e,e.children)for(const t of e.children)yield*fr(t)}function wi(e,t,r,i,n,c,s,o){var l,h,m;_i("createStateTree",i.root);const a=r.validates[i.refPointer],f=a(c);if(a.errors){Wt(`${i.root} new state tree initial validation errors`,a.errors,s);for(const d of a.errors)d.keyword!=="errorMessage"&&r.localizeErrors([d]);if(e.errors=e.allErrors=a.errors,e.errors.length)for(const d of e.errors){const v=((h=(l=d.params)==null?void 0:l.errors)==null?void 0:h[0])??d;v!=null&&v.parentSchema.__pointer&&(v.schemaPath=v==null?void 0:v.parentSchema.__pointer,v.keyword==="oneOf"&&(v.schemaPath+="/oneOf"))}[!0,"error"].includes(t.removeAdditional)&&(e.additionalPropertiesErrors=a.errors.filter(d=>d.keyword==="additionalProperties"||d.keyword==="unevaluatedProperties"))}e.rehydrateErrors&&(e.rehydrateErrors=e.rehydrateErrors.filter(d=>{var v;return(v=e.errors)==null?void 0:v.some(A=>A.instancePath===d.instancePath&&A.schemaPath===d.schemaPath&&A.keyword===d.keyword)})),e.rehydrate&&((m=e.rehydrateErrors)!=null&&m.length)&&Wt(`${i.root} some validation errors were not captured by a leaf property, try to capture on a parent on rehydrate`,e.rehydrateErrors);const u=ce(e,t,r,"","",null,"",null,r.skeletonNodes[i.root],null,n,c,null,s,o==null?void 0:o.root);e.nodes=[],e.files=[];for(const d of fr(u))e.nodes.push(d),d.data instanceof File&&e.files.push({dataPath:d.dataPath,file:d.data});return Ci(o??{},u,f)}function bi(e,t){const r={...t.messages};return e.messages&&Object.assign(r,e.messages),{context:{},width:1e3,readOnly:!1,summary:!1,density:"default",indent:!1,titleDepth:2,validateOn:"input",initialValidation:"withData",updateOn:"input",debounceInputMs:300,defaultOn:"empty",removeAdditional:"error",autofocus:!1,readOnlyPropertiesMode:"show",fetchBaseURL:"/",fetchOptions:{},fetch:async(i,n)=>(await fetch(i,n)).json(),onAutofocus:()=>{},onUpdate:()=>{},onData:()=>{},noStateCache:!1,...e,messages:r}}const Qi=e=>!!e&&e.layout.comp==="section",Ii=(e,t)=>!!e&&Jt(e.layout,t),H=G("jl:data-binding"),Ti=G("jl:select-items"),X=G("jl:get-items"),ue=G("jl:activated-items");class Si{constructor(t,r,i,n){$(this,"_compiledLayout");$(this,"_stateTree");$(this,"skeletonTree");$(this,"_display");$(this,"_validationState");$(this,"_options");$(this,"_data");$(this,"_previousData");$(this,"_dataWaitingForBlur",!1);$(this,"_currentInput",null);$(this,"_lastCreateStateTreeContext");$(this,"_autofocusTarget");$(this,"_previousAutofocusTarget");$(this,"files",[]);$(this,"debouncedInput",null);$(this,"_itemsCache",{});$(this,"activatedItems");H("create stateful layout",t,r,i,n),this._compiledLayout=t,this.skeletonTree=r,this.prepareOptions(i),this._autofocusTarget=this.options.autofocus?"":null,this._previousAutofocusTarget=null,this._data=n,this._previousData=n,this.initValidationState(),this.activatedItems={},this.updateState(),this.handleAutofocus()}get compiledLayout(){return this._compiledLayout}get stateTree(){return this._stateTree}get display(){return this._display}get validationState(){return this._validationState}set validationState(t){H("set validationState",t),this._validationState={initialized:t.initialized??this._validationState.initialized??!1,validatedForm:t.validatedForm??this._validationState.validatedForm??!1,validatedChildren:t.validatedChildren??this._validationState.validatedChildren??[]}}get options(){return this._options}set options(t){H("apply main options setter",t),this.prepareOptions(t),this.updateState()}get data(){return this._data}set data(t){H("apply main data setter",t),this._data=t,this.updateState()}prepareOptions(t){this._options=bi(t,this.compiledLayout),this._display=this._display&&this._display.width===this._options.width?this._display:new Ze(this._options.width)}initValidationState(){const t=this.options.initialValidation==="always";this._validationState={initialized:t,validatedForm:t,validatedChildren:[]}}updateState(){var r;this.createStateTree();let t=0;for(;this._data!==(this._stateTree.root.data??null)||this._autofocusTarget!==this._lastCreateStateTreeContext.autofocusTarget||t===0&&((r=this._lastCreateStateTreeContext.errors)!=null&&r.length);){if(t+=1,t>100)throw console.error("too many iterations in updateState, the data is probably not stable",this._data,this._stateTree.root.data),new Error("too many iterations in updateState, the data is probably not stable");H("hydrating state tree changed the data, do it again",this._data,this._stateTree.root.data),this._data=this._stateTree.root.data??null,this._autofocusTarget=this._lastCreateStateTreeContext.autofocusTarget,this.createStateTree(!0)}!this._stateTree.valid&&!this._stateTree.root.error&&!this._stateTree.root.childError&&console.error("JSON layout failed to assign validation error to a node",this._lastCreateStateTreeContext.errors),H("emit update event",this._data,this._stateTree),this.options.onUpdate(this),this.emitData()}emitData(){!this._dataWaitingForBlur&&this._data!==this._previousData&&(H("emit data event",this._data),this.options.onData(this._data),this._previousData=this._data)}createStateTree(t=!1){var i,n,c;const r={activatedItems:this.activatedItems,autoActivatedItems:{},autofocusTarget:this._autofocusTarget,currentInput:this._currentInput,initial:!this._lastCreateStateTreeContext,rehydrate:t,cacheKeys:((i=this._lastCreateStateTreeContext)==null?void 0:i.cacheKeys)??{},rootData:this._data,files:[],nodes:[],getItemsDataRequests:[],rehydrateErrors:t?(n=this._lastCreateStateTreeContext)==null?void 0:n.errors:void 0};this._options._debugCache&&(r._debugCache=((c=this._lastCreateStateTreeContext)==null?void 0:c._debugCache)??{}),this._stateTree=wi(r,this._options,this._compiledLayout,this.skeletonTree,this._display,this._data,this._validationState,this._stateTree),this._lastCreateStateTreeContext=r,this.validationState.initialized||(this.validationState={initialized:!0,validatedChildren:r.nodes.filter(s=>s.validated).map(s=>s.fullKey)}),this.files=Ae(this.files,r.files);for(const s in r.autoActivatedItems)ue("auto-activated item",s,r.autoActivatedItems[s]),this.activatedItems=x(this.activatedItems,o=>{o[s]=r.autoActivatedItems[s]});for(const s of r.getItemsDataRequests)X(s.fullKey,"automatic get items triggered"),this.getItems(s).then(o=>{X(s.fullKey,"automatic get items, fetched results",o);const a=s.data??[],f=a.map(l=>this.prepareSelectItem(s,l)),u=vi(a,f,o);X(s.fullKey,"automatic get items, input produced data",u),this.input(s,u)},o=>console.error("error fetching items",s.fullKey,o))}validate(){this.validationState.validatedForm||(this.validationState={validatedForm:!0},this.updateState())}resetValidation(){H("resetValidation"),this.initValidationState(),this.updateState()}get valid(){return this.stateTree.valid}get errors(){return this._lastCreateStateTreeContext.nodes.filter(t=>!!t.error).map(t=>t.error)}get hasHiddenError(){return this._lastCreateStateTreeContext.nodes.findIndex(t=>t.error&&!t.validated)!==-1}getParentContextExpression(t){const r=this._lastCreateStateTreeContext.nodes.find(i=>i.fullKey===t.parentFullKey);return r?{parent:this.getParentContextExpression(r),data:r.data}:null}evalNodeExpression(t,r,i){return K(this.compiledLayout.expressions,r,i,t.options,new Ze(t.width),t.layout,this.compiledLayout.validates,this._data,this.getParentContextExpression(t))}applyInput(t,r,i,n){var a;H("apply input event from node",t,r);const c=t.layout.transformData&&this.evalNodeExpression(t,t.layout.transformData,r);if((a=this.compiledLayout.components[t.layout.comp])!=null&&a.isFileInput){if(c)r.toJSON=()=>c;else if(r instanceof File){const f={name:r.name,size:r.size,type:r.type};r.toJSON=()=>f}else if(Array.isArray(r))for(const f of r){const u={name:f.name,size:f.size,type:f.type};f.toJSON=()=>u}}else c&&(r=c);if(i&&!this.validationState.validatedChildren.includes(t.fullKey)&&(this.validationState={validatedChildren:this.validationState.validatedChildren.concat([t.fullKey])}),n!==void 0&&(ue(t.fullKey,"activated item on input",n),this.activatedItems=x(this.activatedItems,f=>{f[t.fullKey]=n}),this._autofocusTarget=t.fullKey+"/"+n),t.parentFullKey===null){H("update root state after input"),this._data=r,this.updateState();return}const s=this._lastCreateStateTreeContext.nodes.find(f=>f.fullKey===t.parentFullKey);if(!s)throw new Error(`parent with key "${t.parentFullKey}" not found`);const o=yi(s.data??(typeof t.key=="number"?[]:{}),t,r??(t.skeleton.nullable?null:void 0));this.applyInput(s,o,i),n!==void 0&&this.handleAutofocus()}applyDebouncedInput(){this.debouncedInput&&(clearTimeout(this.debouncedInput[4]),this.applyInput(this.debouncedInput[0],this.debouncedInput[1],this.debouncedInput[2],this.debouncedInput[3]),this.debouncedInput=null)}input(t,r,i){var o,a;H("received input event from node",t,r,i),t.layout.comp==="list"&&this.deactivateItem(t,!0),this.debouncedInput&&(this.debouncedInput[0]===t?clearTimeout(this.debouncedInput[4]):this.applyDebouncedInput());const n=(o=this.compiledLayout.components[t.layout.comp])==null?void 0:o.emitsBlur;n&&(this._currentInput=t.fullKey),t.options.updateOn==="blur"&&n&&(this._dataWaitingForBlur=!0);const c=t.options.validateOn==="input"||t.options.validateOn==="blur"&&!n;((a=this.compiledLayout.components[t.layout.comp])==null?void 0:a.shouldDebounce)&&t.options.debounceInputMs?this.debouncedInput=[t,r,c,i,setTimeout(()=>this.applyDebouncedInput(),t.options.debounceInputMs)]:this.applyInput(t,r,c,i)}blur(t){this._currentInput===t.fullKey&&(this._currentInput=null),this.debouncedInput?this.applyDebouncedInput():t.layout.getDefaultData&&ur(t.data,t.layout,t.options)&&this.applyInput(t,t.data,!0),H("received blur event from node",t),(t.options.validateOn==="input"||t.options.validateOn==="blur")&&!this.validationState.validatedChildren.includes(t.fullKey)&&(this.validationState={validatedChildren:this.validationState.validatedChildren.concat([t.fullKey])},this.updateState()),this._dataWaitingForBlur&&(this._dataWaitingForBlur=!1,this.emitData())}validateNodeRecurse(t){if(this.validationState={validatedChildren:this.validationState.validatedChildren.concat([t.fullKey])},t.children)for(const r of t.children)this.validateNodeRecurse(r);this.updateState()}async getItemsWithoutCache(t,r=""){var s,o;if(!Ii(t,this._compiledLayout.components))throw new Error("node is not a component with an items list");if(t.itemsCacheKey===null)return{appliedQ:!1,items:[]};let i=!1,n;if((t.layout.items||t.layout.getItems&&Yt(t.layout.getItems))&&(n=t.itemsCacheKey,X(t.fullKey,"raw items from context or schema or getItems expression",n)),t.layout.getItems&&Gt(t.layout.getItems)){X(t.fullKey,"will fetch raw items from URL",t.itemsCacheKey);const a=new URL(t.itemsCacheKey);let f=null;for(const[h,m]of[...a.searchParams.entries()])h.startsWith("__jl__header__")&&(f=f??{},f[h.replace("__jl__header__","")]=m,a.searchParams.delete(h));let u=t.layout.getItems.qSearchParam;if(!u)for(const h of a.searchParams.entries())h[1].includes("{q}")&&(u=h[0]);u&&(X(t.fullKey,"apply search params",u),i=!0,r?a.searchParams.set(u,((s=a.searchParams.get(u))==null?void 0:s.replace("{q}",r))??r):a.searchParams.delete(u));let l=typeof t.options.fetchOptions=="function"?t.options.fetchOptions(a):t.options.fetchOptions;f&&(l={...l,headers:f}),n=await t.options.fetch(a.href,l),X(t.fullKey,"raw items fetched from URL",n)}if(!n)throw new Error(`node ${t.fullKey} is missing items or getItems parameters`);if((o=t.layout.getItems)!=null&&o.itemsResults&&(n=this.evalNodeExpression(t,t.layout.getItems.itemsResults,n),X(t.fullKey,"items passed through the getItems.itemsResults expression",n)),!Array.isArray(n))throw new Error(`getItems didn't return an array for node ${t.fullKey}, you can define itemsResults to extract the array`);const c=n.map(a=>this.prepareSelectItem(t,a));return{appliedQ:i,items:c}}async getItems(t,r=""){let i;return this._itemsCache[t.fullKey]&&this._itemsCache[t.fullKey].key===t.itemsCacheKey&&(!r||!this._itemsCache[t.fullKey].appliedQ)?i=this._itemsCache[t.fullKey]:(i=await this.getItemsWithoutCache(t,r),(!r||!i.appliedQ)&&(this._itemsCache[t.fullKey]={key:t.itemsCacheKey,...i})),r&&!i.appliedQ?i.items.filter(n=>n.title.toLowerCase().includes(r.toLowerCase())):i.items}prepareSelectItem(t,r){var c,s,o,a,f,u,l,h,m;const i={},n=t.layout;return typeof r=="object"?(i.value=(c=n.getItems)!=null&&c.itemValue?this.evalNodeExpression(t,n.getItems.itemValue,r):(s=n.getItems)!=null&&s.returnObjects?r:r.value,i.key=(o=n.getItems)!=null&&o.itemKey?this.evalNodeExpression(t,n.getItems.itemKey,r):r.key,i.title=(a=n.getItems)!=null&&a.itemTitle?this.evalNodeExpression(t,n.getItems.itemTitle,r):r.title,i.value=i.value??i.key,i.key=i.key??i.value+"",i.title=i.title??i.key,!i.icon&&r.icon&&(i.icon=r.icon)):(i.value=(f=n.getItems)!=null&&f.itemValue?this.evalNodeExpression(t,n.getItems.itemValue,r):r,i.key=(u=n.getItems)!=null&&u.itemKey?this.evalNodeExpression(t,n.getItems.itemKey,r):i.value,i.title=(l=n.getItems)!=null&&l.itemTitle?this.evalNodeExpression(t,n.getItems.itemTitle,r):i.value),(h=n.getItems)!=null&&h.itemIcon&&(i.icon=this.evalNodeExpression(t,(m=n.getItems)==null?void 0:m.itemIcon,r)),Ti("select item after applying itemValue/itemKey/itemTitle/itemIcon expressions",t.fullKey,i),i}activateItem(t,r){var i,n,c;if(ue(t.fullKey,"activate item explicitly",r),this.activatedItems=x(this.activatedItems,s=>{s[t.fullKey]=r}),this._autofocusTarget=t.fullKey+"/"+r,t.key==="$oneOf")if(t.layout.emptyData&&t.data&&typeof t.data=="object"&&((i=t.children)!=null&&i[0])){const s=this._lastCreateStateTreeContext.nodes.find(a=>a.fullKey===t.parentFullKey);if(!s)throw new Error(`parent with key "${t.parentFullKey}" not found`);if(!s.data||typeof s.data!="object")throw new Error(`parent with key "${t.parentFullKey}" is missing data object`);const o={...s.data};ue(t.fullKey,"remove properties of previous oneOf activated item",(n=t.children)==null?void 0:n[0].fullKey);for(const a of(c=t.children)==null?void 0:c[0].skeleton.propertyKeys)delete o[a];this.input(s,o)}else this.input(t,void 0);else this.updateState();this.handleAutofocus()}deactivateItem(t,r=!1){ue(t.fullKey,"deactivate item explicitly"),this.activatedItems=x(this.activatedItems,i=>{for(const n in i)n.startsWith(t.fullKey)&&(ue(t.fullKey,"item deactivation deletes a key",n),delete i[n])}),r||this.updateState()}handleAutofocus(){const t=this._autofocusTarget;t!==null&&this._autofocusTarget!==this._previousAutofocusTarget&&(this._previousAutofocusTarget=t,setTimeout(()=>{H("emit autofocus event",t),this.options.onAutofocus(t)}))}}function dr(e){return kr()?(Er(e),!0):!1}const Ke=new WeakMap,Fi=(...e)=>{var t;const r=e[0],i=(t=ke())==null?void 0:t.proxy;if(i==null&&!Qt())throw new Error("injectLocal must be called in setup");return i&&Ke.has(i)&&r in Ke.get(i)?Ke.get(i)[r]:pe(...e)},Ai=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ki=Object.prototype.toString,Ei=e=>ki.call(e)==="[object Object]",Lt=()=>{};function Pi(e,t){function r(...i){return new Promise((n,c)=>{Promise.resolve(e(()=>t.apply(this,i),{fn:t,thisArg:this,args:i})).then(n).catch(c)})}return r}const zi=e=>e();function Di(e,t={}){let r,i,n=Lt;const c=a=>{clearTimeout(a),n(),n=Lt};let s;return a=>{const f=Z(e),u=Z(t.maxWait);return r&&c(r),f<=0||u!==void 0&&u<=0?(i&&(c(i),i=null),Promise.resolve(a())):new Promise((l,h)=>{n=t.rejectOnCancel?h:l,s=a,u&&!i&&(i=setTimeout(()=>{r&&c(r),i=null,l(s())},u)),r=setTimeout(()=>{i&&c(i),i=null,l(a())},f)})}}function Ut(e){return e.endsWith("rem")?Number.parseFloat(e)*16:Number.parseFloat(e)}function $i(e){return ke()}function Te(e){return Array.isArray(e)?e:[e]}function Oi(e,t,r={}){const{eventFilter:i=zi,...n}=r;return q(e,Pi(i,t),n)}function hr(e,t=!0,r){$i()?Zt(e,r):t?e():Nt(e)}function Xi(e,t,r={}){const{debounce:i=0,maxWait:n=void 0,...c}=r;return Oi(e,t,{...c,eventFilter:Di(i,{maxWait:n})})}function Mi(e,t,r){return q(e,t,{...r,immediate:!0})}const Ce=Ai?window:void 0;function se(e){var t;const r=Z(e);return(t=r==null?void 0:r.$el)!=null?t:r}function Ne(...e){const t=[],r=()=>{t.forEach(o=>o()),t.length=0},i=(o,a,f,u)=>(o.addEventListener(a,f,u),()=>o.removeEventListener(a,f,u)),n=ee(()=>{const o=Te(Z(e[0])).filter(a=>a!=null);return o.every(a=>typeof a!="string")?o:void 0}),c=Mi(()=>{var o,a;return[(a=(o=n.value)==null?void 0:o.map(f=>se(f)))!=null?a:[Ce].filter(f=>f!=null),Te(Z(n.value?e[1]:e[0])),Te(zr(n.value?e[2]:e[1])),Z(n.value?e[3]:e[2])]},([o,a,f,u])=>{if(r(),!(o!=null&&o.length)||!(a!=null&&a.length)||!(f!=null&&f.length))return;const l=Ei(u)?{...u}:u;t.push(...o.flatMap(h=>a.flatMap(m=>f.map(d=>i(h,m,d,l)))))},{flush:"post"}),s=()=>{c(),r()};return dr(r),s}function ji(){const e=ge(!1),t=ke();return t&&Zt(()=>{e.value=!0},t),e}function mr(e){const t=ji();return ee(()=>(t.value,!!e()))}const xi=Symbol("vueuse-ssr-width");function Vi(){const e=Qt()?Fi(xi,null):null;return typeof e=="number"?e:void 0}function Ri(e,t={}){const{window:r=Ce,ssrWidth:i=Vi()}=t,n=mr(()=>r&&"matchMedia"in r&&typeof r.matchMedia=="function"),c=N(typeof i=="number"),s=ge(),o=ge(!1),a=f=>{o.value=f.matches};return Pr(()=>{if(c.value){c.value=!n.value;const f=Z(e).split(",");o.value=f.some(u=>{const l=u.includes("not all"),h=u.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),m=u.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let d=!!(h||m);return h&&d&&(d=i>=Ut(h[1])),m&&d&&(d=i<=Ut(m[1])),l?!d:d});return}n.value&&(s.value=r.matchMedia(Z(e)),o.value=s.value.matches)}),Ne(s,"change",a,{passive:!0}),ee(()=>o.value)}function Hi(e,t,r={}){const{window:i=Ce,...n}=r;let c;const s=mr(()=>i&&"ResizeObserver"in i),o=()=>{c&&(c.disconnect(),c=void 0)},a=ee(()=>{const l=Z(e);return Array.isArray(l)?l.map(h=>se(h)):[se(l)]}),f=q(a,l=>{if(o(),s.value&&i){c=new ResizeObserver(t);for(const h of l)h&&c.observe(h,n)}},{immediate:!0,flush:"post"}),u=()=>{o(),f()};return dr(u),{isSupported:s,stop:u}}function Ki(e,t={width:0,height:0},r={}){const{window:i=Ce,box:n="content-box"}=r,c=ee(()=>{var l,h;return(h=(l=se(e))==null?void 0:l.namespaceURI)==null?void 0:h.includes("svg")}),s=N(t.width),o=N(t.height),{stop:a}=Hi(e,([l])=>{const h=n==="border-box"?l.borderBoxSize:n==="content-box"?l.contentBoxSize:l.devicePixelContentBoxSize;if(i&&c.value){const m=se(e);if(m){const d=m.getBoundingClientRect();s.value=d.width,o.value=d.height}}else if(h){const m=Te(h);s.value=m.reduce((d,{inlineSize:v})=>d+v,0),o.value=m.reduce((d,{blockSize:v})=>d+v,0)}else s.value=l.contentRect.width,o.value=l.contentRect.height},r);hr(()=>{const l=se(e);l&&(s.value="offsetWidth"in l?l.offsetWidth:t.width,o.value="offsetHeight"in l?l.offsetHeight:t.height)});const f=q(()=>se(e),l=>{s.value=l?t.width:0,o.value=l?t.height:0});function u(){a(),f()}return{width:s,height:o,stop:u}}function en(e={}){const{window:t=Ce,initialWidth:r=Number.POSITIVE_INFINITY,initialHeight:i=Number.POSITIVE_INFINITY,listenOrientation:n=!0,includeScrollbar:c=!0,type:s="inner"}=e,o=N(r),a=N(i),f=()=>{if(t)if(s==="outer")o.value=t.outerWidth,a.value=t.outerHeight;else if(s==="visual"&&t.visualViewport){const{width:l,height:h,scale:m}=t.visualViewport;o.value=Math.round(l*m),a.value=Math.round(h*m)}else c?(o.value=t.innerWidth,a.value=t.innerHeight):(o.value=t.document.documentElement.clientWidth,a.value=t.document.documentElement.clientHeight)};f(),hr(f);const u={passive:!0};if(Ne("resize",f,u),t&&s==="visual"&&t.visualViewport&&Ne(t.visualViewport,"resize",f,u),n){const l=Ri("(orientation: portrait)");q(l,()=>f())}return{width:o,height:a}}const Wi={add:"$plus",calendar:"$calendar",close:"$close",edit:"$edit",sortDown:"$sortDesc",sortUp:"$sortAsc",copy:"svg:M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z",paste:"svg:M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z",alert:"svg:M13 14H11V9H13M13 18H11V16H13M1 21H23L12 2L1 21Z",clock:"svg:M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z",delete:"svg:M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",duplicate:"svg:M11,17H4A2,2 0 0,1 2,15V3A2,2 0 0,1 4,1H16V3H4V15H11V13L15,16L11,19V17M19,21V7H8V13H6V7A2,2 0 0,1 8,5H19A2,2 0 0,1 21,7V21A2,2 0 0,1 19,23H8A2,2 0 0,1 6,21V19H8V21H19Z",infoSymbol:"svg:M11 9H13V7H11V9M11 17H13V11H11V17Z",menu:"svg:M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",sort:"svg:M17.45,17.55L12,23L6.55,17.55L7.96,16.14L11,19.17V4.83L7.96,7.86L6.55,6.45L12,1L17.45,6.45L16.04,7.86L13,4.83V19.17L16.04,16.14L17.45,17.55Z"},Li={nodeComponents:{},plugins:[],pluginsOptions:{}},Ui=(e,t,r,i,n,c,s,o,a,f)=>{const u={...e==null?void 0:e.components},l={...s,...e==null?void 0:e.nodeComponents};if(e!=null&&e.plugins)for(const d of e.plugins)u[d.info.name]=d.info,l[d.info.name]=d.nodeComponent;const h={...e==null?void 0:e.icons,...Wi};return{...Li,readOnly:!!(t&&(t.isDisabled.value||t.isReadonly.value)),density:n==null?void 0:n.density,locale:i,...e,onData:o,onUpdate:a,onAutofocus:f,context:e!=null&&e.context?JSON.parse(JSON.stringify(e.context)):{},width:Math.round(r??0),vjsfSlots:{...c},components:u,nodeComponents:l,icons:h}},Qe=Symbol.for("vjsf:clipboard"),Bi=()=>{if(pe(Qe,null))return;Dr(Qe,{})};function tn(e){const t=pe(Qe);if(!t)throw new Error("useClipboard called without prior createClipboard");return ee({get(){const r=e();return t[r]=t[r]??N(null),t[r].value},set(r){const i=e();t[i]=t[i]??N(null),t[i].value=r}})}const V=G("vjsf:use-vjsf");Gr(!1);const rn={"update:modelValue":e=>!0,"update:state":e=>!0},nn=(e,t,r,i,n,c,s,o)=>{var _;const a=N(null);Bi(),$r({},"Vjsf");const f=(_=pe(Symbol.for("vuetify:defaults")))==null?void 0:_.value;V("provided defaults",f);const{width:u}=Ki(a),l=ge(null),h=ge(null),m=pe(Symbol.for("vuetify:form"),null),d=`vjsf-${Math.random().toString(36).substring(2,9)}`;m?m.register({id:d,validate:()=>{var g,C;return(g=l.value)==null||g.validate(),((C=l.value)==null?void 0:C.errors)||[]},reset:()=>{var g;return(g=l.value)==null?void 0:g.resetValidation()},resetValidation:()=>{var g;return(g=l.value)==null?void 0:g.resetValidation()},vm:ke()}):console.warn("Vjsf should be wrapped in VForm");const v=Or(),A=g=>{V("onStatefulLayoutUpdate",g),g&&(h.value=g.stateTree,V("  -> emit update:state"),n("update:state",g),m&&(g.valid?m.update(d,!0,[]):g.hasHiddenError?m.update(d,null,[]):m.update(d,!1,[])))};let p;const S=async g=>{V("onDataUpdate",g),p=g,await Nt(),p!==g?V("onDataUpdate data changed while waiting for nextTick, do not emit"):(V("  -> emit update:modelValue",g),n("update:modelValue",g))},E=()=>{if(!a.value)return;const g=a.value.querySelector(".vjsf-input--autofocus");if(V("onAutofocus",g),g){const C=g.querySelector("input")??g.querySelector('textarea:not([style*="display: none"]');C&&C.focus()}},F=Mr(),w=ee(()=>Ui(r.value,m,u.value,F.current.value,f==null?void 0:f.global,v,{...i},S,A,E)),T=N({});q(w,g=>{if(o!=null&&o.value)return;if(!s)throw new Error("produceCompileOptions function is not available");const C=s(T.value,g);C!==T.value&&(V("new compileOptions",C),T.value=C)},{immediate:!0});const D=ee(()=>{if(o!=null&&o.value)return o==null?void 0:o.value;if(!c)throw new Error("compile function is not available");return c(e.value,T.value)}),b=()=>{u.value&&(l.value=new Si(ie(D.value),ie(D.value.skeletonTrees[D.value.mainTree]),ie(w.value),ie(t.value)))};return q(w,g=>{V("watch fullOptions",w),l.value?(V("  -> update statefulLayout options"),l.value.options=ie(g)):(V("  -> init statefulLayout"),b())}),q(t,g=>{const C=ie(g);l.value&&l.value.data!==C&&(V("modelValue changed from outside",C),V("  -> update statefulLayout data"),l.value.data=ie(C))}),q(D,g=>{V("watch compiledLayout",g),V("  -> init statefulLayout"),b()}),{el:a,statefulLayout:l,stateTree:h}};export{G as D,xr as a,Li as b,tn as c,Wi as d,qr as e,Zi as f,lr as g,rn as h,Qi as i,nn as j,Ni as p,en as u,Xi as w};
