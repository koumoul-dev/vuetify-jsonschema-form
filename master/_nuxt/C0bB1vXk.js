import{_ as c,x as k,y as p,d as H,W as G,X,h as A,c as Y,Y as Q,g as Z,E as V,C as r,B as a,H as j,O as I,P as M,D as w,A as u,z as y,I as J,K as R}from"./DhNeAbHp.js";import{_}from"./B0Bygv05.js";import{f as ee,g as te,r as le,i as oe,b as v,h as E,a as L,V as q,j as O,k as m,c as W,_ as ae}from"./BUV4Uflz.js";import{V as ie}from"./C8qzJsk0.js";import{u as ne,a as C,V as D}from"./VYtGfK5R.js";import{b as re,V as B,a as U}from"./DmWDWMOA.js";import{g as se}from"./CE1G-McA.js";import{r as de,a as ue}from"./DW2I2FQE.js";import"./v6AWMzdA.js";import{V as F}from"./9-wRwZiS.js";import{a as P,V as S}from"./CM-XtD5f.js";import{V as T}from"./D3VzVXxy.js";import{a as b}from"./CbPrmOw1.js";import{V as K}from"./ddQQNa2D.js";const pe={props:{content:{type:String,required:!0}}},fe=["innerHTML"];function me(e,t,n,s,l,i){return p(),k("div",{class:"markdown-block",innerHTML:e.$markdown(n.content)},null,8,fe)}const Be=Object.assign(c(pe,[["render",me]]),{__name:"MarkdownBlock"}),ye={name:"img-cropper",focusable:!0,isFileInput:!0,schema:{properties:{accept:{type:"string",default:"image/*"},placeholder:{type:"string"}}}},N=H({props:{modelValue:{type:Object,required:!0},statefulLayout:{type:Object,required:!0}},setup(e){G({},"VjsfImgCropper");const{inputProps:t,localData:n,compSlots:s}=ne(X(e,"modelValue"),e.statefulLayout,{layoutPropsMap:["placeholder","accept"]}),l=Y(!1);return()=>{const i=A(ee,{accept:"image/*",...t.value,modelValue:n.value},s.value);if(l.value){const d=A(re,{});return[i,d]}else return[i]}}});Q(N);const Ve={info:ye,nodeComponent:N};var ve=de();const ge=se(ve),Oe=ge,be={modelRoot:"rootData",root:"rootData",model:"data",value:"data"},h=e=>(e.match(/^[a-z.0-9]*$/i)&&!["data","context","rootData","parent"].some(t=>e.startsWith(t+"."))&&(e="rootData."+e),e=e.replace(/(.*)\.(\d+)(.*)/,"$1[$2]$3"),e),$=(e,t="js-eval")=>{let n=e,s=!0;n.includes("parent.value")&&(s=!1,n=n.replace(/parent\.value/g,"parent.data"));for(const[l,i]of Object.entries(be))n=n.replace(new RegExp(`${l}\\.`,"g"),i+".");if(t==="js-eval"&&(n=h(n)),t==="js-tpl")for(const l of n.matchAll(/\{(.*?)\}/g))l[1]!=="q"&&(n=n.replace(l[0],"${"+h(l[1])+"}"));return n.includes("rootData")&&(s=!1),{type:t,expr:n,pure:s}},f=(e,t,n,s)=>{if(!s.includes(e)){if(s.push(e),e.$ref){const[l,i]=t(n,e.$ref);f(l,t,i,s)}if(!e.layout){const l={};if((e.separator||e["x-separator"])&&(l.separator=e.separator||e["x-separator"],delete e.separator,delete e["x-separator"]),e["x-display"]==="icon"&&(e.enum||e.items?.enum)&&(l.getItems={itemIcon:e["x-itemIcon"]||"data.value"},delete e["x-display"]),e["x-display"]){let i=e["x-display"];if(i==="radio"&&(i="radio-group"),i==="checkbox"&&e.type!=="boolean"&&(i="checkbox-group"),i==="switch"&&e.type!=="boolean"&&(i="switch-group"),i==="hidden"&&(i="none"),e.allOf&&e.properties){const d=[];for(const o of Object.keys(e.properties))d.push(o);const g={comp:i,children:[]};for(let o=0;o<e.allOf.length;o++)g.children.push("$allOf-"+o);d.push(g),l.children=d}else l.comp=i;delete e["x-display"]}if(e.format==="hexcolor"&&(l.comp="color-picker",delete e.format),e["x-props"]&&(l.props=e["x-props"],delete e["x-props"]),e["x-fromData"]&&(l.getItems=$(e["x-fromData"]),delete e["x-fromData"]),e["x-if"]&&(l.if=$(e["x-if"]),delete e["x-if"]),e["x-fromUrl"]){const i=e["x-fromUrl"];l.getItems={url:$(i,"js-tpl")},delete e["x-fromUrl"]}l.getItems&&oe(l.getItems)&&(e["x-itemKey"]&&(l.getItems.itemKey=`data["${e["x-itemKey"]}"]`),e["x-itemTitle"]&&(l.getItems.itemTitle=`data["${e["x-itemTitle"]}"]`),e["x-itemValue"]&&(l.getItems.itemValue=`data["${e["x-itemValue"]}"]`),e["x-itemIcon"]&&(l.getItems.itemIcon=`data["${e["x-itemIcon"]}"]`),e["x-itemsProp"]&&(l.getItems.itemsResults=`data["${e["x-itemsProp"]}"]`),delete e["x-itemKey"],delete e["x-itemTitle"],delete e["x-itemValue"],delete e["x-itemsProp"]),e["x-cols"]&&(l.cols=e["x-cols"]),e["x-options"]?.hideInArrayItem&&!l.if&&(l.if="!summary"),e.type==="array"&&e.items&&!l.getItems&&!Array.isArray(e.items)&&(!l.comp||l.comp==="list")&&(e["x-itemTitle"]?l.itemTitle=`data["${e["x-itemTitle"]}"]`:(e.items.properties?.title||e.items.allOf?.some(i=>i.properties?.title))&&(l.itemTitle="data.title")),Object.keys(l).length===1&&"comp"in l?e.layout=l.comp:Object.keys(l).length>0&&(e.layout=l)}if(e.properties)for(const l of Object.keys(e.properties))f(e.properties[l],t,n,s);if(e.allOf)for(const l of e.allOf)f(l,t,n,s);if(e.oneOf){if(!e.oneOfLayout){const l=Object.keys(e.oneOf[0]?.properties||{}).find(i=>!!e.oneOf[0]?.properties[i].const);if(l){const i=e.oneOf[0]?.properties[l];i?.title&&(e.oneOfLayout={label:i.title}),e.required&&Array.isArray(e.required)&&(e.required=e.required.filter(d=>d!==l))}}for(const l of e.oneOf)f(l,t,n,s)}if(e.anyOf)for(const l of e.anyOf)f(l,t,n,s);if(e.type==="array"&&e.items)if(Array.isArray(e.items))for(const l of e.items)f(l,t,n,s);else f(e.items,t,n,s);if(e.dependencies)for(const l of Object.keys(e.dependencies))f(e.dependencies[l],t,n,s);e.if&&(e.then&&f(e.then,t,n,s),e.else&&f(e.else,t,n,s))}};function xe(e,t,n="en"){let s=t;if(!s){const g={strict:!1,allErrors:!0},o=new Oe(g);ue.default(o),s=o}const l=te(e);l.$id=l.$id??"_jl";const i=le(l,s,n),d=[];return f(l,i,l.$id,d),l}const we={"custom-textarea":`
  <template #custom-textarea="{node, statefulLayout}">
    <textarea
      :value="node.data"
      style="border: 1px solid red;"
      placeholder="A custom textarea"
      @input="event => statefulLayout.input(node, event.target.value)"
    />
  </template>`,"custom-message":`
  <template #custom-message="{node, statefulLayout}">
    This message is defined in a slot (key={{ node.key }}, data={{ node.data }}, additional prop={{ prop1 }})
  </template>`},ke={components:{Vjsf:ae,VIcon:S,VContainer:K,VRow:D,VCol:C,VSpacer:U,VForm:W,VBtn:b,VDivider:T,VSelect:m,VSwitch:O,VToolbar:B,VSheet:q,VWindow:L,VSlider:E,VWindowItem:v,VDefaultsProvider:P,VThemeProvider:F},props:{example:{type:Object,required:!0},v2:{type:Boolean,default:!1}},data:()=>({data:null,tab:null,stateTree:null,display:null,options:{readOnly:!1,summary:!1,density:"comfortable",indent:!1,titleDepth:2,validateOn:"input",initialValidation:"withData",updateOn:"input",debounceInputMs:300,defaultOn:"empty",removeAdditional:"error",autofocus:!1,readOnlyPropertiesMode:"show",locale:"en",plugins:[ie,Ve]},filledOptions:null,wrapperWidth:100,slotCodes:we,valid:null,theme:"light"}),computed:{tabs(){const e=[];return this.v2&&e.push({value:"schemaV2",title:"Schema V2"}),e.push({value:"schema",title:"Schema"}),e.push({value:"model",title:"Data"}),this.example.codeSlots?.length&&e.push({value:"slots",title:"Slots"}),this.example.defaultProps&&e.push({value:"defaultProps",title:"Default props"}),e.push({value:"options",title:"Options"}),e},schema(){return this.v2?xe(this.example.schema):this.example.schema},changeOption(e){return t=>{this.options={...this.options,[e]:t}}},validateColor(){return this.valid===!1?"error":this.valid===!0?"success":"default"}},created(){this.example.options&&Object.assign(this.options,this.example.options),this.example.data&&(this.data=JSON.parse(JSON.stringify(this.example.data)))},methods:{updateState(e){this.stateTree=e.stateTree,this.display=e.display,this.filledOptions={...e.options},delete this.filledOptions.vjsfSlots,delete this.filledOptions.nodeComponents,delete this.filledOptions.components,delete this.filledOptions.plugins},editExample(){const e={...this.options};delete e.plugins,localStorage.setItem("vjsf-editor-state",JSON.stringify({schema:this.schema,options:e,data:this.data})),this.$router.push("/editor")},toggleTheme(){this.theme=this.theme==="light"?"dark":"light"}}},je={key:0,class:"text-caption ml-2"},$e=["value","onInput"];function Ce(e,t,n,s,l,i){const d=_,g=Z("vjsf");return p(),V(q,{class:"my-6",border:"sm",rounded:"",color:"transparent"},{default:r(()=>[a(B,{density:"compact",color:"surface",rounded:""},{default:r(()=>[(p(!0),k(I,null,M(i.tabs,o=>(p(),V(b,{key:o.value,class:"text-none font-weight-bold ml-2",variant:e.tab===o.value?"flat":"text",active:e.tab===o.value,color:e.tab===o.value?"primary":"",onClick:x=>e.tab=e.tab===o.value?null:o.value},{default:r(()=>[w(u(o.title),1)]),_:2},1032,["variant","active","color","onClick"]))),128)),a(U),a(b,{icon:"",color:"primary",class:"mr-2",onClick:i.toggleTheme},{default:r(()=>[e.theme==="light"?(p(),V(S,{key:0,icon:"mdi-weather-night"})):(p(),V(S,{key:1,icon:"mdi-weather-sunny"}))]),_:1},8,["onClick"]),a(b,{color:"primary",icon:"mdi-pencil",onClick:i.editExample},null,8,["onClick"])]),_:1}),a(T),e.tab?(p(),V(L,{key:0,modelValue:e.tab,"onUpdate:modelValue":t[14]||(t[14]=o=>e.tab=o),style:{height:"600px","overflow-y":"auto"}},{default:r(()=>[a(v,{value:"schemaV2",class:"ma-3"},{default:r(()=>[a(d,null,{default:r(()=>[y("pre",null,u(JSON.stringify(n.example.schema,null,2)),1)]),_:1})]),_:1}),a(v,{value:"schema",class:"ma-3"},{default:r(()=>[a(d,null,{default:r(()=>[y("pre",null,u(JSON.stringify(i.schema,null,2)),1)]),_:1})]),_:1}),a(v,{value:"model",class:"ma-3 fill-height"},{default:r(()=>[e.data!==null&&e.data!==void 0?(p(),V(d,{key:0},{default:r(()=>[y("pre",null,u(JSON.stringify(e.data,null,2)),1)]),_:1})):j("",!0)]),_:1}),a(v,{value:"slots",class:"ma-3"},{default:r(()=>[(p(!0),k(I,null,M(n.example.codeSlots,o=>(p(),V(d,{key:o},{default:r(()=>[y("pre",null,u(e.slotCodes[o]),1)]),_:2},1024))),128))]),_:1}),a(v,{value:"defaultProps",class:"ma-3"},{default:r(()=>[a(d,null,{default:r(()=>[y("pre",null,u(JSON.stringify(n.example.defaultProps,null,2)),1)]),_:1})]),_:1}),a(v,{value:"options",class:"ma-3",style:{height:"600px"}},{default:r(()=>[a(D,{style:{height:"600px"}},{default:r(()=>[a(C,null,{default:r(()=>[a(P,{defaults:{global:{density:"compact",color:"primary",hideDetails:!0}}},{default:r(()=>[a(O,{modelValue:e.options.readOnly,"onUpdate:modelValue":t[0]||(t[0]=o=>e.options.readOnly=o),label:"readOnly"},null,8,["modelValue"]),a(O,{modelValue:e.options.summary,"onUpdate:modelValue":t[1]||(t[1]=o=>e.options.summary=o),label:"summary"},null,8,["modelValue"]),a(O,{modelValue:e.options.autofocus,"onUpdate:modelValue":t[2]||(t[2]=o=>e.options.autofocus=o),label:"autofocus"},null,8,["modelValue"]),a(m,{modelValue:e.options.density,"onUpdate:modelValue":t[3]||(t[3]=o=>e.options.density=o),style:{"max-width":"300px"},items:["default","comfortable","compact"]},null,8,["modelValue"]),a(O,{modelValue:e.options.indent,"onUpdate:modelValue":t[4]||(t[4]=o=>e.options.indent=o),label:"indent"},null,8,["modelValue"]),a(m,{modelValue:e.options.titleDepth,"onUpdate:modelValue":t[5]||(t[5]=o=>e.options.titleDepth=o),label:"titleDepth",style:{"max-width":"300px"},items:[1,2,3,4,5,6]},null,8,["modelValue"]),a(m,{modelValue:e.options.validateOn,"onUpdate:modelValue":t[6]||(t[6]=o=>e.options.validateOn=o),label:"validateOn",style:{"max-width":"300px"},items:["input","blur","submit"]},null,8,["modelValue"]),a(m,{modelValue:e.options.initialValidation,"onUpdate:modelValue":t[7]||(t[7]=o=>e.options.initialValidation=o),label:"initialValidation",style:{"max-width":"300px"},items:["never","withData","always"]},null,8,["modelValue"]),a(m,{modelValue:e.options.updateOn,"onUpdate:modelValue":t[8]||(t[8]=o=>e.options.updateOn=o),label:"updateOn",style:{"max-width":"300px"},items:["input","blur"]},null,8,["modelValue"]),a(m,{modelValue:e.options.defaultOn,"onUpdate:modelValue":t[9]||(t[9]=o=>e.options.defaultOn=o),label:"defaultOn",style:{"max-width":"300px"},items:["never","missing","empty"]},null,8,["modelValue"]),a(m,{modelValue:e.options.removeAdditional,"onUpdate:modelValue":t[10]||(t[10]=o=>e.options.removeAdditional=o),label:"removeAdditional",style:{"max-width":"300px"},items:["unknown","error","none"]},null,8,["modelValue"]),a(m,{modelValue:e.options.readOnlyPropertiesMode,"onUpdate:modelValue":t[11]||(t[11]=o=>e.options.readOnlyPropertiesMode=o),label:"readOnlyPropertiesMode",style:{"max-width":"300px"},items:["remove","hide","show"]},null,8,["modelValue"]),a(m,{modelValue:e.options.locale,"onUpdate:modelValue":t[12]||(t[12]=o=>e.options.locale=o),label:"locale",style:{"max-width":"300px"},items:["en","fr","nl"]},null,8,["modelValue"]),a(E,{modelValue:e.wrapperWidth,"onUpdate:modelValue":t[13]||(t[13]=o=>e.wrapperWidth=o),min:0,max:100,step:1,label:"container width",style:{"max-width":"600px"}},{append:r(()=>[w(u(e.wrapperWidth)+" % ",1)]),_:1},8,["modelValue"])]),_:1}),e.display?(p(),k("div",je," width="+u(e.display.width)+"px, display="+u(e.display.name),1)):j("",!0)]),_:1}),a(T,{vertical:""}),a(C,{style:{height:"600px","overflow-y":"auto"}},{default:r(()=>[t[18]||(t[18]=y("div",{class:"text-subtitle"}," Options filled with default values: ",-1)),a(d,null,{default:r(()=>[y("pre",null,u(JSON.stringify(e.filledOptions,null,2)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])):j("",!0),a(F,{theme:e.theme,"with-background":"",class:"rounded-b"},{default:r(()=>[a(K,{fluid:""},{default:r(()=>[y("div",{style:J(`width: ${e.wrapperWidth}%`)},[a(W,{ref:"form",modelValue:e.valid,"onUpdate:modelValue":t[17]||(t[17]=o=>e.valid=o)},{default:r(()=>[a(P,{defaults:n.example.defaultProps||{}},{default:r(()=>[R(e.$slots,"vjsf",{modelValue:e.data,options:e.options,updateState:i.updateState,updateModelValue:o=>e.data=o},()=>[a(g,{modelValue:e.data,"onUpdate:modelValue":t[15]||(t[15]=o=>e.data=o),schema:i.schema,options:e.options,"onUpdate:state":i.updateState},{"custom-textarea":r(({node:o,statefulLayout:x})=>[y("textarea",{value:o.data,style:{border:"1px solid red"},placeholder:"A custom textarea",onInput:z=>x.input(o,z.target.value)},null,40,$e)]),"custom-message":r(({node:o,prop1:x})=>[w(" This message is defined in a slot (key="+u(o.key)+", data="+u(o.data)+", additional prop="+u(x)+") ",1)]),_:1},8,["modelValue","schema","options","onUpdate:state"])])]),_:3},8,["defaults"]),a(D,{class:"ma-0"},{default:r(()=>[a(U),a(b,{color:i.validateColor,flat:"",class:"mt-2",onClick:t[16]||(t[16]=o=>e.$refs.form.validate())},{default:r(()=>[...t[19]||(t[19]=[w(" Validate ",-1)])]),_:1},8,["color"])]),_:1})]),_:3},8,["modelValue"])],4)]),_:3})]),_:3},8,["theme"])]),_:3})}const Fe=Object.assign(c(ke,[["render",Ce]]),{__name:"VjsfExample"});export{Be as _,Fe as a};
